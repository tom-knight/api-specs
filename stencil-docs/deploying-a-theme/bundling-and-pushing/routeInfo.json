{"path":"stencil-docs/deploying-a-theme/bundling-and-pushing","templateID":0,"sharedPropsHashes":{"nav":"Z2k7O5R","sidebarTree":"23J4Lj","namespace":"Zd6xn0"},"localProps":{"version":"1.3","crumbs":[{"content":"Stencil Docs","to":"/stencil-docs"},{"content":"Deployment","to":"/stencil-docs/deploying-a-theme"},{"content":"Bundling and Pushing a Theme","to":"/stencil-docs/deploying-a-theme/bundling-and-pushing"}],"page":{"meta":{"title":"Bundling and Pushing a Theme - Deployment - Stencil Docs","url":"/stencil-docs/deploying-a-theme/bundling-and-pushing","description":"Bundling and Pushing a Theme\n\n\n\nOn this page\n\nConfirm dependencies\n\nVerify directory and file permissions\n\nBundling your theme\n\nPushing your theme\n\nThem..."},"title":"Bundling and Pushing a Theme","parsedPath":["pages","/stencil-docs","data","children",9,"data","children",3],"rootPagePath":"/stencil-docs","path":"/stencil-docs/deploying-a-theme/bundling-and-pushing","isSubpage":true,"route":{"path":"/bundling-and-pushing"},"data":{"blocks":[{"type":"text","data":"# Bundling and Pushing a Theme\r\n\r\n<div class=\"otp\" id=\"no-index\">\r\n\r\n### On this page\r\n- [Confirm dependencies](#confirm-dependencies)\r\n- [Verify directory and file permissions](#verify-directory-and-file-permissions)\r\n- [Bundling your theme](#bundling-your-theme)\r\n- [Pushing your theme](#pushing-your-theme)\r\n- [Theme quota warning](#theme-quota-warning)\r\n- [Other bundling or upload errors](#other-bundling-or-upload-errors)\r\n- [Resources](#resources)\r\n\r\n</div> \r\n\r\n## Confirm dependencies\r\n\r\nIf you have customized a theme originally downloaded from the BigCommerce Theme Marketplace: Before you package your theme, make sure your theme directory includes all the dependencies that BigCommerce requires for submission.\r\n\r\n\r\nFollow the link for your scenario:\r\n\r\nIf you downloaded a refreshed version of Stencil's default Cornerstone theme: Run `npm install` in the theme directory to install refreshed JavaScript dependencies, as outlined in [Installing Stencil](/stencil-docs/getting-started/installing-stencil#installing_installing-stencils-js-utilities).\r\n\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: warning -->\r\n\r\n### No automatic check for dependencies\r\n> The `stencil bundle` and `stencil push` commands do not check for the dependencies that these build systems install. So if those dependencies are missing, these commands will not immediately report errors. However, your resulting .zip file will not properly upload to BigCommerce, and will not run properly on a storefront.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Verify directory and file permissions\r\n\r\nIf you have added any new subdirectories or files to your base theme, verify that you have:\r\n\r\n* Set newly added directories to permission `755` (`drwxr-xr-x`).\r\n* Set newly added files to permission `644` (`rw-r--r--`).\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--warning\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: warning -->\r\n\r\n### Writable permissions are required\r\n> Without these writable permissions, bundling your theme will fail, blocking its upload to BigCommerce.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Bundling your theme\r\n\r\nOnce you have verified the requirements above, you are ready to process and package your theme for upload to BigCommerce. Stencil CLI provides two options for creating a zip file that contains all of your theme's essentials while excluding redundant components. The options are either only bundling your theme, or bundling and pushing your theme. These options are available depending on how you've [authorized](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/troubleshooting-your-setup#stencil-start-errors) your theme:\r\n\r\n\r\n### Bundle only\r\n\r\nThe `stencil bundle` command bundles your theme into a zip file which may be uploaded to a BigCommerce store.\r\n\r\n\r\nThe `bundle` command will notify you of its progress and completion, as well as any errors that prevent bundling.\r\n\r\n####  Check/Adjust zipfile's size\r\n\r\nCheck the resulting zip file's size before you proceed. The zipped bundle should be only a few megabytes. BigCommerce imposes a hard limit of 50 MB, and any file size approaching that is problematic. If your zip file fits comfortably within the size limit above, jump directly to [Pushing Your Theme](https://developer.bigcommerce.com/stencil-docs/deploying-a-theme/bundling-and-pushing#pushing-your-theme). However, if your zip file approaches or exceeds 50 MB, you must first use one of these procedures to restructure your theme to a manageable size for upload to BigCommerce:\r\n\r\n\r\n* [Shrinking Your Theme by Excluding Static Assets (WebDAV)](https://support.bigcommerce.com/s/article/File-Access-WebDAV#manual)\r\n* [Staging a Theme for CDN Delivery](https://support.bigcommerce.com/s/article/Optimizing-Your-Images#imageop-cdn)\r\n\r\n### Bundle and push\r\n\r\nThe `stencil push` command is available only for themes that you have successfully initialized using a [Stencil CLI token](https://support.bigcommerce.com/s/article/Store-API-Accounts#creating) (with `Themes: modify scope`). This command bundles your theme and uploads it to the associated store, in one continuous process.\r\n\r\nFor further requirements and usage details, please see the _Command-Line Upload_ in [Pushing Your Theme](/stencil-docs/deploying-a-theme/bundling-and-pushing#pushing-your-theme) below.\r\n\r\nFor file-size error diagnostics and workarounds, please _Check/Adjust Zipfile's Size_ above.\r\n\r\n### Software requirements / resolving lint errors\r\n\r\n* Only use the `stencil bundle` or the `stencil push` command to process and package themes for submission. These commands generate `.zip` files that match BigCommerce's expected structure. They also generate metadata required for your theme to function properly.\r\n\r\n* Do not create `.zip` files using general-purpose archiving software. The resulting files will trigger errors upon upload to BigCommerce.\r\n\r\n* Do not open a bundled theme zip file to add, delete, rename, or update files. Doing so will make your theme unusable in the production store.\r\n\r\n\r\n* If bundling your theme triggers multiple lint errors related to the `bundle.js` file, then your theme is missing the `.eslintignore` file. Please retrieve this file from the [Stencil Cornerstone repo](https://github.com/bigcommerce/cornerstone/blob/master/.eslintignore), then re-run `stencil bundle` or `stencil push`.\r\n\r\n## Pushing your theme\r\n\r\nBigCommerce provides two alternatives for uploading a theme to its associated BigCommerce store. You can perform either a control panel upload, or a command line upload. These options are available depending on how you've authorized your theme:\r\n\r\n### Control Panel upload\r\n\r\nTo upload your theme to a store using the BigCommerce Control Panel, first use `stencil bundle` to package your theme into a zip file. Prepare your file according to the instructions in the [Bundle only](#bundle-only) section.\r\n\r\nFor the Control Panel's upload steps, see the [Uploading Custom Themes](https://support.bigcommerce.com/s/article/Stencil-Themes#download-upload) article in our Knowledge Base.\r\n\r\nFor error codes that you might encounter when uploading a theme – and corresponding workarounds, see [Troubleshooting Theme Uploads](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/troubleshooting-your-setup).\r\n\r\n### Command line upload\r\n\r\nThe `stencil push` command allows you to bundle your theme and upload it to the store, with a single terminal command. To run `stencil push`, you must first:\r\n\r\nSuccessfully initialize your theme using a [Stencil CLI token](https://support.bigcommerce.com/s/article/Store-API-Accounts#creating) that you created with the `Themes: modify scope`.\r\n\r\nInstall Stencil CLI version 1.12.0 or higher.\r\n\r\nTo check your current Stencil CLI version, enter `stencil --version` or `stencil -V` on the command line. If you need to update an earlier version, reinstall Stencil CLI.\r\n\r\n### Pushing a theme\r\n\r\nTo initiate bundling and pushing, enter the following on the command line:\r\n\r\n`stencil push`\r\n\r\nStencil CLI displays the same notifications, prompts, and selection options you would receive when using the control panel's GUI. The sections below will describe the notifications and interactions you might see.\r\n\r\nTo push a theme and activate a particular variation without being prompted, use `stencil push -a VARIATION_NAME` with the name of the variation. For example, `stencil push -a Light` will activate the \"Light\" variation. If you simply use `stencil push -a` without a variation name, the first variation will be applied.\r\n\r\n\r\nIf you are already at your theme limit, you can automatically delete the oldest theme on your store using `stencil push -d`. You can use the combination, `stencil push -a -d`, to give the best chance of the upload working without any interaction, which is desirable for automated deployments of Stencil CLI.\r\n\r\n### Successful bundling\r\n\r\nStencil CLI will display `ok` confirmations, or `not ok` errors, or `warnings` for individual substeps in bundling and uploading your theme. If bundling is successful, you will next see a `Processing` progress bar to track the upload.\r\n\r\n<!--\r\n    title:\r\n    data: //s3.amazonaws.com/user-content.stoplight.io/6116/1539055887301\r\n-->\r\n\r\n![](//s3.amazonaws.com/user-content.stoplight.io/6116/1539055887301 \"\")\r\n\r\n### Successful upload\r\n\r\nUpon successful upload, you will receive the prompt, `Would you like to apply your theme to your store at <storehash>? (y/N)`. Any response except `y` or `Y` processes as \"No.\" You can always apply the theme later through the control panel.\r\n\r\n### Apply which variation?\r\n\r\nIf you chose to apply the newly uploaded theme, you will receive the prompt: \"Which variation would you like to apply? (Use arrow keys)\"\r\n\r\n\r\n<!--\r\n    title:\r\n    data: //s3.amazonaws.com/user-content.stoplight.io/6116/1539055910721\r\n-->\r\n\r\n![](//s3.amazonaws.com/user-content.stoplight.io/6116/1539055910721 \"\")\r\n\r\nUse your arrow keys to move the selection caret/highlight to the variation you want, and then press `Enter`.\r\n\r\nStencil CLI will then confirm which variation is active on the storefront.\r\n\r\n<!--\r\n    title:\r\n    data: //s3.amazonaws.com/user-content.stoplight.io/6116/1539055915081\r\n-->\r\n\r\n![](//s3.amazonaws.com/user-content.stoplight.io/6116/1539055915081 \"\")\r\n\r\n## Theme quota warning\r\n\r\nIf you run `stencil push` when your store's My Themes section has reached its maximum of 20 themes, you will receive a prompt to select at least one existing theme for deletion.\r\n\r\n\r\n<!--\r\n    title:\r\n    data: //s3.amazonaws.com/user-content.stoplight.io/6116/1539055988142\r\n-->\r\n\r\n![](//s3.amazonaws.com/user-content.stoplight.io/6116/1539055988142 \"\")\r\n\r\nCustom themes – which are available for selection – will have a circle to their left. Marketplace themes and the store's active theme – all of which are protected from deletion – will be flagged `(Disabled)`.\r\n\r\nUse your arrow keys to move the selection caret to each theme/version that you want to select. Then press the spacebar to select it. (Filled circles will indicate your selected themes/versions.)\r\n\r\nIf you are certain of your selections, you can press **Enter** to delete the themes.\r\n\r\n\r\n<div class=\"HubBlock--callout\">\r\n<div class=\"CalloutBlock--error\">\r\n<div class=\"HubBlock-content\">\r\n\r\n<!-- theme: error -->\r\n\r\n###  Select carefully – no confirmation\r\n> Once you press `Enter`, the selected themes will be deleted immediately, with no further confirmation.\r\n\r\nIf you have any doubts – especially about deleting multiple themes/versions – it is safest to delete them through the control panel GUI. This GUI allows you to compare uploaded versions and to inspect their metadata.\r\n\r\n</div>\r\n</div>\r\n</div>\r\n\r\n## Other bundling or upload errors\r\n\r\nFor any other `not ok` bundling or upload errors that you receive, please refer to these debugging guidelines Theme setup and sizing diagnostics in preceding sections throughout this page, or the following article titled [Troubleshooting Theme Uploads](https://developer.bigcommerce.com/stencil-docs/installing-stencil-cli/troubleshooting-your-setup).\r\n\r\n## Resources\r\n\r\n### Related articles\r\n* [Naming Your Theme and Theme Variations](https://developer.bigcommerce.com/stencil-docs/deploying-a-theme/naming-your-theme)\r\n* [Checking a Theme's Size](https://developer.bigcommerce.com/stencil-docs/deploying-a-theme/checking-a-themes-size)\r\n* [Preparing Thumbnail Images](https://developer.bigcommerce.com/stencil-docs/deploying-a-theme/preparing-thumbnail-images)\r\n"}],"children":[]}}}}
