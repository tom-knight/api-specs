{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////home/circleci/project/core/src/ui/Icon.tsx","webpack:////home/circleci/project/platform/src/utils/json/shallowEqual.js","webpack:////home/circleci/project/platform/src/utils/json/index.js","webpack:////home/circleci/project/platform/src/utils/general/index.js","webpack:////home/circleci/project/platform/src/utils/specs/index.js","webpack:////home/circleci/project/core/src/uri/index.ts","webpack:////home/circleci/project/platform/src/utils/http/index.js","webpack:////home/circleci/project/platform/src/utils/specs/http.js","webpack:////home/circleci/project/platform/src/utils/instances/index.js","webpack:////home/circleci/project/platform/src/components/FormInputTip/index.js","webpack:////home/circleci/project/platform/src/components/FormInputLabel/index.js","webpack:////home/circleci/project/platform/src/utils/router/matchPath.js","webpack:////home/circleci/project/platform/src/utils/router/matchRoutes.js","webpack:////home/circleci/project/platform/src/utils/router/sync.js","webpack:////home/circleci/project/platform/src/utils/router/components/RouterLayoutSlot/index.js","webpack:////home/circleci/project/platform/src/utils/router/components/RouterRedirect/index.js","webpack:////home/circleci/project/platform/src/utils/router/index.js","webpack:////home/circleci/project/platform/src/utils/url/index.js","webpack:////home/circleci/project/platform/src/utils/colors/index.js","webpack:////home/circleci/project/core/src/ui/Popup.tsx","webpack:////home/circleci/project/platform/src/components/ErrorBoundary/index.js","webpack:////home/circleci/project/platform/src/utils/router/NavLink.tsx","webpack:////home/circleci/project/platform/src/utils/json/routeData.js","webpack:////home/circleci/project/platform/src/utils/bugsnag/index.js","webpack:////home/circleci/project/platform/src/utils/objects/index.js","webpack:////home/circleci/project/platform/src/utils/objectRouter/index.js","webpack:////home/circleci/project/platform/src/utils/hubs/index.js","webpack:////home/circleci/project/platform/src/utils/yaml/index.js","webpack:////home/circleci/project/platform/src/utils/projects/index.js","webpack:////home/circleci/project/platform/src/utils/entities/index.js","webpack:////home/circleci/project/platform/src/components/FormDropdown/index.js","webpack:////home/circleci/project/core/src/ui/classNames.ts","webpack:////home/circleci/project/core/src/ui/Portal.tsx","webpack:////home/circleci/project/core/src/ui/ListScroller.tsx","webpack:////home/circleci/project/platform/src/format-hubs/utils/sidebar/viewer.js","webpack:////home/circleci/project/platform/src/format-hubs/utils/viewer.js","webpack:////home/circleci/project/platform/src/utils/config/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/HubSearch/index.js","webpack:////home/circleci/project/core/src/ui/index.ts","webpack:////home/circleci/project/platform/src/utils/authorization/index.js","webpack:////home/circleci/project/platform/src/utils/router/Link.js","webpack:////home/circleci/project/platform/src/components/FormSearch/index.js","webpack:////home/circleci/project/platform/src/utils/query/index.js","webpack:////home/circleci/project/core/src/ui/Button.tsx","webpack:////home/circleci/project/core/src/ui/Header.tsx","webpack:////home/circleci/project/core/src/ui/Sidebar.tsx","webpack:////home/circleci/project/core/src/ui/PanelListItem.tsx","webpack:////home/circleci/project/hub-builder/lib/build/react-static-routes.js","webpack:////home/circleci/project/platform/src/utils/schemas/helpers.js","webpack:////home/circleci/project/platform/src/utils/strings/index.js","webpack:////home/circleci/project/platform/src/utils/history/index.js","webpack:////home/circleci/project/platform/src/utils/variables/index.js","webpack:////home/circleci/project/platform/src/utils/shortid/index.js","webpack:////home/circleci/project/core/src/json/index.ts","webpack:////home/circleci/project/core/src/json/json.ts","webpack:////home/circleci/project/core/src/ui/enums.ts","webpack:////home/circleci/project/core/src/uri/uri.ts","webpack:////home/circleci/project/core/src/path/index.ts","webpack:////home/circleci/project/core/src/path/path.ts","webpack:////home/circleci/project/node_modules/react-universal-component/dist/requireById sync ^.*$","webpack:////home/circleci/project/platform/src/utils/collections/index.js","webpack:////home/circleci/project/platform/src/utils/logging/index.js","webpack:////home/circleci/project/core/src/ui/Card.tsx","webpack:////home/circleci/project/core/src/ui/Dropdown.tsx","webpack:////home/circleci/project/core/src/ui/DropdownInput.tsx","webpack:////home/circleci/project/platform/src/utils/alert/index.js","webpack:////home/circleci/project/core/src/ui/Layout.tsx","webpack:////home/circleci/project/core/src/ui/Modal.tsx","webpack:////home/circleci/project/platform/src/utils/json/compose.js","webpack:////home/circleci/project/platform/src/utils/schemas/json-schema-generator.js","webpack:////home/circleci/project/platform/src/utils/har/index.js","webpack:////home/circleci/project/platform/src/utils/specs/swagger.js","webpack:////home/circleci/project/core/src/ui/PanelList.tsx","webpack:////home/circleci/project/core/src/ui/TextField.tsx","webpack:////home/circleci/project/core/src/ui/Toggle.tsx","webpack:////home/circleci/project/platform/src/utils/schemas/transformer.js","webpack:////home/circleci/project/platform/src/utils/schemas/index.js","webpack:////home/circleci/project/platform/src/components/Flasher/index.js","webpack:////home/circleci/project/platform/src/components/Alert/index.js","webpack:////home/circleci/project/platform/src/utils/versions/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/HubHeaderItem/index.js","webpack:////home/circleci/project/platform/src/format-hubs/components/HubHeader/viewer.js","webpack:////home/circleci/project/platform/src/utils/intercom/index.js","webpack:////home/circleci/project/platform/src/utils/googleAnalytics/index.js","webpack:////home/circleci/project/platform/src/stores/base.js","webpack:////home/circleci/project/hub-builder/lib/client/containers/Hub.js","webpack:////home/circleci/project/platform/src/stores/appStore.js","webpack:////home/circleci/project/platform/src/stores/jsonSchemaStore.js","webpack:////home/circleci/project/platform/src/stores/jsonPathCache.js","webpack:////home/circleci/project/platform/src/stores/_base.js","webpack:////home/circleci/project/platform/src/stores/error.js","webpack:////home/circleci/project/platform/src/utils/popups/index.js","webpack:////home/circleci/project/platform/src/stores/_manager.js","webpack:////home/circleci/project/platform/src/utils/acl/index.js","webpack:////home/circleci/project/platform/src/stores/services/_base.js","webpack:////home/circleci/project/platform/src/stores/oauth.js","webpack:////home/circleci/project/hub-builder/lib/client/stores/collectionEditorStore.js","webpack:////home/circleci/project/hub-builder/lib/client/stores/pageStore.js","webpack:////home/circleci/project/hub-builder/lib/client/stores/routerStore.js","webpack:////home/circleci/project/hub-builder/lib/client/stores/index.js","webpack:////home/circleci/project/hub-builder/lib/client/App.js","webpack:////home/circleci/project/hub-builder/lib/client/index.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","2","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","head","document","getElementsByTagName","script","createElement","charset","timeout","nc","setAttribute","src","p","0","1","3","4","5","6","7","10","jsonpScriptSrc","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","error","Error","request","undefined","setTimeout","appendChild","all","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","React","__importStar","cn","react_fontawesome_1","enums_1","Icon","_a","className","color","size","iconProps","__rest","FontAwesomeIcon","assign","[object Object]","colors","black","sizes","md","is","x","y","shallowEqual","objA","objB","_typeof","keysA","keys","keysB","safeParse","defaultValue","num","parseNumber","JSON","parse","_","isUndefined","string","numVal","toNumber","isFinite","toString","NaN","safeStringify","offset","iterator","JsonStringify","combinePathSelectors","parts","arguments","path","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","done","part","trim","charAt","concat","return","pruneObject","body","level","Array","stringify","omitByRecursively","obj","omit","isArray","cleanObj","k","val","__webpack_exports__","parseDynamicParams","computePathParamsFromUri","getEndpointFromSpec","cleanSpec","defaultSpec","lodash__WEBPACK_IMPORTED_MODULE_0__","lodash__WEBPACK_IMPORTED_MODULE_0___default","url_parse__WEBPACK_IMPORTED_MODULE_1__","url_parse__WEBPACK_IMPORTED_MODULE_1___default","_swagger__WEBPACK_IMPORTED_MODULE_3__","_ref","pathname","url","URL","counter","split","newParts","isLast","newPart","extension","id","match","last","join","replace","uri","_ref2","existingParams","computePathParamsFromUriSwagger","props","getEndpointFromSpecSwagger","_ref12","_ref12$spec","spec","_ref13$title","title","__export","httpMethods","post","put","patch","delete","copy","link","unlink","purge","lock","unlock","options","trace","RegExp","generateOperationId","method","camelCase","buildParameters","_ref2$rootParameters","rootParameters","_ref2$parameters","parameters","_ref2$dereferencedPar","dereferencedParameters","query","header","formData","param","dereferencedParam","$ref","in","index","paramFields","convertParameterToSchema","source","prop","includes","String","convertParametersToSchema","properties","required","item","setOperationFieldSchema","operation","params","mergedSchema","schema","existingSchema","isObject","mergeSchemas","set","setOperationBodySchema","consumes","description","paramExamples","availableMimeTypes","intersection","isEmpty","map","mimeType","examples","mapValues","mapOperationParameters","builtParameters","buildHttpOperation","_ref3","_ref3$spec","_ref3$path","_path","_slicedToArray","root","operationPath","pathObj","secReqObj","pathParams","_pathObj$responses","responses","_pathObj$parameters","operationSecurity","security","_pathObj$tags","tags","_spec$security","specSecurity","securityDefinitions","pick","union","produces","find","response","status","headers","convertObjectToSchema","mapOperationResponses","host","schemes","compact","servers","scheme","trimEnd","basePath","forEach","varName","test","secItem","scopes","def","cloneDeep","omitBy","desc","cleanRule","_ref5","_ref5$rule","rule","cleanApi","_ref6","_ref6$api","api","cleanInstance","_ref7","_ref7$instance","instance","apiId","apis","ruleId","rules","defaultInstance","_ref16$title","encodeFileId","encodeBase32","stripPadding","lower","FormInputTip","tip","react_default","a","Popup","trigger","content","wide","hoverable","FormInputLabel","label","inverted","inline","style","is-inverted","is-inline","components_FormInputTip","Router","computeMatch","syncHistoryWithStore","history","store","handleLocationChange","location","unsubscribeFromHistory","listen","subscribe","listener","unsubscribeFromStore","observe","change","rawLocation","_objectSpread","action","unsubscribe","RouterLayoutSlot","_this","_classCallCheck","this","_possibleConstructorReturn","_getPrototypeOf","_props$slot","slot","state","displayName","component","Component","nextProps","_nextProps$slot","nextState","_nextProps$slot2","_this$props","_this$props$slot","slotProps","_objectWithoutProperties","_extends","inject","observer","routerStore","_routerStore$layout","layout","RouterLayoutSlot_RouterLayoutSlot","_routerStore$match","_match$route","route","redirect","Redirect_default","from","to","Link","sync_syncHistoryWithStore","createURL","u","newURL","href","field","hash","hostname","origin","password","port","protocol","search","searchParams","username","cleanSlashes","_Object$assign","trimStart","cleaned","buildPathParts","base","pathParts","pathsExt","extractParams","matchParam","exec","getAllParams","merge","anchorQs","arr","anchor","getAnchorSearch","parseQuery","getAnchorQs","qs","getSearchQs","getHashParts","_param$split2","replacePathParams","replacedPath","matches","regex","escapeRegExp","isExternalLink","formats","extensions","fileFormat","file","language","format","splitPath","toLower","nth","fileLanguage","getQueryParams","queryString","queries","q","buildQueryString","_ref7$url","_ref7$params","oldParams","newParams","queryList","unshift","Number","removeQueryString","stringToColor","checkIsWhite","color_hash__WEBPACK_IMPORTED_MODULE_1__","color_hash__WEBPACK_IMPORTED_MODULE_1___default","tinycolor2__WEBPACK_IMPORTED_MODULE_2__","tinycolor2__WEBPACK_IMPORTED_MODULE_2___default","_shortid__WEBPACK_IMPORTED_MODULE_3__","colorHash","ColorHash","lightness","hardcoded","model","colorCache","str","res","shortid","toLowerCase","hex","tinycolor","getBrightness","Portal_1","PureComponent","super","_isOverTrigger","_isOverContent","handleMouseEnter","_isOver","isVisible","_controlled","showPopup","handleMouseLeave","_isLeaving","toElement","relatedTarget","_content","hidePopup","_willHide","forceUpdate","setState","_hideDelay","repaint","_trigger","posX","_posX","posY","_posY","triggerDimensions","getBoundingClientRect","contentDimensions","contentWidth","_width","width","minWidth","left","_padding","_offset","right","Math","max","clientWidth","min","innerWidth","bottom","innerHeight","top","height","overflow","renderTrigger","renderContent","funcs","elems","onMouseEnter","onMouseLeave","ref","el","isOver","position","zIndex","padding","visibility","Portal","prevProps","propsChanged","show","hideDelay","ErrorBoundary","info","bugsnag","sdk","BugsnagReport","report","message","getStacktrace","severity","unhandled","severityReason","componentStack","formatComponentStack","updateMetaData","notify","errorMessage","react__WEBPACK_IMPORTED_MODULE_0___default","semantic_ui_react__WEBPACK_IMPORTED_MODULE_2__","semantic_ui_react__WEBPACK_IMPORTED_MODULE_3__","icon","primary","onClick","reload","children","mobx_react_1","react_router_dom_1","uri_1","LinkComponent","canRenderFragment","download","URI","with","fragment","classNames","isAbsolute","targetProp","authority","toURL","NavLink","_triggerRouteInterceptors","scrollToHash","preventDefault","getValue","v","dataFactory","getSearchValue","searchFactory","routeData","_ref2$data","_ref2$rules","opts","_opts$search2","flatten","limit","filtered","func","_ref$parentPath","parentPath","_ref$parentRulePath","parentRulePath","hoist","exclusive","_opts$search","anyMatched","currentPath","matched","childMatched","shouldRecurse","rulePath","matcher","matchedData","searchable","values","fuzzysearch","recursive","isFunction","nextRulePath","nextRules","_defineProperty","circular","fuse","Fuse","threshold","distance","flattened","init","Bugsnag","user","startsWith","si","parseInt","vi","isNaN","deepFind","_flatPageOptions","unsetProps","allowChildren","disabled","allowRef","po","_flatSubpageOptions","require","defaultFileFilter","documentation","modeling","testing","markdown","html","config","faPuzzlePiece","faPencilAlt","faFlask","faHtml5","faBook","faServer","_exportUrlToSrn","memoize","parsed","exportUrlToSrn","buildExportUrl","_ref2$entity","entity","deref","exportUrl","FormDropdown","clearSearchQuery","searchQuery","handleSearchChange","onSearchChange","handleChange","onChange","clearSearchOnSelect","_cn","_this$props2","_this$props2$classNam","labelStyle","loc","readOnly","multiple","dropdownProps","_FormInputLabel__WEBPACK_IMPORTED_MODULE_4__","semantic_ui_react__WEBPACK_IMPORTED_MODULE_1__","onBlur","propTypes","PropTypes","bool","lodash_1","paddingXMap","xs","sm","lg","xl","paddingYMap","paddingClassName","iconPos","iconClickable","overrides","flex","items-center","pl-0","pr-0","borderClassName","defaultColor","theme","enabled","active","hasBorder","transparent","themes","dark","border-lighten-200","hover:border-lighten-300","border-lighten-300","focus:border-lighten-300","light","colorVal","z-0","hover:z-5","z-1","border","border-2","border-red","border-transparent","radiusClassName","rounded","rounded-full","iconClassName","clickable","pl-2","pr-2","cursor-pointer","hover:bg-darken-100","border-l","border-r","bg-darken-least","ReactDOM","removeChild","createPortal","react_virtualized_1","ListScroller","scrollToPosition","scrollTop","list","scrollToRow","rowCount","rowHeight","rowRenderer","noRowsRenderer","onScroll","scrollToAlignment","scrollToIndex","AutoSizer","List","elem","computeTree","notUsed","buildPath","_props$basePath","_props$activePath","activePath","section","treeData","child","computeFolder","_props$openByDefaultT","openByDefaultToDepth","_props$depth","depth","page","_page$route","_page$data","hasChildren","hasContent","blocks","folder","noToggle","openByDefault","tokenName","tokenIcon","token","meta","isDivider","blockConfig","text","padded","solo","nested","code","standalone","outlined","canvas","tabs","jsonSchema","http","paddedInner","image","callout","container","hero","barList","cardList","accordion","findFirstSubpagePath","_ref$subpages","subpages","_ref$basePath","_ref$pathTree","pathTree","forOwn","subpage","replaceBlockVariables","block","env","childBlock","replaceVariables","buildViewPath","_ref4","_ref4$path","_ref4$version","version","_ref4$basePath","viewPath","containsBase","process","getConfigVar","isOnPrem","getExperimentalFeatures","Electron","self","ExperimentalFeatures","features","difference","addHighlighting","positions","previousWordEnd","wordStart","wordEnd","Fragment","stores","appStore","injectUi","ui","updateUi","autoFocus","noResultsMessage","_platform_components_FormSearch__WEBPACK_IMPORTED_MODULE_4__","placeholder","results","onResultSelect","LUNR_DATA","lunr","Index","load","LUNR_RESULTS","matchData","metadata","word","renderer","searchLunr","minCharacters","showNoResults","enums","events","AUTH_TYPES","authUrlOptions","accessUrlOptions","updateInputWithAuth","input","authNode","variables","processedAuthNode","newInput","setQuery","processedUrl","generateAuthPatch","signAws","aws4","sign","unset","generateOAuth1","signatureMethod","encode","oauth","OAuth","consumer","consumerKey","secret","consumerSecret","signature_method","hash_function","baseString","HmacSHA1","HmacSHA256","EncBASE64","hashFunction","nonce_length","nonceLength","parameter_seperator","parameterSeperator","tokenSecret","requestToAuthorize","toUpperCase","warn","authPatch","authorize","authorization","oauth1","nonce","oauth_nonce","useHeader","Authorization","toHeader","generateAws","service","region","secretAccessKey","secretKey","accessKeyId","accessKey","sessionToken","Buffer","generateBasicAuth","access_token","generateOAuth2","linkProps","other","globalQueryParams","stringifyQuery","_NavLink__WEBPACK_IMPORTED_MODULE_5__","SearchComponent","isCategory","filterResults","re","newResults","category","categoryResults","filter","render","showResultsOnClick","_this$props2$inputPro","inputProps","searchProps","fluid","isEqual","queryObj","urlParts","existingQueryObj","preserve","queryStr","_opts$arrayFormat","arrayFormat","_opts$arrayFormat2","faSpinner_1","classNames_1","Icon_1","ButtonGroup","shadow","shadow-sm","Button","customTheme","defaultSize","hovering","loading","iconColor","rightIcon","onClickIcon","onMouseDown","attributes","sizeVal","paddingClasses","borderClasses","radiusClasses","iconElem","rightIconElem","faSpinner","pulse","clickHandler","mouseDownHandler","bgClasses","bg-lighten-300","bg-lighten-700","hover:bg-lighten-100","hover:bg-lighten-700","bg-lighten-100","opacity-75","textClasses","text-muted-light","hover:text-white","text-white","text-black","hover:text-black","text-muted","cursor-not-allowed","cursor-wait","w-full","solid","Header","subtitle","bgClassName","bg-grey-lighter border-b border-grey-light","text-lighten-600","mt-2","Sidebar","_renderSection","childIndex","Function","_renderChild","opacity-100","bg-darken-50","text-primary","fontSize","marginTop","sections","Popup_1","PanelListItem","_rowHeight","isContextOpen","badge","details","popup","isActive","bg-dark-active","hover:bg-darken-50","hover:bg-lighten-50","bg-lighten-50","text-darken-600","maxHeight","maxWidth","setHasBabelPlugin","universalOptions","react__WEBPACK_IMPORTED_MODULE_2___default","t_0","universal","babel_plugin_universal_import_universalImport__WEBPACK_IMPORTED_MODULE_1___default","then","proms","path__WEBPACK_IMPORTED_MODULE_0___default","__dirname","chunkName","t_1","t_2","t_3","t_4","global","componentsByTemplateID","defaultTemplateIDs","404","templateIDsByPath","getComponentForPath","cleanPath","reactStaticGetComponentForPath","reactStaticRegisterTemplateIDForPath","clearTemplateIDs","Routes","Comp","getFullComponentForPath","is404","newProps","renderProps","react_router_dom__WEBPACK_IMPORTED_MODULE_3__","emptySchema","buildExampleFromSchema","schemas","dereferenceSchema","finalProp","schemaType","propType","default","indexOf","enum","first","items","allOf","oneOf","anyOf","without","_dereferenceSchema","isCombiner","isAllOf","_options$target","_options$schemas","_options$previousRefs","previousRefs","_options$refCache","refCache","allOfParent","combinerParent","hideInheritedFrom","isRoot","_dereferenceSchemaRef","additionalProperties","patternProperties","dependencies","_options$previousRefs2","_options$refCache2","resolved","__inheritedFrom","newRefs","refPath","propsInherited","iterFunc","jsonSchemas","mergeWith","_toConsumableArray","mergedValue","newValue","isNil","uniq","isPlainObject","isSchemaViewerEmpty","thirty_two__WEBPACK_IMPORTED_MODULE_1__","thirty_two__WEBPACK_IMPORTED_MODULE_1___default","_ref$value","_ref$stripPadding","_ref$lower","base32","buildParams","currentParams","computed","pathToHash","targetPath","toPath","hashToPath","extractVariables","_json__WEBPACK_IMPORTED_MODULE_1__","toProcess","reg","cleanVariableValue","parsedVariables","processed","trimmedVariable","variable","replaceRegExp","shortid__WEBPACK_IMPORTED_MODULE_0__","shortid__WEBPACK_IMPORTED_MODULE_0___default","lowercase","generate","substring","json_1","replacer","defaultVal","setValue","toRemove","enumToOptions","grey","pos","path_1","isWindows","platform","navigator","userAgent","_encode","ch","charCodeAt","encodeURIComponent2","encodeURIComponent","encodeNoop","_scheme","_empty","_authority","_query","_fragment","_formatted","_fsPath","thing","decode","ret","_parseComponents","decodeURIComponent","_validate","_slash","idx","normalize","components","fsPath","external","_regexp","_schemePattern","_singleSlashStart","_doubleSlashStart","skipEncoding","encoder","substr","_upperCaseDrive","lastIdx","_driveLetterPath","isFile","_asFormatted","$mid","queryParams","extname","_replaceRegex","absolute","_removeDuplicateSeps","goodComponents","pop","paths","segment","TypeError","cwd","relative","fromSegs","toSegs","upCount","downSegs","rv","dirname","basename","ext","lastPart","lastIndexOf","_makeLong",".","./","./index","./index.js","webpackContext","req","webpackContextResolve","scenarioPathLocations","splitLogicPath","_ref$locations","locations","_ref$path","stepResultMeta","stepResult","gt","failCount","passCount","stepName","step","skipToken","mappedScenarioNames","targetStep","refName","refId","stepToken","_ref5$maxLength","maxLength","newStep","before","after","flattenRefStep","refStep","scenarioSteps","outputSteps","steps","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","flattenRefOutput","newSteps","stepId","has","cleanStep","_ref12$step","cleanScenario","_ref13","_ref13$scenario","scenario","cleanCollection","_ref14","_ref14$collection","collection","_i2","scenarios","defaultCollection","_ref15$title","scenarioVersion","utilities","createScenarioStepRequest","_ref18","withCredentials","sessionCookie","cancelToken","skipPrism","stepPath","runMap","specs","ctx","convertScenarioStepToHTTPRequest","Session-Cookie","_ref19","_ref19$step","_ref19$variables","resolvedInput","auth","_resolvedInput","transformResponse","output","convertHTTPResponseToScenarioResult","_ref20","registerLogger","initLogging","minilog__WEBPACK_IMPORTED_MODULE_1__","minilog__WEBPACK_IMPORTED_MODULE_1___default","hasLocalStorage","localStorage","levelMap","debug","registry","updateLoggerFactory","_ref2$path","_ref2$levelOverride","levelOverride","recurse","reset","updateLogger","_props$registryObj","registryObj","_props$path","_props$recurse","parents","logger","loggerName","minilog","suggest","_white","allow","filters","f","isRegExp","setItem","persistFilters","namespace","defaultLevel","enable","_ref4$defaultLevel","defaultResult","_ref$level","clear","persistedFilters","getItem","initializeFilters","logFilters","log","Card","titleMeta","subtitleLeft","subtitleRight","textSize","text-md","text-lg","text-xl","smallerTextSize","text-xs","text-sm","contentElem","w-100","Dropdown","computeSections","popupProps","ListScroller_1","DropdownInput","_maxVisibleRows","_onChange","currentTarget","_onFocus","isFocused","_onBlur","_setRef","_input","_renderItems","_renderEmptyMsg","_renderItem","emptyMsg","onItemSelect","originalQuery","renderInput","_isOpen","onFocus","alert","react_s_alert__WEBPACK_IMPORTED_MODULE_0__","react_s_alert__WEBPACK_IMPORTED_MODULE_0___default","_alert","functionName","SAlert","Button_1","Header_1","Sidebar_1","LayoutFooter","leftActions","actions","rightActions","Layout","sidebar","footer","headerElem","isValidElement","rounded-t-lg","rounded-b-lg","faTimes_1","Modal","_show","_escapeListener","addEventListener","_handleEscape","onDidShow","_hide","removeEventListener","onDidHide","evt","isEscape","keyCode","closeIcon","pinX","pinY","offsetX","offsetY","fullscreen","containerStyle","overflow-auto","bg-black opacity-85","bg-grey-lightest","m-a bg-white shadow-dark rounded-lg","absolute w-12 h-12 text-xl","fixed w-24 h-24 text-5xl","faTimes","compose","flatMap","compactDeep","zipObjectDeep","_ref4$spec","_ref4$rules","shouldSort","extendSchema","extend","extendIsSchema","JsonSchemaGenerator","headerBlacklist","extendParameters","targetLocation","targetValue","_ref2$extraProps","extraProps","findIndex","existing","buildEndpointFromOperation","swagger","_props$operation","specId","specName","specUrl","hashPath","summary","operationId","schemeReg","getResponseSchemaFromOperation","createStepFromOperation","_props$pathParamsToCt","pathParamsToCtx","_props$paramsToCtx","paramsToCtx","definitions","securityArray","securityDefinition","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","specVarPrefix","securityDefinitionName","assertions","op","expected","parsedPath","endpoint","requestPathParts","endpointExactScore","specPath","epExactScore","getEndpointFromSpecs","swagger_objectSpread","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","getEndpointsFromSpec","endpoints","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","computeNewPath","_ref6$path","_ref6$methods","methods","skipConfirm","updates","confirm","newPath","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","200","transformation","computeNewResource","_ref7$path","_ref7$paths","capitalName","upperFirst","capitalNameTrimmed","kebabName","kebabCase","resourcePath","existingPath","existingResourcePath","readSchema","writeSchema","readWriteSchema","ruleFactory","perm","_ref8","_ref9","_ref10","requiredFilterRules","_ref11","commonSchema","commonSchemaKey","commonNamespace","inputSchema","inputSchemaKey","inputNamespace","outputSchema","pluralize","outputSchemaKey","outputNamespace","outputDetailedSchema","outputDetailedSchemaKey","outputDetailedNamespace","201","newResourcePath","resourceParameters","204","computeUpdatesFromCollectionResult","_ref14$result","har","_ref$result","harObj","entries","_result$scenarios","_scenario$steps","_step$input","_step$output","entry","postData","contentType","collectionResultToHar","newSpec","_ref4$existingSpec","existingSpec","_ref4$har","_har$entries","_entry$request","_request$headers","_request$queryString","_request$postData","targetOperation","bodyParam","example","newSchema","_entry$response","contentHeader","targetResponse","newHeader","harToSwagger2","PanelListItem_1","PanelList","TextField","onIconClick","focus","onLabelClick","setInputRef","node","onKeyPress","onEnter","onKeyDown","onEscape","onInputClick","select","inputClassName","bg-transparent","bg-darken-200","focus:bg-lighten-50","focus:bg-darken-100","focus:bg-darken-50","focus:text-white","theme-light","theme-dark","font-bold","mb-1/2","mb-1","mb-2","ml-1/2","spellCheck","Toggle","focused","checked","margin","clip","backgroundImage","transition","borderRadius","boxSizing","boxShadow","SchemaTransformer","combiner","stoplightSchema","clone","_reduceJsonSchema","_toStoplightSchema","_jsonSchemaIsRequired","_reduceStoplightSchema","types","_isType","newChild","_toJsonSchema","_active","transformer","schemas_transformer","helpers","Flasher","componentDidMount","flash","flashType","invoke","setQueryParams","flash_type","isRequired","defaultAlertProps","effect","onRouteClose","stack","spacing","alertProps","components_Flasher","react_s_alert_default","versionSortDesc","sum","pow","HubHeaderItem","_props$item","_props$style","isEditor","isDark","componentProps","with-image","without-image","is-active","is-dark text-white","is-light hover:text-primary","alt","router","HeaderSection","activeItemPath","components_HubHeaderItem","VersionSelector","versions","currentVersion","sortBy","axios","checkPath","catch","selectOnBlur","selection","DesktopHubHeader","includeSearch","nav","viewer_HeaderSection","viewer_VersionSelector","HubSearch","MobileHubIcon","isLarge","src_ui","MobileHubHeader","hasSidebar","_props$nav","mobileDropdown","viewer_MobileHubIcon","showSidebar","faBars","floating","faSearch","showSearch","activePagePath","hasHeader","_props$theme","_props$nav2","background","navItem","border-b border-grey-light","is-dark","viewer_MobileHubHeader","viewer_DesktopHubHeader","utmKeys","_key","Intercom","utils_intercom","_ref$hideLauncher","hideLauncher","utmParams","intercom_objectSpread","referrer","app_id","hide_default_launcher","ga","utils_googleAnalytics","_ref$name","eventCategory","eventAction","eventLabel","eventValue","GoogleAnalytics","hitType","localforage","Hub","googleAnalytics","intercom","_this$props2$page","metaTitle","_this$props2$sidebarT","sidebarTree","_this$props2$includeS","rootStore","titleTag","lib","viewer","rootPagePath","react_static_routes","role","InjectedHub","withRouteData","Base","uid","persist","persistLoadCount","persistCount","_loop","deserialize","persistLoaded","setupReactions","_this2","reaction","vals","watch","_loop2","serialize","toJS","delay","observable","AppStore","bound","appStore_classCallCheck","appStore_possibleConstructorReturn","appStore_getPrototypeOf","deep","appStore_initializerDefineProperty","appStore_descriptor","appStore_assertThisInitialized","_descriptor2","_descriptor3","_descriptor4","_descriptor5","_descriptor6","_descriptor7","_get","appStore_objectWithoutProperties","errors","appStore_objectSpread","remove","pullAt","current","clearUi","splitPanes","splitPanesLastUpdated","Date","getTime","_this3","pane","updateSplitPane","srn","newHistory","removeSrn","srnHistory","desktopDownloadClosed","modal","headerHidden","discussions","discussion","JsonSchemaContainer","jsonSchemaStore_dec","jsonSchemaStore_dec2","jsonSchemaStore_dec3","_dec4","_dec5","_dec6","jsonSchemaStore_descriptor","jsonSchemaStore_applyDecoratedDescriptor","jsonSchemaStore_class","jsonSchemaStore_classCallCheck","transformed","_onSchemaChange","editorStore","editorId","externalUpdate","jsonSchemaStore_initializerDefineProperty","jsonSchemaStore_descriptor2","jsonSchemaStore_descriptor3","jsonSchemaStore_descriptor4","updateSchema","onSchemaChange","jsonSchemaStore_createClass","lastUpdated","handleUpdate","Transformer","toJsonSchema","immediate","toStoplightSchema","invalidSchema","updateTransformed","sortedLocalDefinitions","flow","toPairs","fromPairs","connectedSpecs","sortedDefinitions","entityType","configurable","writable","initializer","getOwnPropertyDescriptor","JsonSchemaStore","jsonSchemaStore_possibleConstructorReturn","jsonSchemaStore_getPrototypeOf","jsonSchemaStore_descriptor5","jsonSchemaStore_assertThisInitialized","containers","force","getContainer","emptyObj","freeze","emptyCacheObj","updated","newCacheObj","_ref$data","__cache","triggerUpdate","_props$path2","updatedData","applyUpdate","_props$options","updatedArray","up","produce","newData","lastHead","_options$splice","newObj","isNumber","howMany","JsonPathCache","register","cacheKey","_props$path3","exists","draft","registerChildren","_props$path4","times","getChildrenCacheIds","_ref3$basePath","targetArr","getCache","_ref5$options","updateCacheFactory","_ref6$basePath","silent","targetData","newCacheData","pathArray","BaseStore","optional","identifier","frozen","views","persistScope","clearError","setupPersist","regenerator_default","mark","_callee","wrap","_context","prev","rehydrateFromLocalStorage","startWatchingPersist","stop","computePersistKey","computedKey","handleRehydrateValue","completeRehydrate","autorun","doPersist","bugsnagKey","afterCreate","getEnv","isClient","releaseStage","beforeNotify","payload","metaData","context","named","openAuthPopup","floor","outerWidth","outerHeight","screenX","screenY","open","BaseInstance","number","BaseManager","instances","array","instanceModel","getInstance","newInstance","GUEST","REPORTER","MEMBER","ADMIN","matrix","OWNER","accessLevels","accessRoles","50","40","30","20","accessRolesHuman","getHighestLevel","org","team","project","isPublic","explicit","publicAccess","checkIsPublic","access_level","getHighestRole","human","getAccessRole","ServiceRecord","identifierNumber","isGetting","isUpdating","isRemoving","BaseService","singleBasePath","maybe","records","isSaving","isCreating","isLoading","isFinding","isSearching","loadMore","boolean","perPage","getLocal","cleanid","found","record","findLocal","_ref3$query","skip","sort","cursor","mingo","getCurrentPage","ceil","skipStore","skipDehydrate","send","_request$data","_request$query","extra","skipError","userToken","session","_args","_base_objectWithoutProperties","userService","wsconnid","Websocket","_base_objectSpread","proxy","sent","updateSessionCookie","abrupt","t0","_callee2","_opts$query","_opts$skipStore","eager","onlyNew","_args2","_context2","updateRecord","_callee3","_opts$query2","_opts$skipStore2","skipPagination","_$get","_$get$data","next_page","_args3","_context3","per_page","replaceRecords","updateRecords","_callee4","_opts$query3","_opts$skipStore3","_args4","_context4","update","_callee5","_opts$query4","_opts$skipStore4","_args5","_context5","_callee6","_opts$query5","_opts$skipStore5","_args6","_context6","removeRecord","getRecordId","callOpts","updatedRecord","_updatedRecord","_ref$identifier","existingIndex","_base_defineProperty","_ref2$identifier","oldRecord","isStateTreeNode","detach","newRecords","setError","canUser","_ref4$user","is_admin","AuthorizationMethods","accessCode","application","implicit","authorizationCode","clientCredentials","Oauth","tokens","credentials","isCreatingToken","tokenList","isValid","access_token_url","authorize_url","client_secret","client_id","valid","authConfig","customBasePath","isString","scope","clientId","clientSecret","authorizationUri","accessTokenUri","redirectUri","authorizationMethod","_ref2$flow","authorization_method","updateCredentials","getToken","onSuccess","_self$credentials$flo","authOpts","accessToken","onError","ClientOAuth2","oauth_objectSpread","openOAuthPopup","getUri","redirect_uri","owner","t1","oauth_typeof","addToken","created_at","projectStore","updateActiveEnv","oauth_access_token","preserveShared","updateVariables","envVars","tokenId","authUrl","setListener","orgin","_self$credentials$flo2","close","reason","updateIsCreatingToken","OauthInstance","getOrRegisterInstance","userId","projectId","CollectionResult","createdAt","ScenarioResult","StepResult","CollectionEditor","collectionEditorStore_dec4","collectionEditorStore_dec5","collectionEditorStore_dec6","_dec7","collectionEditorStore_descriptor4","collectionEditorStore_applyDecoratedDescriptor","_class7","stepPathParams","editPath","collectionEditorStore_classCallCheck","collectionEditorStore_initializerDefineProperty","collectionEditorStore_descriptor5","collectionEditorStore_descriptor6","collectionEditorStore_descriptor7","_descriptor8","_descriptor9","_descriptor10","_descriptor11","_descriptor12","_descriptor13","_descriptor14","_descriptor15","_descriptor16","_descriptor17","_descriptor18","_descriptor19","_descriptor20","original","collectionEditorStore_createClass","updateParsed","strTarget","cb","newResult","collectionResult","scenarioResult","collectionEditorStore_toConsumableArray","addScenarioResult","stage","collectionEditorStore_objectSpread","scenarioResults","stepIndex","addStepResult","resultId","stepResults","isCancel","warning","replaceCollectionPathParams","addCollectionResult","scenarioId","currentScenario","currentStep","stepsRunning","cancel","overwrite","scenarioCtx","currentVariables","populatedVariables","newVars","updateScenarioCtx","currentPathParams","_arr","sType","_i","scenarioKey","replaceScenarioPathParams","_this4","replaceStepPathParams","getStepPathParams","stepData","newUrl","tab","scenarioTabs","collectionEditorStore_defineProperty","toggleScenarioTab","currentScenarioId","_currentParsed","vars","currentPopulatedEnvVariables","currentPopulatedCtxVariables","currentStepPathParams","connectedEndpoints","currentScenarioPath","currentStepPath","_this5","currentEnvVariables","currentEnv","currentStepId","scenariosObj","collectionRunning","scenariosRunning","ctxVariables","populatedCtxVariables","currentCtxVariables","_this6","updatingFrom","updatingHistory","newParsed","_targetVal","parentVal","targetVal","tail","initial","move","srcPath","dstPath","jsonPathCache","handleSpecUpdate","_this7","updatingParsed","onSpecChanged","runStep","scenarioPath","stepResultPath","canceler","_this8","setQueryString","CancelToken","handleRunError","_this9","CollectionEditorStore","_this10","editors","initEditor","getEditor","Page","pageStore_classCallCheck","crumbs","pageStore_initializerDefineProperty","pageStore_descriptor","isDefaultVersion","isDefault","checkSidebarItemIsActive","checkSidebarChildIsActive","pageStore_descriptor2","pageStore_descriptor3","_props$whitelabel","whitelabel","debouncedVariables","currentParsedPath","treePath","activePage","activeSubpage","PageStore","pageStore_descriptor4","pageStore_descriptor5","deactivateAll","_instances","deactivate","lookup","add","pageStore_objectSpread","RouterStore","routes","redirects","routerStore_objectWithoutProperties","routerStore_classCallCheck","routerStore_initializerDefineProperty","routerStore_descriptor","routerStore_descriptor2","parsedLocation","parseLocation","go","goBack","goForward","shouldPreventRedirect","buildQueryParams","routerStore_objectSpread","buildHash","setHash","elementId","element","getElementById","scrollIntoView","behavior","RootStore","stores_classCallCheck","stores_initializerDefineProperty","stores_descriptor","stores_descriptor2","stores_descriptor3","_opts$location","defaultVariables","defaultAxios","baseURL","paramsSerializer","localVariables","_stores","_variables","collectionEditorStore","pageStore","jsonSchemaStore","errorStore","createErrorStore","oauthTokenStore","createOauthTokenStore","pickBy","fireImmediately","stores_objectSpread","canUseDOM","useStaticRendering","App","targetHistory","rootStoreOptions","createBrowserHistory","createMemoryHistory","createRootStore","index_module","autoScrollToTop","autoScrollToHash","containers_Hub","components_Alert","renderMethod","hydrate"],"mappings":"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","file":"main.7ee2b5fc.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"templates/\" + ({\"0\":\"vendors~client-containers-Login~client-containers-Page\",\"1\":\"client-containers-Login~client-containers-Page\",\"3\":\"client-containers-Page\",\"4\":\"client-containers-NotFound\",\"5\":\"client-containers-Oauth\",\"6\":\"client-containers-Login\",\"7\":\"client-containers-Logout\",\"10\":\"vendors~client-containers-Page\"}[chunkId]||chunkId) + \".\" + {\"0\":\"58d3df14\",\"1\":\"70fcdb42\",\"3\":\"73b64b67\",\"4\":\"30b7292b\",\"5\":\"c734c355\",\"6\":\"ace356ea\",\"7\":\"51797b02\",\"10\":\"ef375bcd\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\thead.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"assets/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([940,8,9]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport {\n  FaSymbol,\n  FlipProp,\n  IconDefinition,\n  IconLookup,\n  PullProp,\n  RotateProp,\n  Transform,\n} from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\n\nimport { colors, sizes } from '@core/ui/enums';\n\nexport type IIcon = IconDefinition;\n\nexport interface IconProps {\n  icon: IIcon;\n  className?: string;\n  color?: colors;\n  size?: sizes;\n  mask?: IconLookup;\n  spin?: boolean;\n  pulse?: boolean;\n  border?: boolean;\n  fixedWidth?: boolean;\n  inverse?: boolean;\n  listItem?: boolean;\n  flip?: FlipProp;\n  pull?: PullProp;\n  rotation?: RotateProp;\n  transform?: string | Transform;\n  symbol?: FaSymbol;\n  style?: React.CSSProperties;\n}\n\nexport const Icon = ({ className, color, size, ...iconProps }: IconProps) => {\n  return (\n    <FontAwesomeIcon\n      className={cn(className, {\n        [`text-${colors[color || colors.black]}`]: color,\n        [`text-${sizes[size || sizes.md]}`]: size,\n      })}\n      {...iconProps}\n    />\n  );\n};\n","/**\n * Copyright (c) 2013-present, Facebook, Inc.\n * All rights reserved.\n *\n * This source code is licensed under the BSD-style license found in the\n * LICENSE file in the root directory of this source tree. An additional grant\n * of patent rights can be found in the PATENTS file in the same directory.\n *\n * @providesModule shallowEqual\n * @typechecks\n * @flow\n */\n\n/* eslint-disable */\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * inlined Object.is polyfill to avoid requiring consumers ship their own\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\n */\nfunction is(x, y) {\n  // SameValue algorithm\n  if (x === y) {\n    // Steps 1-5, 7-10\n    // Steps 6.b-6.e: +0 != -0\n    // Added the nonzero y check to make Flow happy, but it is redundant\n    return x !== 0 || y !== 0 || 1 / x === 1 / y;\n  } else {\n    // Step 6.a: NaN == NaN\n    return x !== x && y !== y;\n  }\n}\n\n/**\n * Performs equality by iterating through keys on an object and returning false\n * when any key has values which are not strictly equal between the arguments.\n * Returns true when the values of all keys are strictly equal.\n */\nfunction shallowEqual(objA, objB) {\n  if (is(objA, objB)) {\n    return true;\n  }\n\n  if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null) {\n    return false;\n  }\n\n  const keysA = Object.keys(objA);\n  const keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (let i = 0; i < keysA.length; i++) {\n    if (!hasOwnProperty.call(objB, keysA[i]) || !is(objA[keysA[i]], objB[keysA[i]])) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport default shallowEqual;\n","import _ from 'lodash';\n\nimport {\n  safeStringify as JsonStringify,\n  parseWithPointers,\n  getLocationForJsonPath,\n} from '@stoplight/json';\nimport { stringify } from '@core/json';\n\nimport { startsWith } from '../objects';\nimport { pathToHash } from '../history';\nimport { cleanSlashes } from '../url';\n\nimport { move as _move } from './move';\n\nexport { default as shallowEqual } from './shallowEqual';\n\nexport const move = _move;\n\nexport const safeParse = (target, defaultValue) => {\n  if (typeof target === 'string') {\n    try {\n      // if the number is parsed incorrectly return the original stringified num\n      const num = parseNumber(target);\n      if (typeof num === 'string') return num;\n\n      return JSON.parse(target);\n    } catch (e) {\n      return !_.isUndefined(defaultValue) ? defaultValue : {};\n    }\n  }\n\n  return target;\n};\n\nconst parseNumber = string => {\n  const numVal = _.toNumber(string);\n\n  // For large number javascript maniuplates data, check if converted num is same as original\n  if (_.isFinite(numVal)) {\n    if (_.toString(numVal) === string) {\n      return numVal;\n    }\n\n    return string;\n  }\n\n  return NaN;\n};\n\nexport const safeStringify = (target, offset, iterator) => {\n  return JsonStringify(target, iterator, typeof offset !== 'undefined' ? offset : 2);\n};\n\nexport const mapToNameValue = obj => {\n  if (obj instanceof Array) {\n    return obj;\n  }\n\n  return _.map(obj || {}, (value, name) => ({ name, value }));\n};\n\nexport const nameValueToMap = nameValueArray => {\n  if (!_.isArray(nameValueArray)) {\n    return nameValueArray;\n  }\n\n  const result = {};\n  for (const { name, value } of nameValueArray) {\n    result[name] = value;\n  }\n\n  return result;\n};\n\nexport const arrayIncludes = (parent, child) => {\n  return startsWith(parent, child);\n};\n\n// given a JSON data object, and a propPath (array), return\n// the line number range for the prop in the prettified JSON string.\nexport const computeLineNumbers = ({ data, propPath } = {}) => {\n  let stringified = data;\n  if (stringified && typeof stringified !== 'string') {\n    stringified = JsonStringify(data, null, 2);\n  }\n\n  const numbers = {\n    from: 0,\n    to: 0,\n  };\n\n  if (_.isEmpty(stringified)) return numbers;\n\n  const result = parseWithPointers(stringified);\n  const pointer = getLocationForJsonPath(result, propPath, true);\n  if (pointer) {\n    numbers.from = _.get(pointer, 'range.start.line', 1) + 1;\n    numbers.to = _.get(pointer, 'range.end.line', 1) + 1;\n  }\n\n  return numbers;\n};\n\nconst calculatePathsForChildren = ({ parent = {}, parentPath = [] }) => {\n  let paths = {};\n\n  _.forEach(parent.children, (child, index) => {\n    const childPath = parentPath.concat(['data', 'children', index]);\n\n    paths[_.join(child.parsedPath, '.')] = childPath;\n\n    const newPaths = calculatePathsForChildren({\n      parent: child,\n      parentPath: childPath,\n    });\n\n    paths = {\n      ...paths,\n      ...newPaths,\n    };\n  });\n\n  return paths;\n};\n\nexport const calculateFromToJsonPath = ({ fromPath = [], tree }) => {\n  const toPaths = calculatePathsForChildren({ parent: tree });\n\n  if (_.isArray(fromPath)) {\n    return toPaths[_.join(fromPath, '.')];\n  }\n\n  return toPaths[fromPath];\n};\n\nexport const escapeScriptTags = (json = '') => {\n  const openScript = new RegExp('<script', 'g');\n  const closeScript = new RegExp('</script', 'g');\n\n  return json.replace(openScript, '<__script').replace(closeScript, '</__script');\n};\n\nexport const unescapeScriptsTags = (json = '') => {\n  const openScript = new RegExp('<__script', 'g');\n  const closeScript = new RegExp('</__script', 'g');\n\n  return json.replace(openScript, '<script').replace(closeScript, '</script');\n};\n","import _ from 'lodash';\n\nimport shortid from '../shortid';\nimport { getConfigVar } from '../config';\n\nexport const createUniqueId = (ids = [], { length = 5 } = {}) => {\n  let id = '';\n\n  do {\n    id = shortid({ length, lowercase: true });\n  } while (_.includes(ids, id));\n\n  return id;\n};\n\nexport const simpleSlugify = input => {\n  let str = input;\n\n  if (!str || typeof str !== 'string') {\n    return '';\n  }\n\n  str = str.replace(/^\\s+|\\s+$/g, ''); // trim\n  str = str.toLowerCase();\n\n  // remove accents, swap  for n, etc\n  const fromAccents = '/_,:;';\n  const toAccents = 'aaaaeeeeiiiioooouuuunc------';\n\n  for (let i = 0, l = fromAccents.length; i < l; i++) {\n    str = str.replace(new RegExp(fromAccents.charAt(i), 'g'), toAccents.charAt(i));\n  }\n\n  str = str\n    .replace(/[^a-z0-9 -]/g, '')\n    .replace(/\\s+/g, '-')\n    .replace(/-+/g, '-'); // remove invalid chars // collapse whitespace and replace by - // collapse dashes\n\n  return _.trim(str, '-/');\n};\n\nexport const uniqueSlugify = ({ input = '', existing = [] }) => {\n  let sluggified = input;\n\n  if (_.isEmpty(sluggified)) {\n    sluggified = createUniqueId(sluggified);\n  } else {\n    sluggified = simpleSlugify(sluggified);\n  }\n\n  if (_.isEmpty(existing)) {\n    return sluggified;\n  }\n\n  let count = 1;\n  let output = sluggified;\n\n  while (_.includes(existing, output)) {\n    output = `${sluggified}-${count}`;\n    count++;\n  }\n\n  return output;\n};\n\nexport const combinePathSelectors = (parts = []) => {\n  let path = '';\n  for (const p of parts) {\n    const part = p.trim();\n    if (part) {\n      if (path === '') {\n        path = part;\n      } else if (part.charAt(0) === '[') {\n        path = `${path}${part}`;\n      } else {\n        path = `${path}.${part}`;\n      }\n    }\n  }\n  return path;\n};\n\nexport const isValidJSON = target => {\n  try {\n    let t;\n    if (typeof target === 'object') {\n      t = JSON.stringify(target);\n    }\n    JSON.parse(t);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\n// This reduces arrays in the body to one element (their first element).\n// Primarily useful for trimming down large responses, and generating\n// examples.\nexport const pruneObject = (body, level = 0) => {\n  if (body instanceof Array) {\n    if (body.length) {\n      return [pruneObject(body[0], level + 1)];\n    }\n\n    return [];\n  } else if (body instanceof Object) {\n    for (const p in body) {\n      if (!Object.prototype.hasOwnProperty.call(body, p)) {\n        continue;\n      }\n\n      body[p] = pruneObject(body[p], level + 1);\n    }\n  } else if (level === 0) {\n    try {\n      body = JSON.parse(body);\n      body = JSON.stringify(pruneObject(body, level + 1));\n    } catch (e) {}\n  }\n\n  return body;\n};\n\nexport const sortObjectKeys = (obj, keys) => {\n  const targetObj = obj || {};\n  const newObj = {};\n\n  let targetKeys = keys;\n  if (!targetKeys) {\n    targetKeys = Object.keys(obj).sort();\n  }\n\n  for (const k of targetKeys) {\n    newObj[k] = targetObj[k];\n  }\n\n  const remainingKeys = _.without(Object.keys(targetObj), ...targetKeys);\n  for (const k of remainingKeys) {\n    newObj[k] = targetObj[k];\n  }\n\n  return newObj;\n};\n\n// renames a key while trying to preserve key ordering\nexport const renameObjectKey = (obj, oldKey, newKey) => {\n  if (!obj || !obj[oldKey] || oldKey === newKey) {\n    return obj;\n  }\n\n  const vals = [];\n  for (const k in obj) {\n    if (k !== newKey) {\n      vals.push({\n        name: k === oldKey ? newKey : k,\n        value: obj[k],\n      });\n    }\n  }\n\n  const newObj = {};\n  for (const k of vals) {\n    newObj[k.name] = k.value;\n  }\n\n  return newObj;\n};\n\n// TODO: this should not mutate. either clone deep or do something else. When make this change, need to test all the places we call this.\n// omit should be a function that takes a value and key, and returns true if value should be omitted\n// omitByRecursively({}, (val, key) => {\n//   return _.isNil(val) || key === 'id';\n// })\nexport const omitByRecursively = (obj, omit) => {\n  const isArray = obj instanceof Array;\n\n  let cleanObj = isArray ? [] : {};\n\n  for (const k in obj) {\n    let val = obj[k];\n    if (!omit(val, k, { isArray })) {\n      if (typeof val === 'object') {\n        val = omitByRecursively(val, omit);\n      }\n\n      if (isArray) {\n        cleanObj.push(val);\n      } else {\n        cleanObj[k] = val;\n      }\n    }\n  }\n\n  return cleanObj;\n};\n\n// Given array like ['foo', 'bar'], will return a sorter function that will order object\n// keys with foo before bar\nexport const keyArrangeSortByArray = valueArray => {\n  return (a, b) => {\n    const aIndex = _.indexOf(valueArray, a);\n    const bIndex = _.indexOf(valueArray, b);\n    let s;\n\n    if (aIndex === bIndex) {\n      if (a > b) {\n        s = 1;\n      } else if (a < b) {\n        s = -1;\n      } else {\n        s = 0;\n      }\n    } else if (bIndex === -1 || (aIndex !== -1 && aIndex < bIndex)) {\n      s = -1;\n    } else {\n      s = 1;\n    }\n\n    return s;\n  };\n};\n\nexport const keyArrange = (obj, sorterFunc, currentPath) => {\n  const out = {};\n\n  Object.keys(obj)\n    .sort(\n      sorterFunc\n        ? (a, b) => {\n            return sorterFunc(a, b, currentPath);\n          }\n        : undefined\n    )\n    .forEach(k => {\n      out[k] = obj[k];\n    });\n\n  return out;\n};\nexport const keyArrangeDeep = (obj, sorterFunc, maxDepth, currentPath, currentDepth) => {\n  if (maxDepth && currentDepth && currentDepth >= maxDepth) {\n    return obj;\n  }\n\n  if (_.isArray(obj)) {\n    return _.map(obj, item => {\n      return keyArrangeDeep(item, sorterFunc, currentPath);\n    });\n  } else if (_.isObject(obj)) {\n    const newObj = keyArrange(obj, sorterFunc, currentPath);\n\n    _.forOwn(newObj, (val, key) => {\n      newObj[key] = keyArrangeDeep(val, sorterFunc, currentPath, currentDepth + 1);\n    });\n\n    return newObj;\n  }\n\n  return obj;\n};\n\n/**\n * Combines two paths using lodash's toPath function, concat, and compact\n * For example combinePaths([1], '2.3.') = [1, 2, 3]\n *\n * @param  {Array | String}  initial   The beginning of the path\n * @param  {Array | String}  extension The end of the path\n * @return {Array}\n */\nexport const combinePaths = (initial = [], extension = []) => {\n  return _.compact(_.concat(_.toPath(initial), _.toPath(extension)));\n};\n\nexport const emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n/**\n * Missing arguments error class.\n * @param {string} message - error message.\n * @constructor\n */\nfunction MissingArgumentError(message) {\n  this.name = 'MissingArgumentError';\n  this.message = message || 'Argument is missing.';\n  this.stack = new Error().stack;\n}\n\n/**\n * Checks if all arguments present in a method call.\n * @throws {MissingArgumentError} - will throw an error if some arguments are missing.\n * @param {string} methodName - name of method to check.\n * @param {object} args - method arguments.\n * @param {bool} throwError - if true, will throw the error instead of logging.\n */\nexport const checkArgs = (methodName, args = {}, throwError) => {\n  if (getConfigVar('ENV') === 'production') {\n    return;\n  }\n\n  for (const argName in args) {\n    if (args.hasOwnProperty(argName) && _.isUndefined(args[argName])) {\n      const error = new MissingArgumentError(\n        `You must specify <${argName}> when calling the ${methodName} method.`\n      );\n\n      if (throwError) {\n        throw error;\n      } else {\n        console.error(error);\n      }\n    }\n  }\n};\n\n/**\n * Method for escaping strings to pass them in regex constructor.\n * Source: https://github.com/benjamingr/RegExp.escape\n * @param {string} s - string to escape.\n * @return {string} - escaped string.\n */\nexport const escapeRegExp = s => String(s).replace(/[\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n","import _ from 'lodash';\nimport URL from 'url-parse';\n\nimport {\n  buildParameters as buildParametersSwagger,\n  buildHttpOperation as buildHttpOperationSwagger,\n} from './http';\n\nimport {\n  computePathParamsFromUri as computePathParamsFromUriSwagger,\n  computeNewPath as computeNewPathSwagger,\n  computeNewResource as computeNewResourceSwagger,\n  getEndpointsFromSpec as getEndpointsFromSpecSwagger,\n  computeUpdatesFromCollectionResult as computeUpdatesFromCollectionResultSwagger,\n  getEndpointFromSpec as getEndpointFromSpecSwagger,\n  createStepFromOperation as createStepFromOperationSwagger,\n} from './swagger';\n\nimport { exportUrlToSrn } from '../entities';\nimport { hashToPath } from '../history';\n\nexport const parseDynamicParams = ({ url }) => {\n  let parsed = url;\n  let pathname;\n  try {\n    parsed = new URL(url);\n    pathname = parsed.pathname;\n  } catch (e) {\n    pathname = url;\n    return url;\n  }\n\n  if (!pathname) {\n    return url;\n  }\n\n  let counter = 1;\n  const parts = pathname.split('/');\n  const newParts = [];\n  for (const i in parts) {\n    if (!Object.prototype.hasOwnProperty.call(parts, i)) {\n      continue;\n    }\n\n    const isLast = !parts[i + 1];\n    let part = parts[i];\n    let newPart = part;\n    let extension;\n\n    const id = counter > 1 ? `{id${counter}}` : '{id}';\n\n    if (!part.match(/@/) && isLast) {\n      part = part.split('.');\n\n      if (part.length > 1) {\n        extension = _.last(part);\n        part = part.slice(0, -1).join('.');\n      } else {\n        part = part[0];\n      }\n    }\n\n    // all numbers\n    if (part.match(/^[0-9]+$/)) {\n      newPart = id;\n    }\n\n    // emails\n    if (part.match(/@/)) {\n      newPart = '{email}';\n    }\n\n    if (extension) {\n      newPart = `${newPart}.{extension}`;\n    }\n\n    if (newPart !== part) {\n      counter += 1;\n    }\n\n    newParts.push(newPart);\n  }\n\n  // put it back together\n\n  if (!url) return null;\n\n  return url.replace(pathname, newParts.join('/'));\n};\n\n// given something like '/users/{userId}', extract path params and build\n// the parameters structure\nexport const computePathParamsFromUri = (uri, { type = 'swagger', existingParams } = {}) => {\n  switch (type) {\n    default:\n      return computePathParamsFromUriSwagger(uri, { existingParams });\n  }\n};\n\n// build the list of updates needed to\n// patch a spec with the given path and methods\nexport const computeNewPath = (props, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return computeNewPathSwagger(props);\n  }\n};\n\n// build the list of updates needed to\n// patch a spec with a new resource (crud builder)\nexport const computeNewResource = (props, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return computeNewResourceSwagger(props);\n  }\n};\n\n// given something like '/users/{userId}', extract path params and build\n// the parameters structure\nexport const getEndpointsFromSpec = (spec, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return getEndpointsFromSpecSwagger(spec);\n  }\n};\n\nexport const computeUpdatesFromCollectionResult = ({ spec, result }, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return computeUpdatesFromCollectionResultSwagger({ spec, result });\n  }\n};\n\nexport const getEndpointFromSpec = (props, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return getEndpointFromSpecSwagger(props);\n  }\n};\n\nexport const createStepFromOperation = (props, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return createStepFromOperationSwagger(props);\n  }\n};\n\nexport const buildParameters = (props, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return buildParametersSwagger(props);\n  }\n};\n\nexport const buildHttpOperation = (props, { type = 'swagger' } = {}) => {\n  switch (type) {\n    default:\n      return buildHttpOperationSwagger(props);\n  }\n};\n\nexport const cleanSpec = ({ spec = {} }) => {\n  return spec;\n};\n\nexport const defaultSpec = ({ title = 'My API' } = {}) =>\n  `---\nswagger: '2.0'\ninfo:\n  title: '${title}'\n  version: '1.0'\nhost: 'example.com'\npaths: {}\n`;\n\nexport const resolveRef = ({ ref, parsed, specs = [] }) => {\n  if (!ref) return null;\n\n  if (_.startsWith(ref, '#')) {\n    const path = hashToPath({ hash: ref });\n    return _.get(parsed, path);\n  }\n\n  const srnWithHash = exportUrlToSrn({ url: ref });\n  if (typeof srnWithHash !== 'string') return null;\n\n  const parts = srnWithHash.split('#');\n  const srn = _.replace(parts[0], /orgs\\/|\\/export.json|.json/g, '');\n  const path = hashToPath({ hash: parts[1] });\n\n  for (const spec of specs) {\n    if (spec.id === srn) {\n      return _.get(spec.data, path);\n    }\n  }\n\n  return null;\n};\n","export * from './uri';\nexport * from './types';\n","import _ from 'lodash';\n\nexport const commonMimeTypes = [\n  'application/json',\n  'application/xml',\n  'multipart/form-data',\n  'text/html',\n  'text/plain',\n  'application/EDI-X12',\n  'application/EDIFACT',\n  'application/atom+xml',\n  'application/font-woff',\n  'application/gzip',\n  'application/javascript',\n  'application/octet-stream',\n  'application/ogg',\n  'application/pdf',\n  'application/postscript',\n  'application/soap+xml',\n  'application/x-bittorrent',\n  'application/x-tex',\n  'application/xhtml+xml',\n  'application/xml-dtd',\n  'application/xop+xml',\n  'application/zip',\n  'application/x-www-form-urlencoded',\n];\n\nexport const httpMethods = {\n  get: { name: 'GET' },\n  post: { name: 'POST' },\n  put: { name: 'PUT' },\n  patch: { name: 'PATCH' },\n  delete: { name: 'DELETE' },\n  copy: { name: 'COPY' },\n  head: { name: 'HEAD' },\n  link: { name: 'LINK' },\n  unlink: { name: 'UNLINK' },\n  purge: { name: 'PURGE' },\n  lock: { name: 'LOCK' },\n  unlock: { name: 'UNLOCK' },\n  options: { name: 'OPTIONS' },\n  trace: { name: 'TRACE' },\n};\n\nexport const httpMethodRegex = new RegExp(Object.keys(httpMethods).join('|'), 'i');\n\nexport const httpCodes = {\n  100: 'Continue',\n  101: 'Switching Protocols',\n  200: 'OK',\n  201: 'Created',\n  202: 'Accepted',\n  203: 'Non-Authoritative Information',\n  204: 'No Content',\n  205: 'Reset Content',\n  206: 'Partial Content',\n  422: 'Unprocessable Entity',\n  226: 'IM Used',\n  300: 'Multiple Choices',\n  301: 'Moved Permanently',\n  302: 'Found',\n  303: 'See Other',\n  304: 'Not Modified',\n  305: 'Use Proxy',\n  306: '(Unused)',\n  307: 'Temporary Redirect',\n  308: 'Permanent Redirect (experiemental)',\n  400: 'Bad Request',\n  401: 'Unauthorized',\n  402: 'Payment Required',\n  403: 'Forbidden',\n  404: 'Not Found',\n  405: 'Method Not Allowed',\n  406: 'Not Acceptable',\n  407: 'Proxy Authentication Required',\n  408: 'Request Timeout',\n  409: 'Conflict',\n  410: 'Gone',\n  411: 'Length Required',\n  412: 'Precondition Failed',\n  413: 'Request Entity Too Large',\n  414: 'Request-URI Too Long',\n  415: 'Unsupported Media Type',\n  416: 'Requested Range Not Satisfiable',\n  417: 'Expectation Failed',\n  418: \"I'm a teapot (RFC 2324)\",\n  420: 'Enhance Your Calm (Twitter)',\n  426: 'Upgrade Required',\n  428: 'Precondition Required',\n  429: 'Too Many Requests',\n  431: 'Request Header Fields Too Large',\n  444: 'No Response (Nginx)',\n  449: 'Retry With (Microsoft)',\n  450: 'Blocked by Windows Parental Controls (Microsoft)',\n  451: 'Unavailable For Legal Reasons',\n  499: 'Client Closed Request (Nginx)',\n  500: 'Internal Server Error',\n  501: 'Not Implemented',\n  502: 'Bad Gateway',\n  503: 'Service Unavailable',\n  504: 'Gateway Timeout',\n  505: 'HTTP Version Not Supported',\n  506: 'Variant Also Negotiates (Experimental)',\n  507: 'Insufficient Storage (WebDAV)',\n  508: 'Loop Detected (WebDAV)',\n  509: 'Bandwidth Limit Exceeded (Apache)',\n  510: 'Not Extended',\n  511: 'Network Authentication Required',\n  598: 'Network read timeout error',\n  599: 'Network connect timeout error',\n};\n\nexport const httpCodeOptions = filter => {\n  let codes = {};\n\n  if (filter) {\n    for (const code of filter) {\n      const found = httpCodes[Number(code)];\n      if (found) {\n        codes[Number(code)] = found;\n      }\n    }\n  } else {\n    codes = httpCodes;\n  }\n\n  return _.map(codes, (v, k) => ({\n    text: `${k} ${v}`,\n    value: Number(k),\n  }));\n};\n","import _ from 'lodash';\nimport { mergeSchemas } from '../schemas/helpers';\nimport { httpMethods } from '../http';\nimport { safeParse } from '../json';\n\n// used to turn swagger response.headers into json schema\nconst convertObjectToSchema = source => {\n  const target = {\n    type: 'object',\n    properties: {},\n  };\n\n  for (const prop in source) {\n    target.properties[prop] = source[prop];\n  }\n\n  return target;\n};\n\nexport const generateOperationId = ({ method, path }) => {\n  return _.camelCase(`${method}${path}`);\n};\n\nexport const buildParameters = ({\n  rootParameters = [],\n  parameters = [],\n  dereferencedParameters = [],\n}) => {\n  const data = {\n    path: [],\n    query: [],\n    header: [],\n    formData: [],\n    body: {},\n  };\n\n  for (const i in parameters) {\n    if (!parameters[i]) continue;\n    let param = parameters[i];\n    let dereferencedParam = dereferencedParameters[i];\n\n    let $ref;\n    if (param.$ref) {\n      $ref = param.$ref;\n      param = rootParameters[_.last($ref.split('/'))] || dereferencedParam || param;\n    }\n\n    if (data[param.in]) {\n      if (data[param.in] instanceof Array) {\n        data[param.in].push({\n          index: i,\n          $ref,\n          param,\n          dereferencedParam,\n        });\n      } else {\n        data[param.in] = {\n          index: i,\n          $ref,\n          param,\n          dereferencedParam,\n        };\n      }\n    }\n  }\n\n  return data;\n};\n\nconst paramFields = [\n  'type',\n  'description',\n  'default',\n  'maximum',\n  'exclusiveMaximum',\n  'minimum',\n  'exclusiveMinimum',\n  'maxLength',\n  'minLength',\n  'pattern',\n  'maxItems',\n  'minItems',\n  'uniqueItems',\n  'enum',\n  'multipleOf',\n  'items',\n  'format',\n  'allowEmptyValue',\n];\n\nexport const convertParameterToSchema = source => {\n  const target = {};\n\n  for (const prop in source) {\n    if (!_.includes(paramFields, prop)) continue;\n\n    target[prop] = source[prop];\n\n    if (typeof target[prop] === 'string') {\n      if (prop === 'enum') {\n        target[prop] = safeParse(_.replace(target[prop], /\\'/g, '\"'));\n      }\n    } else if (prop === 'description') {\n      target[prop] = String(target[prop]);\n    }\n  }\n\n  return target;\n};\n\n// turns an item from buildParameters into json schema\n// used to turn swagger query, headers, etc into json schema\nconst convertParametersToSchema = parameters => {\n  const target = {\n    type: 'object',\n    properties: {},\n    required: [],\n  };\n\n  for (const item of parameters) {\n    target.properties[item.param.name] = convertParameterToSchema(item.param);\n    if (item.param.required) {\n      target.required.push(item.param.name);\n    }\n  }\n\n  return target;\n};\n\n/**\n * Generate schema from params and set it to a specific operation path.\n * @param operation\n * @param params\n * @param path\n * @return {*}\n */\n\nconst setOperationFieldSchema = (operation, params, path) => {\n  const schema = convertParametersToSchema(params);\n  const existingSchema = _.get(operation, path);\n  let mergedSchema;\n\n  // If operation has this schema already merge it with new\n  if (_.isObject(existingSchema)) {\n    mergedSchema = mergeSchemas([existingSchema, schema]);\n  }\n\n  _.set(operation, path, mergedSchema || schema);\n\n  return operation;\n};\n\nconst setOperationBodySchema = (operation, params, consumes) => {\n  const bodyMimeTypes = [\n    'application/json',\n    'application/x-www-form-urlencoded',\n    'multipart/form-data',\n  ];\n\n  let description;\n  let schema;\n  let paramExamples;\n\n  if (params.param) {\n    description = params.param.description;\n    schema = params.param.schema;\n    paramExamples = params.param['x-examples'];\n  } else {\n    schema = convertParametersToSchema(params);\n  }\n\n  let availableMimeTypes = _.intersection(bodyMimeTypes, consumes);\n\n  // Set default body mime type to application/json if no consumes mime types available\n  if (_.isEmpty(availableMimeTypes)) {\n    availableMimeTypes = ['application/json'];\n  }\n\n  _.map(availableMimeTypes, mimeType => {\n    _.set(operation, ['body', 'content', mimeType, 'schema'], schema);\n\n    if (paramExamples) {\n      const examples = _.mapValues(paramExamples, (value, key) => ({ value }));\n      _.set(operation, ['body', 'content', mimeType, 'examples'], examples);\n    }\n  });\n\n  if (!_.isUndefined(description)) {\n    _.set(operation, ['body', 'description'], description);\n  }\n\n  return operation;\n};\n\nconst mapOperationParameters = (operation, consumes, parameters, rootParameters) => {\n  const builtParameters = buildParameters({ rootParameters, parameters });\n\n  _.map(builtParameters, (params, name) => {\n    if (!_.isEmpty(params)) {\n      switch (name) {\n        case 'formData':\n          setOperationBodySchema(operation, params, consumes);\n          break;\n        case 'body':\n          setOperationBodySchema(operation, params, consumes);\n          break;\n        case 'path':\n          setOperationFieldSchema(operation, params, ['params', 'schema']);\n          break;\n        case 'header':\n          setOperationFieldSchema(operation, params, ['headers', 'schema']);\n          break;\n        case 'query':\n          setOperationFieldSchema(operation, params, ['query', 'schema']);\n          break;\n      }\n    }\n  });\n};\n\nconst mapOperationResponses = (operation, responses, produces) => {\n  if (_.isEmpty(responses)) {\n    return;\n  }\n\n  _.set(operation, 'responses', {});\n\n  _.map(responses, (response, status) => {\n    if (!response) {\n      return;\n    }\n\n    const { schema, examples, headers, description } = response;\n    let availableMimeTypes = produces;\n\n    // Set default body mime type to application/json if no produces mime types available\n    if (_.isEmpty(availableMimeTypes)) {\n      availableMimeTypes = ['application/json'];\n    }\n\n    _.map(availableMimeTypes, mimeType => {\n      if (!_.isEmpty(schema)) {\n        _.set(operation, ['responses', status, 'content', mimeType, 'schema'], schema);\n      }\n\n      if (!_.isEmpty(examples)) {\n        _.set(\n          operation,\n          ['responses', status, 'content', mimeType, 'examples'],\n          _.mapValues(examples, (value, key) => ({ value }))\n        );\n      }\n    });\n\n    if (!_.isEmpty(headers)) {\n      _.set(operation, ['responses', status, 'headers', 'schema'], convertObjectToSchema(headers));\n    }\n\n    if (!_.isUndefined(description)) {\n      _.set(operation, ['responses', status, 'description'], description);\n    }\n  });\n\n  return operation;\n};\n\nexport const buildHttpOperation = ({ spec = {}, path = [] }) => {\n  if (_.isEmpty(path) || _.isEmpty(spec)) {\n    return;\n  }\n\n  const [root, operationPath, method] = path;\n  const pathObj = _.get(spec, path);\n\n  // if we can't even find the path object, we definitely can't build the operation\n  if (!pathObj) {\n    return {};\n  }\n\n  const rootParameters = spec.parameters;\n  const pathParams = _.get(spec, [root, operationPath, 'parameters']);\n\n  const { responses = {}, parameters = [], security: operationSecurity, tags = [] } = pathObj;\n\n  const { security: specSecurity = [], securityDefinitions } = spec;\n\n  const operation = _.pick(pathObj, 'summary', 'description', 'deprecated');\n  const consumes = _.union(spec.consumes, pathObj.consumes);\n  const produces = _.union(spec.produces, pathObj.produces);\n\n  // Check if method exists\n  if (httpMethods.hasOwnProperty(method)) {\n    operation.method = method;\n  }\n\n  if (operationPath) {\n    operation.path = operationPath;\n  }\n\n  if (tags.length) {\n    // Lookup the tags on the operation from the root, and replace with actual info\n    operation.tags = _.map(tags, name => _.find(spec.tags, { name }) || { name });\n  }\n\n  // At first, map through path parameters\n  mapOperationParameters(operation, consumes, pathParams, rootParameters);\n\n  // Then map through local parameters and override path parameters\n  mapOperationParameters(operation, consumes, parameters, rootParameters);\n\n  // Create operation responses\n  mapOperationResponses(operation, responses, produces);\n\n  if (spec.host) {\n    const schemes = !_.isEmpty(_.compact(spec.schemes)) ? spec.schemes : ['http'];\n    operation.servers = _.map(schemes, scheme => {\n      // Create a proper URL with scheme\n      let url = _.trimEnd(`${scheme}://${spec.host}${spec.basePath || ''}`, '/');\n\n      const matches = url.match(/\\{([^}]+)\\}/g) || [];\n      matches.forEach(match => {\n        const varName = match.replace(/\\{|\\}/g, '');\n        if (!/^\\$/.test(varName)) {\n          url = url.replace(varName, `$$$.env.${varName}`);\n        }\n      });\n\n      return { url };\n    });\n  } else {\n    operation.servers = [\n      {\n        url: '{$$.env.host}',\n      },\n    ];\n  }\n\n  let secReqObj;\n\n  // only use root security if the user has not specified any\n  // they override root security with empty array if want to clear for a particular operation\n  if (!operationSecurity) {\n    // Use global security\n    secReqObj = specSecurity;\n  } else if (!_.isEmpty(operationSecurity)) {\n    // Operation security replaces global security\n    secReqObj = operationSecurity;\n  }\n\n  // Set operation security if a Security Requirement Object is present\n  if (secReqObj) {\n    _.map(secReqObj, secItem => {\n      _.map(secItem, (scopes, name) => {\n        const def = _.cloneDeep(securityDefinitions[name]);\n\n        if (def) {\n          if (!_.isEmpty(scopes) && !_.isEmpty(def.scopes)) {\n            // filter out scopes not used by this operation\n            def.scopes = _.omitBy(def.scopes, (desc, name) => !_.includes(scopes, name));\n          } else if (_.isEmpty(def.scopes)) {\n            delete def.scopes;\n          }\n\n          if (_.isEmpty(operation.security)) {\n            _.set(operation, 'security', [def]);\n          } else {\n            operation.security.push(def);\n          }\n        }\n      });\n    });\n  } else {\n    _.set(operation, 'security', []);\n  }\n\n  return operation;\n};\n","import _ from 'lodash';\n\nimport shortid from '../shortid';\nimport { createURL } from '../url';\nimport { getConfigVar } from '../config';\nimport { encodeBase32 } from '../strings';\nimport { stringifyQuery } from '../query';\n\nexport const apiName = ({ api = {} }) => {\n  return api.id || 'no-id';\n};\n\nexport const newApi = ({ id, steps } = {}) => {\n  return {\n    id: id || shortid({ length: 5, lowercase: true }),\n  };\n};\n\nexport const apiTip = (api = {}) => {\n  const tipData = [];\n\n  if (!_.isEmpty(api.methods) || !_.isEmpty(api.hosts) || !_.isEmpty(api.paths)) {\n    tipData.push({\n      text: 'Matches all',\n    });\n\n    if (!_.isEmpty(api.methods)) {\n      tipData.push({\n        text: api.methods.map(a => _.toUpper(a)).join(', '),\n        className: 'font-bold underline sl-get-color',\n      });\n    }\n\n    tipData.push({\n      text: 'requests',\n    });\n\n    if (!_.isEmpty(api.hosts)) {\n      tipData.push({\n        text: 'to',\n      });\n\n      tipData.push({\n        text: api.hosts.join(', '),\n        className: 'font-bold underline sl-post-color',\n      });\n    }\n\n    if (!_.isEmpty(api.paths)) {\n      tipData.push({\n        text: 'that start with',\n      });\n\n      tipData.push({\n        text: api.paths.join(', '),\n        className: 'font-bold underline sl-patch-color',\n      });\n    }\n  } else {\n    tipData.push({\n      text: 'Matches all requests',\n    });\n  }\n\n  if (api.upstream_url) {\n    tipData.push({\n      text: 'and forwards them to',\n    });\n\n    tipData.push({\n      text: api.upstream_url,\n      className: 'font-bold underline sl-copy-color',\n    });\n  }\n\n  return tipData;\n};\n\nexport const ruleName = ({ rule = {} }) => {\n  return rule.id || 'no-id';\n};\n\nexport const newRule = ({ id, steps } = {}) => {\n  return {\n    id: id || shortid({ length: 5, lowercase: true }),\n    before: {},\n    after: {},\n    done: {},\n  };\n};\n\nexport const ruleTip = (rule = {}) => {\n  const tipData = [];\n\n  if (!_.isEmpty(rule.methods) || !_.isEmpty(rule.paths)) {\n    tipData.push({\n      text: 'Matches all',\n    });\n\n    if (!_.isEmpty(rule.methods)) {\n      tipData.push({\n        text: rule.methods.map(a => _.toUpper(a)).join(', '),\n        className: 'font-bold underline sl-get-color',\n      });\n    }\n\n    tipData.push({\n      text: 'requests',\n    });\n\n    if (!_.isEmpty(rule.paths)) {\n      tipData.push({\n        text: 'that start with',\n      });\n\n      tipData.push({\n        text: rule.paths.join(', '),\n        className: 'font-bold underline sl-patch-color',\n      });\n    }\n  } else {\n    tipData.push({\n      text: 'Matches all requests',\n    });\n  }\n\n  if (!_.isEmpty(rule.apis)) {\n    tipData.push({\n      text: 'that also match the',\n    });\n\n    tipData.push({\n      text: rule.apis.join(', '),\n      className: 'font-bold underline sl-copy-color',\n    });\n\n    tipData.push({\n      text: `${rule.apis.length === 1 ? 'api block' : 'api blocks'}`,\n    });\n  }\n\n  return tipData;\n};\n\nexport const cleanRule = ({ rule = {} }) => {\n  rule = _.pick(rule, ['id', 'apis', 'methods', 'paths', 'before', 'after', 'done']);\n\n  return rule;\n};\n\nexport const cleanApi = ({ api = {} }) => {\n  api = _.pick(api, ['id', 'upstream_url', 'methods', 'hosts', 'paths', 'specs']);\n\n  return api;\n};\n\nexport const cleanInstance = ({ instance = {} }) => {\n  instance = _.pick(instance, ['name', 'description', 'apis', 'rules', 'scenarios']);\n\n  instance.apis = instance.apis || {};\n  for (const apiId in instance.apis) {\n    if (instance.apis[apiId]) {\n      const api = instance.apis[apiId];\n      _.set(instance, ['apis', apiId], cleanApi({ api }));\n    }\n  }\n\n  instance.rules = instance.rules || {};\n  for (const ruleId in instance.rules) {\n    if (instance.rules[ruleId]) {\n      const rule = instance.rules[ruleId];\n      _.set(instance, ['rules', ruleId], cleanRule({ rule }));\n    }\n  }\n\n  return instance;\n};\n\nexport const configBlockScore = ({ block }) => {\n  let score = 0;\n\n  if (!_.isEmpty(block.methods)) {\n    score += 1;\n  }\n\n  if (!_.isEmpty(block.hosts)) {\n    score += 1;\n  }\n\n  if (!_.isEmpty(block.paths)) {\n    score += 1;\n  }\n\n  if (!_.isEmpty(block.apis)) {\n    score += 1;\n  }\n\n  if (block.exclusive) {\n    score += 1;\n  }\n\n  return score;\n};\n\n// sort by api score, preserving ordering in the case of a tie\nexport const sortConfigBlocks = ({ blocks = [] }) => {\n  const data = [];\n\n  for (const i in blocks) {\n    data.push({\n      score: configBlockScore({ block: blocks[i] }),\n      index: i,\n      block: blocks[i],\n    });\n  }\n\n  return _.map(_.orderBy(data, ['score', 'index'], ['desc', 'asc']), 'block');\n};\n\nexport const isApiMatch = ({ method, urlData = {}, api = {} }) => {\n  if (!_.isEmpty(api.methods) && !_.includes(api.methods, method)) {\n    return false;\n  }\n\n  if (!_.isEmpty(api.hosts) && !_.includes(api.hosts, urlData.host)) {\n    return false;\n  }\n\n  if (!_.isEmpty(api.paths) && !_.includes(api.paths, urlData.pathname)) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const matchApi = ({ method, url, apis = [] }) => {\n  let match = null;\n\n  let urlData;\n  if (url) {\n    urlData = createURL(url);\n  }\n\n  const sortedApis = sortConfigBlocks({ blocks: apis });\n\n  for (const api of sortedApis) {\n    if (isApiMatch({ method, urlData, api })) {\n      match = api;\n      break;\n    }\n  }\n\n  return match;\n};\n\nexport const isRuleMatch = ({ method, urlData = {}, api = {}, rule = {} }) => {\n  if (!_.isEmpty(rule.apis) && !_.includes(rule.apis, _.get(api, 'id'))) {\n    return false;\n  }\n\n  if (!_.isEmpty(rule.methods) && !_.includes(rule.methods, method)) {\n    return false;\n  }\n\n  if (!_.isEmpty(rule.hosts) && !_.includes(rule.hosts, urlData.host)) {\n    return false;\n  }\n\n  if (!_.isEmpty(rule.paths) && !_.find(rule.paths, p => _.startsWith(urlData.pathname, p))) {\n    return false;\n  }\n\n  return true;\n};\n\nexport const matchRules = ({ method, url, api, rules = [] }) => {\n  let matches = [];\n\n  let urlData;\n  if (url) {\n    urlData = createURL(url);\n  }\n\n  const sortedRules = sortConfigBlocks({ blocks: rules });\n\n  for (const rule of sortedRules) {\n    if (!_.isEmpty(rule) && isRuleMatch({ method, urlData, api, rule })) {\n      if (rule.exclusive) {\n        matches = [rule];\n        break;\n      } else {\n        matches.push(rule);\n      }\n    }\n  }\n\n  return matches;\n};\n\nexport const routeRequest = ({ method, url, apis = [], rules = [] }) => {\n  const api = matchApi({ method, url, apis });\n\n  return {\n    api,\n    rules: matchRules({ method, url, api, rules }),\n  };\n};\n\nexport const validateInstance = ({ instance = {} }) => {\n  // const validationData = {\n  //   errors: [],\n  //   warnings: [],\n  // };\n  // return new Promise((resolve) => {\n  //   // validate the base json schema\n  //   validator(instance)\n  //     .then(() => {\n  //       const uniqueScenarioIds = []; // keep track of scenario ids, to check for uniqueness\n  //       const scenarioIdErrors = []; // keep track of which ids we have added errors for\n  //       const scenarios = computeAllScenarios({instance: instance});\n  //       for (const scenario of scenarios) {\n  //         // check that scenario ids are unique\n  //         if (_.includes(uniqueScenarioIds, scenario.id) && !_.includes(scenarioIdErrors, scenario.id)) {\n  //           const existing = _.filter(scenarios, {id: scenario.id});\n  //           const names = _.map(existing, 'name');\n  //           validationData.errors.push({\n  //             code: 'SCENARIO_UNIQUE_ID',\n  //             message: `The following scenarios have the same id (${scenario.id}): ${names.join(', ')}`,\n  //             description: 'This can cause a bunch of issues. To fix it, navigate to the root instance, open up the code editor pane, and manually update the scenario ids to be different.',\n  //           });\n  //         }\n  //         uniqueScenarioIds.push(scenario.id);\n  //         // check steps\n  //         const uniqueStepIds = []; // keep track of scenario ids, to check for uniqueness\n  //         const stepIdErrors = []; // keep track of which ids we have added errors for\n  //         const steps = scenario.steps || [];\n  //         for (const step of steps) {\n  //           // check that step ids are unique\n  //           if (_.includes(uniqueStepIds, step.id) && !_.includes(stepIdErrors, step.id)) {\n  //             const existing = _.filter(steps, {id: step.id});\n  //             const names = _.map(existing, 'name');\n  //             validationData.errors.push({\n  //               code: 'SCENARIO_STEP_UNIQUE_ID',\n  //               message: `${scenario.name} (${scenario.id}): The following steps have the same id (${step.id}): ${names.join(', ')}`,\n  //               description: 'This can cause a bunch of issues. To fix it, navigate to the scenario, open up the code editor pane, and manually update the step ids to be different.',\n  //             });\n  //           }\n  //           uniqueStepIds.push(step.id);\n  //         }\n  //       }\n  //       resolve(validationData);\n  //     })\n  //     .catch((err) => {\n  //       if (!(err instanceof Ajv.ValidationError)) {\n  //         validationData.errors.push({\n  //           code: 'VALIDATION_ERROR',\n  //           message: String(err),\n  //         });\n  //       } else if (err.errors) {\n  //         for (const e of err.errors) {\n  //           validationData.errors.push({\n  //             code: 'VALIDATION_ERROR',\n  //             ...e,\n  //             inner: e,\n  //           });\n  //         }\n  //       }\n  //       resolve(validationData);\n  //     });\n  // });\n};\n\nexport const defaultInstance = ({ title = 'My Instance' } = {}) => ({\n  name: title,\n  description: '',\n  apis: [],\n  rules: [],\n});\n\nexport const encodeFileId = value => {\n  return encodeBase32({\n    value,\n    stripPadding: true,\n    lower: true,\n  });\n};\n\nexport const disablePrismSubdomains = ({ fileId, fileHash }) => {\n  const disableSubdomains = getConfigVar('SL_DISABLE_PRISM_SUBDOMAINS');\n  if (disableSubdomains) {\n    return true;\n  }\n\n  const encodedFileId = fileHash || encodeFileId(fileId);\n\n  // Subdomains cannot be larger than 63 characters\n  return encodedFileId.length > 63;\n};\n\nexport const buildInstanceUrl = ({ fileId, fileHash, docs, idLocation = 'subdomain' } = {}) => {\n  const encodedFileId = fileHash || encodeFileId(fileId);\n\n  const [protocol, host] = getConfigVar('SL_PRISM_HOST').split('://');\n  let instanceUrl = host;\n\n  let query = {};\n\n  if (docs) {\n    query.__docs = 1;\n  }\n\n  if (idLocation === 'query' || disablePrismSubdomains({ fileHash: encodedFileId })) {\n    query.__id = encodedFileId;\n  } else {\n    instanceUrl = `${encodedFileId}.${instanceUrl}`;\n  }\n\n  instanceUrl = `${protocol}://${instanceUrl}`;\n\n  const queryString = stringifyQuery(query);\n\n  if (queryString) {\n    instanceUrl = `${instanceUrl}?${queryString}`;\n  }\n\n  return instanceUrl;\n};\n","import React from 'react';\nimport cn from 'classnames';\nimport { Popup, Icon } from 'semantic-ui-react';\n\nconst FormInputTip = props => {\n  const { className, tip } = props;\n\n  if (!tip || typeof tip !== 'string') {\n    return null;\n  }\n\n  return (\n    <div className={cn('FormInputTip', className)}>\n      <Popup\n        trigger={<Icon name=\"question\" size=\"small\" />}\n        content={tip}\n        size=\"small\"\n        wide=\"very\"\n        hoverable\n      />\n    </div>\n  );\n};\n\nexport default FormInputTip;\n","import React from 'react';\nimport cn from 'classnames';\nimport FormInputTip from '../FormInputTip';\n\nconst FormInputLabel = props => {\n  const { className, label, required, tip, inverted, inline, style } = props;\n\n  if (!label || typeof label !== 'string') {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn('FormInputLabel flex', className, {\n        'is-inverted': inverted,\n        'is-inline': inline,\n      })}\n      style={style}\n    >\n      {required && <div className=\"FormInputLabel--required\">*</div>}\n      {label && <div className=\"FormInputLabel--text\">{label}</div>}\n      {tip && <FormInputTip tip={tip} />}\n    </div>\n  );\n};\n\nexport default FormInputLabel;\n","import _ from 'lodash';\nimport pathToRegexp from 'path-to-regexp';\n\nconst patternCache = {};\nconst cacheLimit = 10000;\nlet cacheCount = 0;\n\nconst compilePath = (pattern, options) => {\n  const cacheKey = `${options.end}${options.strict}`;\n  const cache = patternCache[cacheKey] || (patternCache[cacheKey] = {});\n\n  if (cache[pattern]) return cache[pattern];\n\n  const keys = [];\n  const re = pathToRegexp(pattern, keys, options);\n  const compiledPattern = { re, keys };\n\n  if (cacheCount < cacheLimit) {\n    cache[pattern] = compiledPattern;\n    cacheCount++;\n  }\n\n  return compiledPattern;\n};\n\n/*\n * Public API for matching a URL pathname to a path pattern.\n */\nconst matchPath = (pathname, options = {}) => {\n  if (typeof options === 'string') options = { path: options };\n\n  const { exact = false, strict = false } = options;\n  const path = options.path || options.from;\n\n  if (!path) return { url: pathname, isExact: true, params: {} };\n\n  const { re, keys } = compilePath(path, { end: exact, strict });\n  const match = re.exec(pathname);\n\n  if (!match) return null;\n\n  const [url, ...values] = match;\n  const isExact = pathname === url;\n\n  if (exact && !isExact) return null;\n\n  return {\n    path, // the path pattern used to match\n    url: path === '/' && url === '' ? '/' : url, // the matched portion of the URL\n    isExact, // whether or not we matched exactly\n    params: _.reduce(\n      keys,\n      (memo, key, index) => {\n        memo[key.name] = values[index];\n        return memo;\n      },\n      {}\n    ),\n  };\n};\n\nexport default matchPath;\n","import matchPath from 'react-router/matchPath';\nimport Router from 'react-router/Router';\nimport qs from 'qs';\n\n// ensure we're using the exact code for default root match\nconst { computeMatch } = Router.prototype;\n\n/**\n * By default will gather up all routes that match the given pathname, until the first isExact route is found.\n * Set exact = false to stop at the first matched route, no matter if it is exact or not.\n */\nexport const computeBranch = (routes = [], pathname = '', opts = {}, _internal = {}) => {\n  const { exact = true } = opts;\n  const {\n    branch = [],\n    originalPathname = pathname,\n    parentPath = '',\n    parentParams = {},\n  } = _internal;\n\n  routes.some((route = {}) => {\n    const isRoot = !route.path || route.path === '/';\n    const parent = branch[branch.length - 1];\n    const childRoutes = route.routes || [];\n\n    let match;\n    if (route.path) {\n      match = matchPath(pathname, route);\n    } else if (branch.length) {\n      match = parent.match; // use parent match\n    } else {\n      match = computeMatch(pathname); // use default \"root\" match\n    }\n\n    let isExact;\n    let nextParentPath = `${parentPath === '/' ? '' : parentPath}`;\n    if (match) {\n      nextParentPath += match.url;\n\n      const params = Object.assign({}, parentParams, match.params || {});\n\n      if (childRoutes.length) {\n        const nextPath = isRoot ? pathname : pathname.replace(match.url, '');\n        computeBranch(childRoutes, nextPath, opts, {\n          branch,\n          originalPathname,\n          parentPath: nextParentPath,\n          parentParams: params,\n        });\n      }\n\n      isExact = match.isExact || (branch.length && branch[branch.length - 1].match.isExact);\n\n      if (isExact) {\n        branch.unshift({\n          route,\n          match,\n        });\n      }\n    }\n\n    return match && (!exact || isExact);\n  });\n\n  return branch;\n};\n\nexport const computeBranchRoute = (branch = []) => {\n  const leaf = branch[branch.length - 1];\n\n  const route = {\n    path: '',\n    redirect: leaf && leaf.route ? leaf.route.redirect : null,\n  };\n\n  for (const b of branch) {\n    const p = b.route.path;\n    if (p && p !== '/') {\n      route.path += p;\n    }\n  }\n\n  route.path = route.path || '/';\n\n  return route;\n};\n\nexport const computeBranchProperty = ({ branch, match, propName }) => {\n  return ({ context = {} } = {}) => {\n    const computedProps = {};\n\n    for (const b of branch) {\n      const { route, match } = b;\n\n      const factory = route[propName];\n      if (typeof factory === 'function') {\n        const props = factory({ route: b, match, context }) || {};\n\n        // acummulate props from parents, allowing children to overwrite parent props\n        Object.assign(computedProps, props);\n      }\n    }\n\n    return computedProps;\n  };\n};\n\nexport const loadBranchData = ({ branch, match }) => {\n  return async (context = {}, { continueOnError } = {}) => {\n    const result = {\n      data: {},\n      error: null,\n      asyncError: null,\n    };\n\n    // asyncLoaders don't block branches from being processed\n    // however, loadBranchData will not return until they have been completed\n    const asyncLoaders = [];\n    for (const b of branch) {\n      const { route } = b;\n      if (route.loadDataAsync) {\n        asyncLoaders.push(route.loadDataAsync({ route, match, context }));\n      }\n    }\n    let asyncLoader;\n    if (asyncLoaders.length) {\n      asyncLoader = Promise.all(asyncLoaders);\n    }\n\n    for (const b of branch) {\n      const { route } = b;\n\n      if (route.loadData) {\n        try {\n          const data = await route.loadData({ route, match, context, data: result.data });\n          Object.assign(result.data, data);\n        } catch (e) {\n          result.error = result.error || e;\n\n          if (!continueOnError) {\n            break;\n          }\n        }\n      }\n    }\n\n    if (asyncLoader) {\n      try {\n        const datas = await asyncLoader;\n        for (const data of datas) {\n          Object.assign(result.data, data);\n        }\n      } catch (e) {\n        result.asyncError = e;\n      }\n    }\n\n    return result;\n  };\n};\n\nexport const computeLocationMatch = (routes = [], location = {}, opts = {}) => {\n  const { pathname = '', search = '', hash = '' } = location;\n  const { qsOptions = { arrayFormat: 'brackets' } } = opts;\n\n  const branch = computeBranch(routes, pathname, opts);\n\n  const match = {\n    route: computeBranchRoute(branch),\n    location: {\n      pathname,\n      search,\n      hash,\n    },\n    params: {},\n    query: {},\n  };\n\n  if (search) {\n    match.query = qs.parse(search.slice(1), qsOptions);\n  }\n\n  for (const b of branch) {\n    Object.assign(match.params, b.match.params || {});\n  }\n\n  match.computeProps = computeBranchProperty({ branch, match, propName: 'props' });\n  match.computeLayout = computeBranchProperty({ branch, match, propName: 'layout' });\n  match.loadData = loadBranchData({ branch, match });\n\n  return match;\n};\n","import { observe } from 'mobx';\n\nexport const syncHistoryWithStore = (history, store) => {\n  // Initialise store\n  store.history = history;\n\n  // Handle update from history object\n  const handleLocationChange = location => {\n    store.handleLocationChange(location);\n  };\n\n  const unsubscribeFromHistory = history.listen(handleLocationChange);\n  handleLocationChange(history.location);\n\n  const subscribe = listener => {\n    const onStoreChange = change => {\n      const rawLocation = { ...store.location };\n      listener(rawLocation, history.action);\n    };\n\n    // Listen for changes to location state in store\n    const unsubscribeFromStore = observe(store, 'location', onStoreChange);\n\n    listener(store.location, history.action);\n\n    return () => {\n      unsubscribeFromStore();\n    };\n  };\n  const unsubscribe = () => unsubscribeFromHistory();\n\n  history.subscribe = subscribe;\n  history.unsubscribe = unsubscribe;\n\n  return history;\n};\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\n\nclass RouterLayoutSlot extends React.Component {\n  constructor(props) {\n    super(props);\n    const { slot = {} } = props;\n    this.state = { id: slot.id, displayName: slot.component.displayName };\n  }\n\n  shouldComponentUpdate(nextProps) {\n    const { slot = {} } = nextProps;\n    return (\n      typeof slot.id === 'undefined' ||\n      slot.id !== this.state.id ||\n      slot.component.displayName !== this.state.displayName\n    );\n  }\n\n  componentWillUpdate(nextProps, nextState) {\n    const { slot = {} } = nextProps;\n    nextState.id = slot.id;\n    nextState.displayName = slot.component.displayName;\n  }\n\n  render() {\n    const { slot = {}, ...slotProps } = this.props;\n\n    const Component = slot.component;\n\n    return <Component {...slotProps} {...slot.props} />;\n  }\n}\n\nconst RouterLayoutSlotWrapper = props => {\n  const { id, routerStore, ...slotProps } = props;\n\n  const { layout = {} } = routerStore;\n  const slot = layout[id] || {};\n\n  const Component = slot.component;\n  if (!Component) {\n    return null;\n  }\n\n  return <RouterLayoutSlot id={id} {...slotProps} slot={slot} />;\n};\n\nexport default inject('routerStore')(observer(RouterLayoutSlotWrapper));\n","import React from 'react';\nimport { inject, observer } from 'mobx-react';\nimport Redirect from 'react-router/Redirect';\n\nconst RouterRedirect = props => {\n  const { routerStore } = props;\n\n  const { match = {} } = routerStore;\n  const { route = {} } = match;\n\n  if (!route.redirect) return null;\n\n  return (\n    <Redirect\n      key={'red'}\n      from={route.path}\n      to={typeof route.redirect === 'function' ? route.redirect({ match }) : route.redirect}\n    />\n  );\n};\n\nexport default inject('routerStore')(observer(RouterRedirect));\n","export { default as Link } from './Link';\nexport { Link as NavLink } from './NavLink';\nexport { default as matchPath } from './matchPath';\nexport { computeLocationMatch } from './matchRoutes';\nexport { syncHistoryWithStore } from './sync';\nexport { default as RouterLayoutSlot } from './components/RouterLayoutSlot';\nexport { default as RouterRedirect } from './components/RouterRedirect';\n","// this function creates a fallback for IE browser which does not support URL function\nimport _ from 'lodash';\nimport url from 'url';\nimport path from 'path';\nimport { URI } from '@core/uri';\n\nimport { getConfigVar } from '../config';\nimport { hashToPath } from '../history';\nimport { stringifyQuery, parseQuery } from '../query';\n\nexport const createURL = (u, host) => {\n  let newURL = {};\n\n  // Try to add protocol for URL that starts from variable bracket to be able to parse it\n  if (typeof u === 'string' && u.charAt(0) === '{') {\n    u = 'http://' + u;\n  }\n\n  if (host && host.charAt(0) === '{') {\n    host = 'http://' + host;\n  }\n\n  if (typeof URL === 'function') {\n    try {\n      newURL = new URL(u);\n    } catch (e) {\n      try {\n        newURL = new URL(`${host}${u}`);\n      } catch (e) {\n        return {};\n      }\n    }\n  } else if (typeof url !== typeof undefined) {\n    try {\n      newURL = url.parse(u);\n    } catch (e) {\n      try {\n        newURL = url.parse(`${host}${u}`);\n      } catch (e) {\n        return {};\n      }\n    }\n  } else if (typeof document !== typeof undefined) {\n    newURL = document.createElement('a');\n    newURL.href = u;\n  }\n\n  // create a plain object\n  newURL = {\n    hash: newURL.hash,\n    host: newURL.host,\n    hostname: newURL.hostname,\n    href: newURL.href,\n    origin: newURL.origin,\n    password: newURL.password,\n    pathname: newURL.pathname === 'blank' ? '' : newURL.pathname,\n    port: newURL.port,\n    protocol: newURL.protocol,\n    search: newURL.search,\n    searchParams: newURL.searchParams,\n    username: newURL.username,\n  };\n\n  // replace brackets in the URL (mostly used for variables)\n  for (const field in newURL) {\n    if (\n      newURL.hasOwnProperty(field) &&\n      newURL[field] &&\n      ['href', 'pathname', 'host', 'hostname', 'origin'].includes(field)\n    ) {\n      newURL[field] = newURL[field]\n        .replace(/\\%24/gi, '$')\n        .replace(/\\%7B/gi, '{')\n        .replace(/\\%7D/gi, '}');\n    }\n  }\n\n  return newURL;\n};\n\nexport const isValidUrl = u => {\n  const u2 = createURL(u);\n  return u2.host;\n};\n\nexport const cleanSlashes = (path, options = {}) => {\n  // don't remove slashes for absolute URLs\n  if (!path) return path;\n\n  const { trimStart, trimEnd } = Object.assign({ trimStart: false, trimEnd: true }, options);\n\n  // if we have a protocol like https://\n  if (/:\\/\\//.test(path)) {\n    // Dont replace the double slashes in https://\n    return path\n      .split('://')\n      .map(p => cleanSlashes(p, { trimStart: true, trimEnd }))\n      .join('://');\n  }\n\n  // Replace 2+ slashes with 1 slash\n  let cleaned = _.replace(path, /\\/{2,}/g, '/');\n\n  // Remove ending slash\n  if (trimEnd) {\n    cleaned = cleaned.replace(/\\/$/, '');\n  }\n\n  if (trimStart) {\n    cleaned = _.replace(cleaned, /^\\//, '');\n  }\n\n  if (!cleaned) {\n    return '/';\n  }\n\n  return cleaned;\n};\n\nexport const buildPathParts = (path, base) => {\n  const pathParts = [];\n  const newPath = base ? path.replace(base, '') : path;\n  const parts = newPath.split('/');\n\n  if (parts.length && parts[0] === '') {\n    parts.shift();\n  }\n\n  for (const i in parts) {\n    if (!Object.prototype.hasOwnProperty.call(parts, i)) {\n      continue;\n    }\n\n    const part = parts[i];\n    if (\n      part.match(\n        /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/g\n      )\n    ) {\n      pathParts.push(part);\n    } else if (i === parts.length - 1) {\n      // Try to split by file extention, basically a period.\n      const pathsExt = part.split('.');\n      if (pathsExt.length > 1) {\n        if (pathsExt[0] === '') {\n          pathsExt.shift();\n        }\n        pathParts.push(pathsExt[0]);\n        pathsExt.shift();\n        pathParts.push(pathsExt.join('.'));\n      } else {\n        pathParts.push(part);\n      }\n    } else {\n      pathParts.push(part);\n    }\n  }\n\n  return pathParts;\n};\n\nexport const getAnchorSearch = location => {\n  const rawAnchor = location.anchor || '';\n  const arr = rawAnchor.split('?');\n\n  return arr.length > 1 ? arr[1] : null;\n};\n\nexport const getSearchQs = location => {\n  const rawQs = location.search || '';\n  const qs = rawQs.replace('?', '');\n\n  return qs ? parseQuery(qs) : {};\n};\n\nexport const getAnchorQs = location => {\n  const anchorQs = getAnchorSearch(location);\n\n  return anchorQs ? parseQuery(anchorQs) : {};\n};\n\nexport const extractParams = path => {\n  const params = [];\n\n  const matchParam = /({([^}]+)}|%7B([^}]+)%7D)/gi;\n  let match = matchParam.exec(path);\n  while (match != null) {\n    params.push(match[2]);\n    match = matchParam.exec(path);\n  }\n\n  return params;\n};\n\nexport const getAllParams = location => {\n  return _.merge({}, getAnchorQs(location), getSearchQs(location));\n};\n\nexport const getHashParts = location => {\n  const params = {};\n\n  if (typeof location.hash === 'string') {\n    location.hash\n      .slice(1)\n      .split('&')\n      .forEach(param => {\n        const [key, value] = param.split('=');\n\n        params[key] = value;\n      });\n  }\n\n  return params;\n};\n\nexport const replacePathParams = (path, params = {}) => {\n  let replacedPath = path;\n  const matches = extractParams(path);\n\n  for (let match of matches) {\n    const value = _.get(params, match);\n\n    if (!_.isUndefined(value) && !(typeof value === 'string' && _.isEmpty(value))) {\n      const regex = new RegExp(_.escapeRegExp(`{${match}}`), 'g');\n      replacedPath = replacedPath.replace(regex, value);\n    }\n  }\n\n  return replacedPath;\n};\n\nexport const extractQueryFilters = (query = {}) => {\n  const filters = {};\n\n  _.forEach(query, (v, k) => {\n    if (_.startsWith(k, 'f_')) {\n      filters[k.substring(2)] = v.split(',');\n    }\n  });\n\n  return filters;\n};\n\nexport const isExternalLink = url => {\n  const reg = new RegExp('^mailto:|http(s)?://|tel:');\n  return reg.test(url);\n};\n\nexport const urlSource = ({ u } = {}) => {\n  let source = '';\n  if (_.get(u, [0]) === '#') {\n    source = 'local';\n  } else if (_.includes(u, getConfigVar('SL_API_HOST')) || _.get(u, [0]) === '.') {\n    source = 'internal';\n  } else {\n    source = 'external';\n  }\n  return { source: source };\n};\n\nexport const stoplightResourceIdentifier = ({ u } = {}) => {\n  if (urlSource({ u }).source === 'internal') {\n    const newURL = url.parse(u);\n    const resources = newURL.pathname.split('/');\n\n    // relative ref\n    if (resources[0] === '.') {\n      return {\n        file: decodeURIComponent(resources[1]),\n      };\n    }\n    // for cases when the file contains slashes\n    const file = resources.slice(3).join('/');\n    let id = resources.slice(1, 3).join(':') + `:${file}`;\n\n    const projectParts = resources[1].split('-');\n\n    return {\n      projectId: parseInt(projectParts[0]) || projectParts[0],\n      projectPath: projectParts[1] ? projectParts[1] : null,\n      ref: resources[2],\n      file,\n      id,\n    };\n  }\n  return {};\n};\n\nexport const getUrlTarget = ({ u } = {}) => {\n  if (_.get(_.split(u, '#/'), [1])) {\n    let hash = `#/${u.split('#/')[1]}`;\n    const path = hashToPath({ hash });\n    return { hash, path };\n  }\n  return {};\n};\n\nexport const getFileFromURL = ({ u } = {}) => {\n  let file = {};\n  if (!_.isEmpty(u)) {\n    const parsed = url.parse(u);\n    if (_.get(parsed, 'pathname')) {\n      const f = path.basename(parsed.pathname);\n      if (f) {\n        file = { file: path.basename(parsed.pathname) };\n      }\n    }\n  }\n  return file;\n};\n\nexport const formats = ['oas2', 'oas3', 'scenarios', 'hub', 'prism'];\nexport const extensions = ['json', 'yml', 'yaml', 'md', 'html', 'css'];\n\n// our files will always be in form foo-bar.format.languange\n// assume external oas2... files would look like fileNameoas2.yml?\nexport const fileFormat = ({ file } = {}) => {\n  if (!file) return {};\n\n  const splitPath = _.split(file, '.');\n  const fileFormat = _.toLower(_.nth(splitPath, -2));\n  const fileLanguage = _.toLower(_.last(splitPath));\n\n  let language;\n  if (_.includes(extensions, fileLanguage)) {\n    language = fileLanguage;\n  }\n\n  let format;\n  // Markdown, HTML, & CSS don't have a file format\n  if (!_.includes(['md', 'html', 'css'], language) && _.includes(formats, fileFormat)) {\n    format = fileFormat;\n  }\n\n  return { file, format, language };\n};\n\nexport const fileExtension = file => {\n  if (!file) {\n    return;\n  }\n\n  return path.extname(file).slice(1);\n};\n\nexport const dataFormat = ({ data } = {}) => {\n  let format = null;\n  const keys = _.keys(data);\n  if (_.includes(keys, 'swagger')) {\n    format = 'oas';\n  } else if (_.includes(keys, 'pages')) {\n    format = 'hub';\n  } else if (_.includes(keys, 'scenarioVersion')) {\n    format = 'scenario';\n  }\n\n  return format;\n};\n\n// Helper function take URL string, remove ?foo=bar params, and return an object with those params\nexport const getQueryParams = path => {\n  const params = {};\n\n  // removes #path if existing\n  const p = _.split(path, '#')[0];\n\n  const queryString = _.split(p, '?')[1];\n\n  if (!queryString) {\n    return {};\n  }\n\n  const queries = _.split(queryString, '&');\n\n  _.forEach(queries, query => {\n    const q = _.split(query, '=');\n    params[q[0]] = q[1];\n  });\n\n  return params;\n};\n\n// Helper function take URL string and query params, add to url\nexport const buildQueryString = ({ url = '', params = {} }) => {\n  if (_.isEmpty(url) && _.isEmpty(params)) return {};\n\n  let result = {};\n\n  const oldParams = getQueryParams(url);\n  const newParams = _.merge(oldParams, params);\n\n  // removes #path if existing\n  const p = _.split(url, '#')[0];\n  const hash = _.split(url, '#')[1];\n\n  // removes old queryString\n  let path = _.split(p, '?')[0];\n\n  let queryList = [];\n\n  _.forEach(newParams, (value, name) => {\n    if (!_.isEmpty(value) || _.isFinite(value)) {\n      queryList.unshift(`${name}=${value}`);\n    }\n  });\n\n  if (queryList.length) {\n    let queryString = '';\n    for (const i in queryList) {\n      if (Number(i) === 0) {\n        queryString = `?${queryList[i]}`;\n      } else {\n        queryString = `${queryString}&${queryList[i]}`;\n      }\n    }\n    path = `${path}${queryString}`;\n    result.queryString = queryString;\n  }\n\n  // re-add hash if existing\n  if (hash) path = `${path}#${hash}`;\n\n  result.url = path;\n\n  return result;\n};\n\n// Helper function take URL string, strip queryString, return both\nexport const removeQueryString = path => {\n  if (!path) return {};\n\n  const result = {};\n\n  // removes #path if existing\n  const hash = _.split(path, '#')[1];\n  let p = _.split(path, '#')[0];\n\n  // removes query string if existing\n  const queryString = _.split(p, '?')[1];\n  p = _.split(p, '?')[0];\n\n  // re add hash if existing\n  if (hash) p = `${p}#${hash}`;\n\n  result.url = p;\n\n  if (queryString) result.queryString = `?${queryString}`;\n\n  return result;\n};\n\nexport const buildExportUrl = ({\n  projectId,\n  branch,\n  filePath,\n  fragment,\n  deref,\n  host = getConfigVar('SL_API_HOST'),\n}) => {\n  const query = stringifyQuery({\n    projectId,\n    branch,\n    path: filePath,\n    deref,\n  });\n\n  let exportUrl = `${host}/files.export?${query}`;\n\n  if (fragment) {\n    exportUrl = `${exportUrl}#${fragment}`;\n  }\n\n  return exportUrl;\n};\n","import _ from 'lodash';\nimport ColorHash from 'color-hash';\nimport tinycolor from 'tinycolor2';\n\nimport shortid from '../shortid';\n\nconst colorHash = new ColorHash({ lightness: 0.5 });\n\nconst hardcoded = {\n  get: '#4EB509',\n  post: '#5E98CD',\n  put: '#786B6D',\n  patch: '#59484b',\n  delete: '#c0392b',\n  script: '#B33F77',\n  model: '#B33F77',\n};\n\nconst colorCache = {};\n\nexport const stringToColor = (str, options) => {\n  let res = str;\n\n  if (!res) {\n    res = shortid();\n  }\n\n  res = res.toLowerCase();\n\n  if (hardcoded[res]) {\n    return hardcoded[res];\n  }\n\n  if (colorCache[res]) {\n    return colorCache[res];\n  }\n\n  colorCache[res] = colorHash.hex(res);\n\n  return colorCache[res];\n};\n\nexport const rgbaString = (color, fallback) => {\n  if (_.isEmpty(color)) return fallback;\n\n  const { r, g, b, a } = color;\n  return `rgba(${r}, ${g}, ${b}, ${a})`;\n};\n\nexport const checkIsWhite = color => {\n  if (!color) return true;\n\n  return tinycolor(color).getBrightness() >= 225;\n};\n","import * as React from 'react';\n\nimport { Portal } from './Portal';\n\nexport type PopupTriggerRenderer = (\n  attributes: {\n    key: string;\n    onMouseEnter: (e: any) => void;\n    onMouseLeave: (e: any) => void;\n    ref: (el: any) => void;\n  },\n  props: {\n    isVisible: boolean;\n    isOver: boolean;\n    showPopup: () => void;\n    hidePopup: () => void;\n  }\n) => any;\n\nexport type PopupContentRenderer = (\n  attributes: object,\n  props: {\n    isVisible: boolean;\n    isOver: boolean;\n    showPopup: () => void;\n    hidePopup: () => void;\n  }\n) => any;\n\nexport interface IPopupPosition {\n  width?: number; // force a width\n  padding?: number; // transparent space around the popup\n  offset?: {\n    top?: number;\n    bottom?: number;\n    left?: number;\n    right?: number;\n  };\n  posX?: 'left' | 'center' | 'right';\n  posY?: 'top' | 'center' | 'bottom';\n  show?: boolean; // controlled or debugging\n}\n\nexport interface IPopup extends IPopupPosition {\n  hideDelay?: number; // how long popup will show for after user mouses out\n  renderTrigger: PopupTriggerRenderer;\n  renderContent: PopupContentRenderer;\n}\n\nexport interface IPopupStyle {\n  position?: string;\n  zIndex?: number;\n  minWidth?: number;\n  width?: number;\n  left?: number;\n  top?: number;\n  bottom?: number;\n  right?: number;\n  visibility?: string;\n  overflow?: string;\n}\n\nexport interface IPopupState {\n  style?: any;\n}\n\n// TODO: repaint on screen size change\n// TODO: allow specifying target container (so that can optionally scroll with content)\n// TODO: add a tip icon option\nexport class Popup extends React.PureComponent<IPopup, IPopupState> {\n  private _isOverTrigger: boolean = false;\n  private _isOverContent: boolean = false;\n  private _willHide: any;\n  private _trigger?: HTMLDivElement;\n  private _content?: HTMLDivElement;\n\n  constructor(props: any) {\n    super(props);\n\n    this.state = {};\n  }\n\n  public render() {\n    const { renderTrigger, renderContent } = this.props;\n\n    const funcs = {\n      isVisible: this.isVisible,\n      showPopup: this.showPopup,\n      hidePopup: this.hidePopup,\n    };\n\n    const elems: any = [];\n\n    elems.push(\n      renderTrigger(\n        {\n          key: 't',\n          onMouseEnter: () => this.handleMouseEnter('_isOverTrigger'),\n          onMouseLeave: e => this.handleMouseLeave(e, '_isOverTrigger', '_isOverContent'),\n          ref: el => (this._trigger = el),\n        },\n        {\n          ...funcs,\n          isOver: this._isOverTrigger,\n        }\n      )\n    );\n\n    let style: object = {\n      position: 'fixed',\n      zIndex: 999,\n      padding: this._padding,\n      width: this._width,\n    };\n\n    if (this.state.style) {\n      style = {\n        ...style,\n        ...this.state.style,\n      };\n    } else {\n      style = {\n        ...style,\n        visibility: this.isVisible ? 'visible' : 'hidden',\n      };\n    }\n\n    if (this.isVisible) {\n      elems.push(\n        <Portal key=\"p\">\n          <div\n            onMouseEnter={() => this.handleMouseEnter('_isOverContent')}\n            onMouseLeave={e => this.handleMouseLeave(e, '_isOverContent', '_isOverTrigger')}\n            ref={el => (this._content = el || undefined)}\n            style={style}\n          >\n            {renderContent(\n              {},\n              {\n                ...funcs,\n                isOver: this._isOverContent,\n              }\n            )}\n          </div>\n        </Portal>\n      );\n    }\n\n    return elems;\n  }\n\n  public componentDidMount() {\n    if (this.isVisible && !this.state.style) {\n      this.repaint();\n    }\n  }\n\n  public componentDidUpdate(prevProps: IPopup) {\n    if (\n      (this.isVisible || this._controlled) &&\n      (!this.state.style || this.propsChanged(prevProps))\n    ) {\n      this.repaint();\n\n      if (this.propsChanged(prevProps)) {\n        this.forceUpdate();\n      }\n    }\n  }\n\n  private get isVisible() {\n    if (this._controlled) {\n      return this.props.show || false;\n    }\n\n    return this._isOverContent || this._isOverTrigger || false;\n  }\n\n  private propsChanged(props: IPopupPosition) {\n    return (\n      this.props.width !== props.width ||\n      this.props.posX !== props.posX ||\n      this.props.posY !== props.posY ||\n      this.props.padding !== props.padding ||\n      this.props.show !== props.show\n    );\n  }\n\n  private handleMouseEnter = (_isOver: string) => {\n    if (this.isVisible || this._controlled) return;\n    this[_isOver] = true;\n    this.showPopup();\n  };\n\n  private handleMouseLeave = (e: any, _isLeaving: string, _isOver: string) => {\n    const newTarget = e.toElement || e.relatedTarget;\n    if (newTarget === this._content) {\n      this[_isOver] = true;\n    }\n\n    this[_isLeaving] = false;\n    if (!this.isVisible || this._controlled) {\n      this.hidePopup();\n    }\n  };\n\n  private showPopup = () => {\n    if (this._willHide) {\n      clearTimeout(this._willHide);\n      this._willHide = undefined;\n    }\n\n    // this just triggers a re-render, so that componentDidUpdate can trigger a repaint\n    // after the content element has been rendered\n    // we have to do it this way so that repaint can access this._content to calculate dimensions\n    this.forceUpdate();\n  };\n\n  private hidePopup = () => {\n    if (this._willHide) {\n      return;\n    }\n\n    this._willHide = setTimeout(() => {\n      this._isOverTrigger = false;\n      this._isOverContent = false;\n      this.setState({ style: undefined });\n    }, this._hideDelay);\n  };\n\n  private repaint = () => {\n    if (!this._trigger || !this._content) return;\n\n    // TODO: smart choice based on content size and screen space if this.props.posX not defined\n    let posX = this._posX;\n\n    // TODO: smart choice based on content size and screen space if this.props.posY not defined\n    const posY = this._posY;\n\n    // calculate the tooltip position\n    // this style object will be passed to the renderContent function\n    const style: IPopupStyle = {};\n\n    // where on the screen is the target\n    const triggerDimensions = this._trigger.getBoundingClientRect();\n\n    // where on the screen is the content, and some basics on its size\n    const contentDimensions = this._content.getBoundingClientRect();\n    const contentWidth = this._width || contentDimensions.width;\n\n    style.minWidth = triggerDimensions.width + 25;\n\n    if (posY === 'center') {\n      if (posX === 'left') {\n        posX = 'right';\n      } else {\n        posX = 'left';\n      }\n    }\n\n    if (posX === 'left' || posX === 'center') {\n      style.left = triggerDimensions.left;\n\n      if (posX === 'center') {\n        // center align the popup by taking both the target and popup widths into account\n        style.left += triggerDimensions.width / 2 - contentWidth / 2;\n      } else {\n        style.left -= this._padding;\n\n        // room for tip\n        if (posY === 'center') {\n          style.left += triggerDimensions.width + this._padding;\n        }\n      }\n\n      // account for desired offsets\n      style.left += this._offset.left || 0;\n      style.left -= this._offset.right || 0;\n\n      // make sure it doesn't poke off the left side of the page\n      style.left = Math.max(0, style.left);\n\n      let clientWidth = 0;\n      if (typeof document !== 'undefined') {\n        clientWidth = document.body.clientWidth;\n      }\n\n      // or off the right\n      style.left = Math.min(style.left, clientWidth - contentWidth - 5);\n    } else {\n      // right\n      // coming in from the right of the screen\n      style.right =\n        window.innerWidth - triggerDimensions.left - triggerDimensions.width - this._padding;\n\n      // room for tip\n      if (posY === 'center') {\n        style.right += triggerDimensions.width + this._padding;\n      }\n\n      // account for desired offsets\n      style.right -= this._offset.left || 0;\n      style.right += this._offset.right || 0;\n\n      // TODO: make sure it doesn't poke off the left side of the page\n\n      // or off the right\n      style.right = Math.max(0, style.right);\n    }\n\n    if (posY === 'top') {\n      // when positioning above, set the bottom of the popup just above the top of the target (it will stretch upwards)\n      style.bottom = window.innerHeight - triggerDimensions.top + (this._offset.bottom || 0);\n    } else if (posY === 'bottom') {\n      // when positioning below, position the top of the popup just below the target (it will stretch downwards)\n      style.top = triggerDimensions.top + triggerDimensions.height + (this._offset.top || 0);\n    } else {\n      style.top = style.top =\n        triggerDimensions.top + triggerDimensions.height / 2 - contentDimensions.height / 2;\n\n      style.top += this._offset.top || 0;\n      style.top -= this._offset.bottom || 0;\n    }\n\n    if (style.top) {\n      // make sure it doesn't poke off the bottom of the page\n      style.top = Math.min(window.innerHeight - contentDimensions.height, style.top);\n\n      // make sure it doesn't poke off the top of the page\n      style.top = Math.max(0, style.top);\n\n      if (style.top + contentDimensions.height > window.innerHeight) {\n        style.bottom = 0;\n        style.overflow = 'auto';\n      }\n    } else if (style.bottom) {\n      // make sure it doesn't poke off the top of the page\n      style.bottom = Math.min(window.innerHeight, style.bottom);\n\n      // make sure it doesn't poke off the top of the page\n      style.bottom = Math.max(0, style.bottom);\n\n      if (style.bottom + contentDimensions.height > window.innerHeight) {\n        style.top = 0;\n        style.overflow = 'auto';\n      }\n    }\n\n    this.setState({\n      style,\n    });\n  };\n\n  private get _controlled() {\n    return this.props.hasOwnProperty('show') ? true : false;\n  }\n\n  private get _posX() {\n    return this.props.posX || 'left';\n  }\n\n  private get _posY() {\n    return this.props.posY || 'top';\n  }\n\n  private get _width() {\n    return this.props.width || undefined;\n  }\n\n  private get _padding() {\n    return this.props.padding || 15;\n  }\n\n  private get _hideDelay() {\n    return this.props.hasOwnProperty('hideDelay') ? this.props.hideDelay : 200;\n  }\n\n  private get _offset() {\n    return Object.assign(\n      {\n        top: 0,\n        bottom: 0,\n        left: 0,\n        right: 0,\n      },\n      this.props.offset || {}\n    );\n  }\n}\n","import React from 'react';\nimport cn from 'classnames';\nimport { Button, Icon } from 'semantic-ui-react';\nimport { formatComponentStack } from 'bugsnag-react';\n\nimport { sdk } from '@platform/utils/bugsnag';\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { error: false };\n  }\n\n  // adapted from https://github.com/bugsnag/bugsnag-react/blob/master/src/index.js\n  componentDidCatch(error, info) {\n    this.setState({ error, info });\n\n    const bugsnag = sdk();\n    if (!bugsnag || !bugsnag.BugsnagReport) {\n      console.error('Uncaught client error, and bugsnag is not initialized!', { error, info });\n      return;\n    }\n\n    const BugsnagReport = bugsnag.BugsnagReport;\n    const handledState = {\n      severity: 'error',\n      unhandled: true,\n      severityReason: { type: 'unhandledException' },\n    };\n\n    const report = new BugsnagReport(\n      error.name,\n      error.message,\n      BugsnagReport.getStacktrace(error),\n      handledState\n    );\n\n    if (info && info.componentStack) {\n      info.componentStack = formatComponentStack(info.componentStack);\n    }\n\n    report.updateMetaData('react', info);\n    bugsnag.notify(report);\n  }\n\n  render() {\n    const { className, message } = this.props;\n    const { error } = this.state;\n\n    const errorMessage =\n      message ||\n      `If you are on an editor and the save button is still visible, click it before\n    reloading!`;\n\n    if (error) {\n      return (\n        <div\n          className={cn('ErrorBoundary flex items-center justify-center h-full w-full', className)}\n        >\n          <div className=\"ErrorBoundary-inner\">\n            <h1>\n              Darn! Something went wrong <Icon name=\"frown\" />\n            </h1>\n\n            <div className=\"mt-2\">Our team has automatically been notified about this issue.</div>\n\n            <div className=\"mt-2 font-bold\">{errorMessage}</div>\n\n            <div className=\"mt-2\">\n              <Button\n                icon=\"refresh\"\n                content=\"Reload\"\n                primary\n                onClick={() => {\n                  window.location.reload();\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      );\n    }\n    return this.props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { inject } from 'mobx-react';\n\n// @ts-ignore\nimport { NavLink } from 'react-router-dom';\n\nimport { IUriComponents, URI } from '@core/uri';\n\nexport interface ILink {\n  uri: URI | IUriComponents;\n  children: any;\n  className?: string;\n  id?: string;\n  download?: string;\n  onClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n  routerStore?: any;\n}\n\nexport class LinkComponent extends React.Component<ILink> {\n  public state = {\n    canRenderFragment: false,\n  };\n\n  constructor(props: any) {\n    super(props);\n  }\n\n  /**\n   * Special handling for SSR\n   * the node server does not get the browser hash fragment, so it will not render links\n   * with a hash included. This causes a mismatch no the client. So, we render initially on\n   * the client without the hash, and then do a quick re-render (one time only on first mount)\n   * to include the hash\n   */\n  public componentDidMount() {\n    this.setState({ canRenderFragment: true });\n  }\n\n  public render() {\n    const { uri, children, className, id, onClick, routerStore, download } = this.props;\n\n    let target: URI;\n    if (uri instanceof URI) {\n      target = uri;\n    } else {\n      target = URI.from(uri);\n    }\n\n    // remove the fragment if we can't render it\n    if (!this.state.canRenderFragment) {\n      target = target.with({ fragment: '' });\n    }\n\n    const classNames = cn(className, 'cursor-pointer');\n\n    // render a regular link if we are dealing with an absolute URL\n\n    if (target.isAbsolute() || download) {\n      let targetProp: string | undefined;\n\n      // Open in new tab if URL is to a different domain\n      if (target.scheme !== 'mailto' && target.authority !== routerStore.location.host) {\n        targetProp = '_blank';\n      }\n\n      if (download) {\n        targetProp = '_blank';\n      }\n\n      return (\n        <a\n          className={classNames}\n          href={target.toURL()}\n          id={id}\n          target={targetProp}\n          download={download}\n        >\n          {children}\n        </a>\n      );\n    }\n\n    return (\n      <NavLink\n        id={id}\n        className={classNames}\n        to={target.toURL()}\n        onClick={(e: any) => {\n          if (onClick) onClick(e);\n\n          // Route interceptor will return undefined if navigation should be stopped\n          // OR it will return a new location to navigate\n          const location = routerStore._triggerRouteInterceptors({\n            type: 'click',\n            location: target.location,\n          });\n\n          if (!location) {\n            e.preventDefault();\n            return;\n          }\n\n          // scroll logic for hashes since not natively supported but NavLink\n          if (location.hash) {\n            routerStore.scrollToHash(location.hash);\n          }\n        }}\n      >\n        {children}\n      </NavLink>\n    );\n  }\n}\n\nexport const Link = inject('routerStore')(LinkComponent);\n","import _ from 'lodash';\nimport fuzzysearch from 'fuzzysearch';\nimport Fuse from 'fuse.js';\n\nconst getValue = props => {\n  let v = props.value;\n\n  if (props.rule.dataFactory) {\n    v = props.rule.dataFactory(props);\n  }\n\n  return v;\n};\n\nconst getSearchValue = props => {\n  let v = props.value;\n\n  if (props.rule.searchFactory) {\n    v = props.rule.searchFactory(props);\n  }\n\n  return v;\n};\n\nconst func = ({ spec, data, rules, filtered, parentPath = [], parentRulePath = [] }, opts) => {\n  const { hoist, exclusive, search = {} } = opts;\n\n  let anyMatched = false;\n\n  _.forEach(data, (value, key) => {\n    const currentPath = parentPath.concat([key]);\n\n    for (const name in rules) {\n      if (!rules.hasOwnProperty(name)) continue;\n      const rule = rules[name];\n      let matched = false;\n      let childMatched = false;\n      let shouldRecurse = false;\n\n      let rulePath = [];\n      if (hoist || rule.hoist || !parentRulePath.length) {\n        rulePath = [name];\n      } else {\n        rulePath = parentRulePath.concat(['rules', name]);\n      }\n\n      if (rule.matcher) {\n        matched = rule.matcher({ parentPath, currentPath, key, value, spec });\n        _.set(filtered, rulePath, _.get(filtered, rulePath, { matched: [] }));\n      }\n\n      if (matched) {\n        const data = getValue({ spec, rule, value, parentPath, currentPath, key });\n\n        const matchedData = {\n          path: currentPath,\n          data,\n        };\n\n        if (search.query) {\n          matchedData.searchable = getSearchValue({\n            spec,\n            rule,\n            value,\n            parentPath,\n            currentPath,\n            key,\n          });\n\n          matchedData.searchable = JSON.stringify(\n            _.values(matchedData.searchable || matchedData.data || {})\n          )\n            .toLowerCase()\n            .replace(/\\W/g, ' ')\n            .replace(/\\s+/g, ' ')\n            .trim();\n\n          matched = fuzzysearch(search.query.toLowerCase().trim(), matchedData.searchable);\n        }\n\n        if (matched) {\n          _.get(filtered, rulePath).matched.push(matchedData);\n        }\n      }\n\n      if (!shouldRecurse && rule.recursive) {\n        shouldRecurse = _.isFunction(rule.recursive)\n          ? rule.recursive({ spec, rule, value, parentPath, currentPath, key })\n          : rule.recursive;\n      }\n\n      if ((shouldRecurse || rule.rules) && _.isObject(value)) {\n        let nextRulePath = parentRulePath;\n        let nextRules = {\n          [name]: rule,\n        };\n\n        if (matched && !rule.circular) {\n          nextRules = rule.rules;\n          nextRulePath = nextRulePath.concat(name);\n        }\n\n        childMatched = func(\n          {\n            spec,\n            data: value,\n            rules: nextRules,\n            filtered,\n            parentPath: currentPath,\n            parentRulePath: nextRulePath,\n          },\n          opts\n        );\n      }\n\n      anyMatched = anyMatched || matched || childMatched;\n\n      // break out if we are matching exclusively (stopping at the first rule that matches)\n      if ((matched || childMatched) && (exclusive || rule.exclusive)) {\n        break;\n      }\n    }\n  });\n\n  return anyMatched;\n};\n\nexport const routeData = ({ data = {}, rules = {} }, opts = {}) => {\n  const { search = {}, flatten, limit } = opts;\n  let filtered = {};\n\n  if (_.isEmpty(rules)) {\n    return filtered;\n  }\n\n  func({ spec: data, data, rules, filtered }, opts);\n\n  if (search.query) {\n    _.forEach(filtered, (rule, name) => {\n      const fuse = new Fuse(rule.matched || [], {\n        keys: ['searchable'],\n        threshold: 0.6,\n        distance: 250,\n        ...(search.options || {}),\n      });\n\n      filtered[name].matched = fuse.search(search.query);\n    });\n  }\n\n  if (flatten) {\n    // a place for our flattened results\n    filtered.flattened = {\n      matched: [],\n    };\n\n    // concat all the matched results into the flattened results\n    _.forEach(filtered, (rule, name) => {\n      if (name !== 'flattened') {\n        filtered.flattened.matched = filtered.flattened.matched.concat(rule.matched);\n      }\n    });\n\n    // remove the other results\n    filtered = {\n      flattened: filtered.flattened,\n    };\n  }\n\n  if (limit) {\n    _.forEach(filtered, (rule, name) => {\n      filtered[name].matched = rule.matched.slice(0, limit);\n    });\n  }\n\n  return filtered;\n};\n","export const sdk = () => {\n  if (typeof window !== 'undefined' && window.Bugsnag) {\n    return window.Bugsnag;\n  }\n};\n\n/**\n * opts: https://docs.bugsnag.com/platforms/browsers/js/reporting-handled-errors/#sending-errors\n */\nexport const notify = (e, opts = {}) => {\n  const bs = sdk();\n\n  if (bs) {\n    bs.notify(e, opts);\n  }\n};\n\nexport const init = data => {\n  const Bugsnag = sdk();\n\n  if (Bugsnag) {\n    if (data) {\n      Bugsnag.user = data;\n    }\n  }\n};\n\nexport const script = ({ apiKey, appVersion, releaseStage }, { htmlProps, basePath = '' } = {}) => {\n  if (!apiKey) {\n    return htmlProps ? {} : '';\n  }\n\n  const src = `${basePath}/js/bugsnag.min.js`;\n  const script = `window.Bugsnag = bugsnag({\n  apiKey: '${apiKey}',\n  appVersion: '${appVersion}',\n  releaseStage: '${releaseStage}',\n  notifyReleaseStages: [ 'development', 'staging', 'production' ],\n  metaData: { /* some metaData to attach to every report */ },\n  user: {},\n  beforeSend: function (report) {},\n  autoBreadcrumbs: false\n});`;\n\n  if (htmlProps) {\n    return {\n      src,\n      script,\n    };\n  }\n\n  return `\n    <script defer async src=\"${src}\" onload=\"this.onload = undefined; ${script}\"></script>\n  `;\n};\n","export const startsWith = (source, val) => {\n  if (source instanceof Array) {\n    if (val instanceof Array) {\n      if (val.length > source.length) return false;\n\n      for (const i in val) {\n        const si = parseInt(source[i]);\n        const vi = parseInt(val[i]);\n\n        // support if numeric index is stringified in one but not the other\n        if (!isNaN(si) || !isNaN(vi)) {\n          if (si !== vi) {\n            return false;\n          }\n        } else if (source[i] !== val[i]) {\n          return false;\n        }\n      }\n    }\n  } else if (typeof source === 'string') {\n    if (typeof val === 'string') {\n      return source.startsWith(val);\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\n// finds a value for a key/regex deeply nested in an object\nexport const deepFind = (object = {}, key) => {\n  if (typeof object !== 'object' || !key) return;\n\n  let result;\n\n  const regex = key instanceof RegExp && new RegExp(key);\n\n  for (const prop in object) {\n    if (object.hasOwnProperty(prop)) {\n      if ((regex && regex.test(prop)) || key === prop) {\n        result = object[prop];\n        break;\n      }\n\n      if (typeof object[prop] === 'object') {\n        result = deepFind(object[prop], key);\n        if (result) {\n          break;\n        }\n      }\n    }\n  }\n\n  return result;\n};\n","import _ from 'lodash';\n\nconst buildPart = (router, parts = [], data) => {\n  const targetPath = [parts[0]];\n  const remainingParts = parts.slice(1);\n\n  if (parts[0] instanceof RegExp) {\n    targetPath.unshift('__regexs');\n    if (!_.isEmpty(remainingParts)) {\n      let val = _.get(router, targetPath);\n      if (!val) {\n        val = {\n          __matcher: parts[0],\n          __routes: {},\n        };\n      } else {\n        val.__routes = val.__routes || {};\n      }\n      _.set(router, targetPath, val);\n      buildPart(val.__routes, remainingParts, data);\n    } else {\n      _.set(router, targetPath, {\n        __matcher: parts[0],\n        __data: data,\n      });\n    }\n  } else {\n    if (!_.isEmpty(remainingParts)) {\n      const val = _.get(router, targetPath, {});\n      _.set(router, targetPath, val);\n      buildPart(val, remainingParts, data);\n    } else {\n      _.set(router, targetPath.concat(['__data']), data);\n    }\n  }\n};\n\n// route map must be an es6 map where the keys are array paths, and the values are\n// what will be resolved when the path matches.\n//\n// for example:\n// const routeMap = new Map();\n// routeMap.set(['foo', 'bar'], 'foo bar route');\n// routeMap.set(['foo', /[0-9]*/], 'foo number route');\n// const router = build(routeMap);\nexport const build = (routeMap = {}, options = {}) => {\n  const router = {};\n\n  for (const [path, route] of routeMap) {\n    if (_.isEmpty(path)) {\n      router.__root = {\n        __data: route,\n      };\n    } else {\n      buildPart(router, path, route);\n    }\n  }\n\n  return router;\n};\n\nconst routePart = (router, parts = []) => {\n  if (router && _.isEmpty(parts)) {\n    return _.get(router, '__root.__data');\n  }\n\n  const targetPart = parts[0];\n  if (!targetPart) {\n    return null;\n  }\n\n  let match = router[targetPart];\n  let childRouter = match;\n\n  if (!match && router.__regexs) {\n    for (const i in router.__regexs) {\n      if (targetPart.match(router.__regexs[i].__matcher)) {\n        match = router.__regexs[i];\n        childRouter = router.__regexs[i].__routes;\n        break;\n      }\n    }\n  }\n\n  const remainingParts = parts.slice(1);\n\n  if (match && _.isEmpty(remainingParts)) {\n    return match.__data;\n  } else if (childRouter) {\n    return routePart(childRouter, remainingParts);\n  }\n\n  return null;\n};\n\n// takes a router (built with above build function), and a path.\n// Given the routeMap in the build example above:\n// route(routerMap, 'foo/bar') === 'foo bar route';\n// route(routerMap, 'foo/123') === 'foo number route';\nexport const route = (router, path, options = {}) => {\n  const { delimiter = '/' } = options;\n\n  let pathParts;\n  if (path instanceof Array) {\n    pathParts = path;\n  } else {\n    const cleanedPath = _.trim(path, '#/');\n    pathParts = cleanedPath.split(delimiter);\n  }\n\n  return routePart(router, pathParts);\n};\n","import _ from 'lodash';\n\nimport { checkIsWhite } from '../colors';\nimport { routeData } from '../json/routeData';\n\nexport const findActivePage = (pages = [], path = '/') => {\n  const page = _.find(pages, { path });\n\n  if (!page) {\n    const newPath = _.dropRight(_.split(path, '/'), 1).join('/');\n\n    if (_.isEmpty(newPath)) {\n      return;\n    }\n\n    return findActivePage(pages, newPath);\n  }\n\n  return page;\n};\n\nexport const flattenChildren = (children = [], path = '') => {\n  let flattenedChildren = [];\n\n  for (const item of children) {\n    if (!_.isEmpty(item.children)) {\n      flattenedChildren = flattenedChildren.concat(flattenChildren(item.children, item.path));\n    } else if (!_.isEmpty(item.path)) {\n      flattenedChildren.push({\n        ...item,\n        path: `${path}${item.path}`,\n      });\n    }\n  }\n\n  return flattenedChildren;\n};\n\nexport const findActiveSubpage = (children = [], path = '') => {\n  return _.find(flattenChildren(children), { path }) || {};\n};\n\nexport const findFirstSubpage = (children = []) => {\n  const child = _.first(children) || {};\n\n  if (child.children) {\n    return findFirstSubpage(child.children);\n  }\n\n  return child;\n};\n\nexport const getUrlPathFromJsonPath = (parsed = {}, path = [], urlPath = '') => {\n  const newPath = `${_.get(parsed, path.concat(['route', 'path']), '')}${urlPath}`;\n\n  if (path.length) {\n    return getUrlPathFromJsonPath(parsed, _.dropRight(path, 3), newPath);\n  }\n\n  return newPath;\n};\n\nexport const blockTypes = [\n  {\n    id: 'text',\n    type: 'text',\n    icon: 'align center',\n    name: 'Text Block',\n    description: 'Just a plain ole text block',\n    data: {},\n  },\n  {\n    id: 'jsonSchema',\n    type: 'jsonSchema',\n    src: '/images/bracket.png',\n    name: 'JSON Schema Viewer',\n    description: 'A good way to view a JSON schema',\n    data: {},\n  },\n  {\n    id: 'tryItOut',\n    type: 'tryItOut',\n    icon: 'send',\n    name: 'Try It Out',\n    description: 'Send an HTTP request',\n    data: {},\n  },\n  {\n    id: 'code',\n    type: 'code',\n    icon: 'code',\n    name: 'Code',\n    description: 'Code with syntax highlighting',\n    data: {\n      mode: 'json',\n    },\n  },\n  {\n    id: 'image',\n    type: 'image',\n    icon: 'image',\n    name: 'Image',\n    description: 'Not another cat gif',\n    data: {},\n  },\n  {\n    id: 'tabs',\n    type: 'tabs',\n    icon: 'columns',\n    name: 'Tabs',\n    description: 'More information in one spot',\n    data: {\n      children: [\n        { id: 'tab-1', title: 'Tab 1', blocks: [] },\n        { id: 'tab-2', title: 'Tab 2', blocks: [] },\n      ],\n    },\n  },\n  {\n    id: 'operation',\n    type: 'operation',\n    icon: 'inbox',\n    name: 'API Operation',\n    description: 'Connect one of your API operations',\n    data: {},\n  },\n  {\n    id: 'ref',\n    type: 'ref',\n    icon: 'usb',\n    name: 'Reference',\n    description: 'Use one of your saved blocks',\n    data: {},\n  },\n  {\n    id: 'callout',\n    type: 'callout',\n    icon: 'announcement',\n    name: 'Callout',\n    description: 'A large header with title, description, and action',\n  },\n  {\n    id: 'barList',\n    type: 'barList',\n    icon: 'list',\n    name: 'Bar list',\n    data: {\n      items: [{}],\n    },\n  },\n  {\n    id: 'cardList',\n    type: 'cardList',\n    icon: 'block layout',\n    name: 'Card list',\n    data: {\n      items: [{}],\n    },\n  },\n  {\n    id: 'splitText',\n    type: 'splitText',\n    icon: 'columns',\n    name: 'Split text',\n    description: 'A section with two text blocks that are side-by-side',\n  },\n  {\n    id: 'custom',\n    type: 'custom',\n    icon: 'html5',\n    name: 'Custom HTML',\n    description: 'Use your own HTML',\n  },\n];\n\nexport const pageOptions = [\n  {\n    name: 'Entry',\n    description: 'Most hubs will have at least one page with these layouts.',\n    options: [\n      {\n        id: 'landing',\n        name: 'Landing Page',\n        src: '//cdn.stoplight.io/app/stoplight-help-landing-layout.png',\n        unsetProps: ['html', 'children'],\n      },\n      {\n        id: 'custom',\n        name: 'Custom HTML',\n        icon: 'html5',\n        unsetProps: ['callout', 'children', 'sections'],\n      },\n    ],\n  },\n  {\n    name: 'Documentation',\n    description:\n      'Build your page from scratch by defining many subpages. You can power parts of your page with your OAS specifications.',\n    options: [\n      {\n        id: 'two-column-centered',\n        name: 'Two Column Centered',\n        src: '//cdn.stoplight.io/app/stoplight-help-small-layout.png',\n        allowChildren: true,\n        unsetProps: ['callout', 'html', 'sections'],\n      },\n      {\n        id: 'two-column-full',\n        name: 'Two Column Full',\n        src: '//cdn.stoplight.io/app/stoplight-help-large-layout.png',\n        allowChildren: true,\n        disabled: 'Coming Soon',\n        unsetProps: ['callout', 'html', 'sections'],\n      },\n      {\n        id: 'three-column-full',\n        name: 'Three Column Full',\n        src: '//cdn.stoplight.io/app/stoplight-help-3-column-layout.png',\n        allowChildren: true,\n        disabled: 'Coming Soon',\n        unsetProps: ['callout', 'html', 'sections'],\n      },\n    ],\n  },\n  {\n    name: 'API Reference',\n    description:\n      'Render the page from your OAS specification. This option is less flexbile, but faster to implement.',\n    options: [\n      {\n        id: 'two-column-centered-ref',\n        name: 'Two Column Centered',\n        src: '//cdn.stoplight.io/app/stoplight-help-small-layout.png',\n        // allowApiSpec: true,\n        allowRef: true,\n        unsetProps: ['callout', 'html', 'sections', 'children'],\n      },\n    ],\n  },\n];\nlet _flatPageOptions = [];\n_.forEach(pageOptions, po => {\n  _flatPageOptions = _flatPageOptions.concat(po.options);\n});\nexport const flatPageOptions = _flatPageOptions;\n\nexport const subpageOptions = [\n  {\n    options: [\n      {\n        id: 'page',\n        name: 'Custom Page',\n        icon: 'file text',\n        description: 'A page contains blocks.',\n      },\n      // { id: 'http', name: 'HTTP Operation', icon: 'inbox' },\n      {\n        id: 'group',\n        name: 'Group',\n        icon: 'folder open',\n        description: 'A group has pages nested under it.',\n      },\n      {\n        id: 'divider',\n        name: 'Divider',\n        icon: 'minus',\n        description: 'A divider does not have a link, blocks, or nested pages.',\n      },\n      {\n        id: 'link',\n        name: 'External Link',\n        icon: 'linkify',\n        description: 'A link points to another page or an external website.',\n      },\n    ],\n  },\n];\nlet _flatSubpageOptions = [];\n_.forEach(subpageOptions, po => {\n  _flatSubpageOptions = _flatSubpageOptions.concat(po.options);\n});\nexport const flatSubpageOptions = _flatSubpageOptions;\n\nexport const defaultHub = ({ title = 'My Hub' } = {}) => ({});\n\nconst hubRefRouterRules = {\n  pages: {\n    recursive: true,\n    matcher({ parentPath = [], key }) {\n      return parentPath[0] === 'pages' && key === 'data';\n    },\n    dataFactory({ spec, parentPath }) {\n      let viewPath = '?view=' + `/${_.drop(parentPath)[0]}`;\n      return {\n        name: _.get(spec, parentPath.concat(['title'])),\n        // remove 'pages'\n        viewPath,\n      };\n    },\n  },\n  subpages: {\n    recursive: true,\n    circular: true,\n    matcher({ parentPath = [], key }) {\n      return (\n        _.last(_.dropRight(parentPath)) === 'children' &&\n        key === 'data' &&\n        _.countBy(parentPath, o => o === 'children').true <= 3\n      );\n    },\n\n    dataFactory({ spec, parentPath }) {\n      let viewPath = [parentPath[1]];\n      _.forEach(parentPath, (currentPath, index) => {\n        if (_.isFinite(currentPath)) {\n          const route = _.get(spec, _.slice(parentPath, 0, index + 1).concat(['route', 'path']));\n          viewPath = _.concat(viewPath, route);\n        }\n      });\n\n      viewPath = '?view=' + `/${_.join(viewPath, '')}`;\n\n      return { name: _.get(spec, parentPath.concat(['title'])), viewPath };\n    },\n  },\n};\n\nexport const hubRefRouter = ({ spec = {}, targets = [] } = {}) => {\n  const rules = _.isEmpty(targets) ? hubRefRouterRules : _.pick(hubRefRouterRules, targets);\n  return routeData({ data: spec, rules });\n};\n\nexport const defaultHubTheme = {\n  primary: '#3B99FC',\n  secondary: '#38c172',\n  background: '#ffffff',\n  texture: '',\n};\n\nexport const computeHubThemeStyles = theme => {\n  // (CL) TODO: Should we include css?\n  // (CL) TODO: Clean up the theme classes\n  const { primary, secondary, background, texture } = theme || {};\n\n  let computedTheme = '';\n\n  if (texture) {\n    computedTheme += `\n      .HubHeader {\n        background-image: url(${texture}) !important;\n      }\n    `;\n  }\n\n  if (background) {\n    computedTheme += `\n      .HubHeader {\n        background-color: ${background} !important;\n      }\n    `;\n  }\n\n  const isBackgroundDark = !checkIsWhite(background || '#ffffff');\n  const headerTextColor = isBackgroundDark ? '#ffffff' : undefined;\n\n  if (headerTextColor) {\n    computedTheme += `\n    .HubHeader .HubHeaderItem {\n      color: ${headerTextColor};\n    }\n    `;\n  }\n\n  if (primary) {\n    if (!isBackgroundDark) {\n      computedTheme += `\n        .HubHeaderItem:hover,\n        .HubHeaderItem.is-active {\n          color: ${primary};\n        }\n      `;\n    }\n\n    computedTheme += `\n      .HubBlock-tab.active {\n        border-color: ${primary} !important;\n      }\n\n      .markdown-body a {\n        color: ${primary};\n      }\n\n      .HubMain .text-active,\n      .HubMain .hover\\\\:text-active:hover,\n      .HubMain .HubBlock-tab:hover {\n        color: ${primary} !important;\n      }\n    `;\n  }\n\n  if (secondary) {\n    computedTheme += `\n      .HubMain .ui.secondary.button {\n        background-color: ${secondary};\n      }\n    `;\n  }\n\n  return computedTheme;\n};\n\n// TODO: Download these and store somewhere\nexport const textures = [\n  '',\n  'https://www.transparenttextures.com/patterns/black-lozenge.png',\n  'https://www.transparenttextures.com/patterns/45-degree-fabric-dark.png',\n  'https://www.transparenttextures.com/patterns/inspiration-geometry.png',\n  'https://www.transparenttextures.com/patterns/batthern.png',\n  'https://www.transparenttextures.com/patterns/cubes.png',\n  'https://www.transparenttextures.com/patterns/60-lines.png',\n  'https://www.transparenttextures.com/patterns/gplay.png',\n  'https://www.transparenttextures.com/patterns/noise-pattern-with-subtle-cross-lines.png',\n];\n\nexport const textColors = [\n  '#3B99FC', // primary && active - blue\n  '#38c172', // secondary - green\n  '#BB27DD', // accent - purple\n  '#e3342f', // red\n  '#f6993f', // orange\n  '#6574cd', // indigo\n  '#651fff', // purple/blue\n  '#673AB7', // purple\n];\n\nexport const backgroundColors = [\n  '#ffffff', // white\n  '#2d3436', // dracula orchard (dark grey)\n  '#130F21', // vulcan (stoplight black)\n  '#0984e3', // electron blue (blue)\n  '#6c5ce7', // exodus fruit (purple)\n  '#00b894', // mint leaf (green)\n  '#F97F51', // rich gardenia (organce)\n  '#6D214F', // magenta purple\n];\n","const _ = require('lodash');\nconst yaml = require('js-yaml');\n\nexport const safeLoad = (target, defaultValue) => {\n  if (typeof target === 'string') {\n    try {\n      return yaml.load(target);\n    } catch (e) {\n      return !_.isUndefined(defaultValue) ? defaultValue : {};\n    }\n  }\n\n  return target;\n};\n\nexport const safeDump = target => {\n  if (!_.isNil(target) && typeof target !== 'string') {\n    return yaml.dump(target);\n  }\n\n  return target;\n};\n","import _ from 'lodash';\n\nimport { faPencilAlt } from '@fortawesome/pro-solid-svg-icons/faPencilAlt';\nimport { faPuzzlePiece } from '@fortawesome/pro-solid-svg-icons/faPuzzlePiece';\nimport { faBook } from '@fortawesome/pro-solid-svg-icons/faBook';\nimport { faFlask } from '@fortawesome/pro-solid-svg-icons/faFlask';\nimport { faServer } from '@fortawesome/pro-solid-svg-icons/faServer';\nimport { faHtml5 } from '@fortawesome/free-brands-svg-icons/faHtml5';\n// import { faCss3 } from '@fortawesome/free-brands-svg-icons/faCss3';\n\nimport { safeParse } from '@platform/utils/json';\nimport { safeLoad } from '@platform/utils/yaml';\n\nexport const defaultFileContents = {\n  hub: {\n    title: 'New Hub',\n    header: {\n      nav: {\n        left: [],\n        center: [],\n        right: [\n          {\n            title: 'Help',\n            path: 'https://docs.stoplight.io',\n          },\n        ],\n      },\n    },\n    pages: {\n      '/': {\n        title: 'Home',\n        data: {\n          blocks: [\n            {\n              type: 'text',\n              data:\n                '# Welcome to your new hub. \\n\\nIts kind of empty in here - click the **\"Design\"** button at the top of the editor to switch to edit mode to add new pages, content, and subpages!\\n\\nUse references to power parts of your Hub with other files in this project (like Modeling/OAS/Swagger files).',\n            },\n          ],\n        },\n      },\n    },\n  },\n\n  oas2: {\n    swagger: '2.0',\n    info: {\n      title: 'My API',\n      version: '1.0',\n    },\n    host: 'example.com',\n    paths: {},\n  },\n\n  oas3: {\n    openapi: '3.0.0',\n    info: {\n      title: 'My API',\n      version: '1.0.0',\n    },\n    paths: {},\n  },\n\n  scenarios: {\n    scenarioVersion: '1.1',\n    scenarios: {},\n  },\n\n  prism: {\n    apis: [],\n    rules: [],\n  },\n\n  markdown: `# Header\n\nA paragraph of content.\n`,\n};\n\nexport const getDefaultFileContents = ({ type, name, filePath }) => {\n  const contents = defaultFileContents[type];\n  if (!contents) return '';\n\n  if (name) {\n    switch (type) {\n      case 'hub':\n        contents.title = `${_.startCase(name)} Hub`;\n        break;\n      case 'oas2':\n        contents.info.title = `${_.startCase(name)} API`;\n        break;\n\n      case 'oas3':\n        contents.info.title = `${_.startCase(name)} API`;\n        break;\n      default:\n        break;\n    }\n  }\n\n  return contents;\n};\n\n// \"{extension}.{fileType}\" or \"(anything).{extension}.{fileType}\"\nexport const defaultFileFilter = {\n  documentation: [/(^|.*?\\.)hub\\.(json|y(a?)ml)$/],\n  modeling: [/(^|.*?\\.)oas(2|3)\\.(json|y(a?)ml)$/],\n  testing: [/(^|.*?\\.)scenarios\\.(json|y(a?)ml)$/],\n  servers: [/(^|.*?\\.)prism\\.(json|y(a?)ml)$/],\n  markdown: [/.*?\\.md$/],\n  html: [/.*?\\.html$/],\n  // css: [/.*?\\.html$/],\n  config: [/((^|.*?\\.)stoplight\\.(json|y(a?)ml)$)/, /^lint.yml$/],\n};\n\nexport const publishFileFilter = _.pick(defaultFileFilter, ['documentation', 'modeling']);\n\nexport const filterMap = {\n  modeling: {\n    type: 'oas',\n    name: 'API Reference',\n    label: 'NAME',\n    placeholder: 'for example, \"Payments Service\"',\n    icon: faPuzzlePiece,\n    iconName: 'puzzle',\n    subTypes: [\n      { type: 'oas2', name: 'OpenAPI v2', extension: 'oas2.yml' },\n      { type: 'oas3', name: 'OpenAPI v3', extension: 'oas3.yml' },\n    ],\n  },\n  markdown: {\n    type: 'markdown',\n    name: 'Article',\n    label: 'ARTICLE TITLE',\n    placeholder: 'for example, \"Getting Started\"',\n    extension: 'md',\n    icon: faPencilAlt,\n    iconName: 'pencil',\n    requireName: true,\n  },\n  testing: {\n    type: 'scenarios',\n    label: 'NAME',\n    placeholder: 'for example, \"User Tests\"',\n    name: 'Test Suite',\n    extension: 'scenarios.yml',\n    icon: faFlask,\n    iconName: 'flask',\n  },\n  html: {\n    type: 'html',\n    name: 'HTML Page',\n    extension: 'html',\n    icon: faHtml5,\n    iconName: 'html5',\n    requireName: true,\n  },\n  // css: { type: 'css', extension: 'css', icon: faCss3, requireName: true },\n  documentation: {\n    type: 'hub',\n    name: 'Hub',\n    extension: 'hub.yml',\n    icon: faBook,\n    iconName: 'book',\n    deprecated: true,\n  },\n  servers: {\n    type: 'prism',\n    name: 'Prism Server',\n    extension: 'prism.yml',\n    icon: faServer,\n    iconName: 'server',\n    deprecated: true,\n  },\n  config: {\n    type: 'config',\n    extension: 'yml',\n    noName: true,\n    noAdd: true,\n    noRemove: true,\n  },\n};\n\nexport const filterFiles = ({ files = [], fileFilter = defaultFileFilter }) => {\n  const filtered = {};\n\n  // filter the files\n  _.forEach(files, file => {\n    _.forEach(fileFilter, (filter, name) => {\n      filtered[name] = filtered[name] || [];\n\n      _.forEach(filter, matcher => {\n        if (file.path.match(matcher)) {\n          filtered[name].push(file);\n        }\n      });\n    });\n  });\n\n  // sort the filtered files alphabetically\n  _.forEach(filtered, (files, filter) => {\n    filtered[filter] = _.sortBy(files, ['record.data.name', 'name']);\n  });\n\n  return filtered;\n};\n\nexport const findFileType = ({\n  filePath,\n  contentType,\n  contents,\n  fileFilter = defaultFileFilter,\n}) => {\n  if (!filePath && !contentType && !contents) return;\n\n  // remove hashes and query strings\n  const cleanedFilePath = _.replace(filePath, /(\\?|\\#).*$/, '');\n\n  let fileType = _.findKey(fileFilter, (filter, key) => {\n    return _.find(filter, matcher => matcher.test(cleanedFilePath));\n  });\n\n  if (fileType) {\n    return fileType;\n  }\n\n  if (contentType) {\n    if (contentType === 'text/html') {\n      return 'html';\n    } else if (contentType === 'text/markdown') {\n      return 'markdown';\n    }\n  }\n\n  if (contents) {\n    if (typeof contents !== 'object') {\n      if (/\\.json$/.test(cleanedFilePath)) {\n        contents = safeParse(contents, contents);\n      } else if (/\\.y(a?)ml$/.test(cleanedFilePath)) {\n        contents = safeLoad(contents, contents);\n      }\n    }\n\n    if (typeof contents === 'object') {\n      if (contents.swagger || contents.openapi) {\n        return 'modeling';\n      } else if (contents.scenarioVersion) {\n        return 'testing';\n      } else if (contents.pages) {\n        return 'documentation';\n      }\n    }\n  }\n\n  return fileType;\n};\n\nexport const findFileSubType = ({\n  filePath,\n  contentType,\n  contents,\n  fileFilter = defaultFileFilter,\n}) => {\n  if (!filePath && !contentType && !contents) return;\n\n  // remove hashes and query strings\n  const cleanedFilePath = _.replace(filePath, /(\\?|\\#).*$/, '');\n\n  if (contents) {\n    if (typeof contents !== 'object') {\n      if (/\\.json$/.test(cleanedFilePath)) {\n        contents = safeParse(contents, contents);\n      } else if (/\\.y(a?)ml$/.test(cleanedFilePath)) {\n        contents = safeLoad(contents, contents);\n      }\n    }\n\n    if (typeof contents === 'object') {\n      if (contents.swagger) {\n        return 'oas2';\n      } else if (contents.openapi) {\n        return 'oas3';\n      }\n    }\n  }\n\n  return fileType;\n};\n","import _ from 'lodash';\n\nimport { route } from '../objectRouter';\nimport { pathToHash } from '../history';\nimport { createURL } from '../url';\nimport { defaultHub } from '../hubs';\nimport { cleanCollection, defaultCollection } from '../collections';\nimport { cleanSpec, defaultSpec } from '../specs';\nimport { cleanInstance, defaultInstance } from '../instances';\nimport { findFileType } from '../projects';\n\nexport const getEntityTypes = () => {\n  return ['specs', 'collections', 'hubs', 'instances'];\n};\n\nexport const getEntityKeys = () => {\n  return ['spec', 'collection', 'hub', 'instance'];\n};\n\nexport const getEntityKey = (entity = 'specs') => {\n  return _.trimEnd(entity, 's');\n};\n\nexport const getEntityServiceKey = (entity = 'specs', serviceType) => {\n  const entityKey = getEntityKey(entity);\n\n  return `${entityKey}${serviceType ? _.capitalize(serviceType) : ''}Service`;\n};\n\nexport const getEntityEditorStoreKey = (entity = 'specs') => {\n  if (entity === 'hubs') {\n    return 'fileStore';\n  }\n\n  const entityKey = getEntityKey(entity);\n\n  return `${entityKey}EditorStore`;\n};\n\nexport const getEntityTeamServiceKey = (entity = 'specs') => {\n  const entityKey = getEntityKey(entity);\n\n  return `team${_.capitalize(entityKey)}Service`;\n};\n\nexport const getEntityName = (entity = 'specs') => {\n  switch (entity) {\n    case 'orgs':\n      return 'Organization';\n    case 'teams':\n      return 'Team';\n    case 'specs':\n      return 'API Spec';\n    case 'collections':\n      return 'Collection';\n    case 'instances':\n      return 'Instance';\n    case 'hubs':\n      return 'Hub';\n    default:\n      return 'Entity';\n  }\n};\n\nexport const getEntityModule = (entity = 'specs') => {\n  switch (entity) {\n    case 'specs':\n      return 'modeling';\n    case 'collections':\n      return 'scenarios';\n    case 'instances':\n      return 'prism';\n    case 'hubs':\n      return 'docs';\n    default:\n      return 'Entity';\n  }\n};\n\nexport const getEntityTabName = (entity = 'specs') => {\n  switch (entity) {\n    case 'orgs':\n      return 'Organizations';\n    case 'teams':\n      return 'Teams';\n    case 'specs':\n      return 'Modeling';\n    case 'collections':\n      return 'Testing';\n    case 'instances':\n      return 'Prism';\n    case 'hubs':\n      return 'Docs';\n    default:\n      return 'UNKNOWN';\n  }\n};\n\nexport const getEntityDescription = (entity = 'specs') => {\n  switch (entity) {\n    case 'orgs':\n      return 'Organizations group together people, data, and billing.';\n    case 'teams':\n      return 'Teams make it easier to control access for groups of people.';\n    case 'specs':\n      return 'Design APIs with our visual OAS (Swagger 2) editor.';\n    case 'collections':\n      return 'Debug, test, and orchestrate APIs.';\n    case 'instances':\n      return 'Spin up mock APIs, validate HTTP traffic, and more.';\n    case 'hubs':\n      return 'Beautiful technical documentation.';\n    default:\n      return 'Please select a valid type below.';\n  }\n};\n\nexport const getEntityIcon = (entity = 'specs') => {\n  switch (entity) {\n    case 'orgs':\n      return 'sitemap';\n    case 'teams':\n      return 'users';\n    case 'specs':\n      return 'puzzle';\n    case 'collections':\n      return 'flask';\n    case 'instances':\n      return 'database';\n    case 'hubs':\n      return 'book';\n    default:\n      return 'question';\n  }\n};\n\nexport const getEntityPropId = (entity = 'specs') => {\n  return `${getEntityKey(entity)}Id`;\n};\n\nexport const getEntityFileName = entity => {\n  switch (entity) {\n    case 'specs':\n      return 'oas2.yml';\n    case 'collections':\n      return 'scenarios.yml';\n    case 'instances':\n      return 'prism.yml';\n    case 'hubs':\n      return 'hub.yml';\n  }\n};\n\nexport const getEntityDefaultContent = entity => {\n  switch (entity) {\n    case 'specs':\n      return defaultSpec;\n    case 'collections':\n      return defaultCollection;\n    case 'instances':\n      return defaultInstance;\n    case 'hubs':\n      return defaultHub;\n  }\n};\n\nexport const hideCrumbs = (entity = 'specs') => {\n  return entity === 'hubs';\n};\n\nexport const supportsViewer = (entity = 'specs') => {\n  return _.includes(['specs', 'hubs'], entity);\n};\n\nexport const supportsConnections = (entity = 'specs') => {\n  return entity !== 'hubs';\n};\n\nexport const getEntityData = (entity = 'specs') => {\n  return {\n    type: entity,\n    tabName: getEntityTabName(entity),\n    name: getEntityName(entity),\n    module: getEntityModule(entity),\n    icon: getEntityIcon(entity),\n    key: getEntityKey(entity),\n    description: getEntityDescription(entity),\n    idProp: getEntityPropId(entity),\n    hideCrumbs: hideCrumbs(entity),\n    supportsViewer: supportsViewer(entity),\n    supportsConnections: supportsConnections(entity),\n\n    editorStoreKey: getEntityEditorStoreKey(entity),\n    serviceKey: getEntityServiceKey(entity),\n    connectionServiceKey: getEntityServiceKey(entity, 'connection'),\n    memberServiceKey: getEntityServiceKey(entity, 'member'),\n    teamServiceKey: getEntityTeamServiceKey(entity),\n    entityTeamServiceKey: getEntityServiceKey(entity, 'team'),\n    entityEnvironmentServiceKey: getEntityServiceKey(entity, 'environment'),\n\n    fileName: getEntityFileName(entity),\n    defaultContent: getEntityDefaultContent(entity),\n\n    buildExportUrl: e => buildExportUrl({ entityType: entity, entity: e }),\n  };\n};\n\nexport const getEntityTypesWithData = () => {\n  const entityTypes = getEntityTypes();\n  return _.map(entityTypes, getEntityData);\n};\n\n// turn\n// http://api.stoplight.io/orgs/stoplight/specs/common/export.json?token=123#/definitions/User\n// OR\n// http://exporter.stoplight.io/stoplight/specs/common.json?token=123#/definitions/User\n// into {path}#/definitions/User\nexport const _exportUrlToSrn = _.memoize(url => {\n  if (!url) {\n    return url;\n  }\n\n  const parsed = createURL(url);\n  if (!parsed || !parsed.pathname) {\n    return url;\n  }\n\n  return `${_.trim(parsed.pathname, '/')}${parsed.hash}`;\n});\nexport const exportUrlToSrn = ({ url }) => {\n  return _exportUrlToSrn(url);\n};\n\nexport const computeSrnData = srn => {\n  const parts = _.take(_.compact(_.split(srn, '/')), 3);\n  let computedSrn = parts.join('/');\n\n  // srn must have two slashes to be valid (org/specs/foo for example)\n  if (parts.length < 3) {\n    return undefined;\n  }\n\n  return {\n    orgId: parts[0],\n    type: parts[1],\n    entityId: parts[2],\n    srn: computedSrn,\n  };\n};\n\nexport const extractSrn = data => {\n  if (_.isEmpty(data)) {\n    return undefined;\n  }\n\n  // swagger is stored in extension\n  // scenario is stored in root @ id\n  const srn = _.get(data, 'info.x-stoplight.id') || _.get(data, 'id');\n\n  return computeSrnData(srn);\n};\n\nexport const cleanEntity = (entity = 'specs', data) => {\n  let cleanedData = data;\n\n  switch (entity) {\n    case 'collections':\n      cleanedData = cleanCollection({ collection: data });\n      break;\n    case 'specs':\n      cleanedData = cleanSpec({ spec: data });\n      break;\n    case 'instances':\n      cleanedData = cleanInstance({ instance: data });\n      break;\n    default:\n      break;\n  }\n\n  return cleanedData;\n};\n\nexport const buildExportUrl = ({ entity = {}, deref, path }) => {\n  let url = entity.exportUrl;\n\n  const query = [];\n\n  if (deref) {\n    query.push(`deref=${deref}`);\n  }\n\n  if (!_.isEmpty(query)) {\n    url += `?${query.join('&')}`;\n  }\n\n  if (path) {\n    url += `#/${_.trim(path, '#/')}`;\n  }\n\n  return url;\n};\n\n// computes an object that can be fed into the SortableTreeList component\nexport const computeTreeData = (sortedData, opts) => {\n  const {\n    data,\n    currentPath,\n    depth = 0,\n    treePath,\n    location,\n    editor,\n    meta = {},\n    hideItemActions,\n    pathRouting,\n    openByDefaultToDepth = 0,\n    routeFunc, // used by hubs (new base fileStore routing system)\n  } = opts;\n\n  const folders = [];\n\n  for (const f in sortedData) {\n    if (!Object.prototype.hasOwnProperty.call(sortedData, f)) continue;\n\n    let currentTreePath = treePath.concat([f]);\n    const stringifiedCurrentTreePath = currentTreePath.join('/');\n\n    let configOpts;\n    if (routeFunc) {\n      configOpts = routeFunc(currentTreePath) || {};\n    } else if (editor.contentRouter) {\n      configOpts = _.get(route(editor.contentRouter, currentTreePath), 'sidebarOptions', {});\n    }\n\n    const {\n      childLinkFactory,\n      parseChildrenBasePath,\n      parseChildren,\n      parseChildrenOnly,\n      noDefaultActions,\n      actionsFactory,\n      iconFactory,\n      tokenFactory,\n      nameFactory,\n      classNameFactory,\n      metaFactory,\n      icon,\n      activeIcon,\n      openByDefault,\n      linkable,\n    } = configOpts;\n\n    const isEmpty =\n      _.isEmpty(sortedData[f]) || _.isNull(sortedData[f]) || _.isUndefined(sortedData[f]);\n\n    // are we looking at this folder specifically?\n    const isActive = !_.isEmpty(currentPath) && _.isEqual(currentPath, currentTreePath);\n\n    // are this folders children active?\n    // find the intersection, going in order, ie:\n    // currentPath: [a, b, c, d]\n    // path: [a, d]\n    // = [a]\n    const intersection = [];\n    for (const i in currentPath) {\n      if (currentTreePath[i] === currentPath[i]) {\n        intersection.push(currentPath[i]);\n      }\n    }\n    const childActive = currentPath.length > depth + 1 && _.isEqual(intersection, currentTreePath);\n\n    const removePath = editor.removePath\n      ? e => {\n          e.preventDefault();\n          e.stopPropagation();\n          editor.removePath(currentTreePath);\n          return false;\n        }\n      : undefined;\n\n    let actions =\n      _.has(data, currentTreePath) && !noDefaultActions && !hideItemActions && removePath\n        ? [\n            {\n              id: 'remove',\n              icon: 'trash',\n              type: 'negative',\n              onClick: removePath,\n            },\n          ]\n        : [];\n\n    if (!hideItemActions && actionsFactory) {\n      actions = [\n        ...actionsFactory(f, sortedData[f], { ...opts, parsedPath: currentTreePath }),\n        ...actions,\n      ];\n    }\n    const isMuted = isEmpty && depth < 1;\n\n    let folderIcon;\n    const iconIsActive = isActive || childActive;\n    if (iconFactory) {\n      folderIcon = iconFactory(f, sortedData[f], iconIsActive, opts);\n    } else {\n      folderIcon = iconIsActive && activeIcon ? activeIcon : icon;\n    }\n\n    const folder = {\n      name: nameFactory ? nameFactory(f, sortedData[f], opts) : f,\n      icon: folderIcon,\n      token: tokenFactory ? tokenFactory(f, sortedData[f], opts) : undefined,\n      className: classNameFactory ? classNameFactory(f, sortedData[f], opts) : undefined,\n      meta: metaFactory ? metaFactory(f, sortedData[f], opts) : meta[stringifiedCurrentTreePath],\n      isActive: childLinkFactory ? false : isActive,\n      isMuted,\n      childActive,\n      openByDefault: openByDefault || depth < openByDefaultToDepth,\n      actions,\n      pathRouting,\n      parsedPath: currentTreePath,\n    };\n\n    if (parseChildren) {\n      let targetChildrenBasePath = [f];\n      if (parseChildrenBasePath) {\n        targetChildrenBasePath = targetChildrenBasePath.concat(parseChildrenBasePath);\n      }\n\n      let targetChildren = _.get(sortedData, targetChildrenBasePath);\n      if (_.isArray(parseChildren)) {\n        targetChildren = _.pick(targetChildren, parseChildren);\n      }\n\n      let nextTreePath = currentTreePath;\n      if (parseChildrenOnly && _.get(targetChildren, 'children')) {\n        targetChildren = targetChildren.children;\n        nextTreePath = currentTreePath;\n        if (!_.isEmpty(parseChildrenBasePath)) {\n          nextTreePath = nextTreePath.concat(parseChildrenBasePath);\n        }\n        nextTreePath = nextTreePath.concat('children');\n      }\n\n      if (!_.isEmpty(targetChildren)) {\n        folder.children = computeTreeData(targetChildren, {\n          data,\n          currentPath,\n          depth: depth + 1,\n          treePath: nextTreePath,\n          location,\n          editor,\n          meta,\n          openByDefault,\n          pathRouting,\n          hideItemActions,\n          noDefaultActions,\n          routeFunc,\n          actions:\n            !isMuted && removePath\n              ? [\n                  {\n                    id: 'remove',\n                    icon: 'trash',\n                    type: 'negative',\n                    onClick: removePath,\n                  },\n                ]\n              : [],\n        });\n      }\n    }\n\n    let href = {};\n\n    if (pathRouting) {\n      href = {\n        pathname: location.pathname,\n        query: {\n          ...(location.query || {}),\n          view: pathToHash({ path: currentTreePath }),\n        },\n      };\n    } else {\n      href = {\n        pathname: location.pathname,\n        query: {\n          ...(location.query || {}),\n          edit: pathToHash({ path: currentTreePath }),\n        },\n      };\n    }\n\n    if (linkable || !parseChildren) {\n      folder.href = href;\n    }\n\n    if (childLinkFactory) {\n      folder.children = folder.children || [];\n      folder.children.unshift({\n        ...childLinkFactory(f, sortedData[f], opts),\n        href,\n        isActive,\n      });\n    }\n\n    if (folder.isMuted && folder.items) {\n      // don't show muted empty folders\n    } else {\n      folders.push(folder);\n    }\n  }\n\n  return folders;\n};\n\n/*\n * Connecting a spec to an instance or collection does nothing to enhance\n * the spec. Connecting spec1 to spec2 does enhance spec1, because you can\n * now add $refs in spec1 that point to spec2.\n */\nexport const getAllowedConnections = (direction, currentType) => {\n  const allowedConnections = {\n    specs: {\n      outbound: ['specs', 'instances'],\n      inbound: ['specs', 'collections', 'instances'],\n    },\n    collections: {\n      outbound: ['specs'],\n      inbound: ['specs', 'instances'],\n    },\n    instances: {\n      outbound: ['specs', 'collections'],\n      inbound: ['specs'],\n    },\n    hubs: {\n      outbound: [],\n      inbound: [],\n    },\n  };\n\n  return _.get(allowedConnections, [currentType, direction], []);\n};\n\nexport const fileTypeToEntityMap = {\n  documentation: 'hubs',\n  modeling: 'specs',\n  testing: 'collections',\n  servers: 'instances',\n};\n\nexport const getEntityDataForFile = ({ file = {} } = {}) => {\n  const fileType = findFileType({ filePath: file.path });\n\n  const entity = fileTypeToEntityMap[fileType];\n\n  if (entity) {\n    return getEntityData(entity);\n  }\n\n  return {};\n};\n","import React from 'react';\nimport { Dropdown } from 'semantic-ui-react';\nimport PropTypes from 'prop-types';\nimport cn from 'classnames';\n\nimport FormInputLabel from '../FormInputLabel';\n\nclass FormDropdown extends React.Component {\n  static propTypes = {\n    className: PropTypes.string,\n    label: PropTypes.string,\n    labelStyle: PropTypes.object,\n    tip: PropTypes.string,\n    size: PropTypes.string,\n    loc: PropTypes.string,\n    required: PropTypes.bool,\n    clearSearchOnSelect: PropTypes.bool,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      searchQuery: '',\n    };\n  }\n\n  clearSearchQuery = () => {\n    this.setState({ searchQuery: '' });\n  };\n\n  handleSearchChange = (event, data) => {\n    this.setState({ searchQuery: data.searchQuery });\n\n    const { onSearchChange } = this.props;\n\n    if (onSearchChange) {\n      onSearchChange(event, data);\n    }\n  };\n\n  handleChange = (event, data) => {\n    const { onChange, clearSearchOnSelect } = this.props;\n\n    if (onChange) {\n      onChange(event, data);\n    }\n\n    if (clearSearchOnSelect) {\n      this.clearSearchQuery();\n    }\n  };\n\n  render() {\n    const {\n      className = '',\n      label,\n      labelStyle,\n      tip,\n      required,\n      size,\n      loc,\n      readOnly,\n      multiple,\n\n      // need clearSearchOnSelect so its not included in dropdownProps\n      clearSearchOnSelect,\n\n      ...dropdownProps\n    } = this.props;\n\n    const { searchQuery } = this.state;\n\n    let value = this.props.value;\n\n    // semantic freaks out if multiple is true and we don't pass an array\n    if (!value && multiple) {\n      value = [];\n    }\n\n    return (\n      <div className={`FormDropdown ${className}`}>\n        {label ? (\n          <FormInputLabel label={label} style={labelStyle} tip={tip} required={required} />\n        ) : null}\n        <Dropdown\n          {...dropdownProps}\n          className={cn('FormDropdown-inner', {\n            [`is-${size}`]: size,\n            [`is-${loc}`]: loc,\n            ['readOnly']: readOnly,\n          })}\n          value={value}\n          multiple={multiple}\n          searchQuery={searchQuery}\n          onSearchChange={this.handleSearchChange}\n          onChange={this.handleChange}\n          onBlur={this.clearSearchQuery}\n        />\n      </div>\n    );\n  }\n}\n\nexport default FormDropdown;\n","import { merge } from 'lodash';\n\nconst cn: any = require('classnames');\n\nimport { IStringObject } from '@core/types';\n\nimport { colors, defaultColor, posX, sizes, themes } from './enums';\n\nexport const paddingXMap = {\n  [sizes.xs]: '2',\n  [sizes.sm]: '2',\n  [sizes.md]: '3',\n  [sizes.lg]: '4',\n  [sizes.xl]: '6',\n};\n\nexport const paddingYMap = {\n  [sizes.xs]: '1',\n  [sizes.sm]: '2',\n  [sizes.md]: '2',\n  [sizes.lg]: '3',\n  [sizes.xl]: '4',\n};\n\nexport const paddingClassName = (\n  {\n    size,\n    iconPos,\n    iconClickable,\n  }: {\n    size: sizes;\n    iconPos?: posX;\n    iconClickable?: boolean;\n  },\n  overrides?: IStringObject<any>\n) => {\n  return cn(\n    merge(\n      {\n        flex: true,\n        'items-center': true,\n        [`px-${paddingXMap[size]}`]: true,\n\n        'pl-0': !iconClickable && iconPos === posX.left,\n        'pr-0': !iconClickable && iconPos === posX.right,\n      },\n      overrides || {}\n    )\n  );\n};\n\nexport const borderClassName = (\n  {\n    size,\n    color = defaultColor,\n    theme,\n    enabled,\n    active,\n    hasBorder,\n    transparent,\n    error,\n  }: {\n    size: sizes;\n    color?: colors;\n    theme?: themes;\n    enabled?: boolean;\n    active?: boolean;\n    hasBorder?: boolean;\n    transparent?: boolean;\n    error?: string;\n  },\n  overrides?: IStringObject<any>\n) => {\n  let classNames = {};\n\n  if (theme) {\n    if (theme === themes.dark) {\n      classNames = {\n        [`border-lighten-200`]: hasBorder && !error && !transparent && !active,\n        [`hover:border-lighten-300`]: enabled && hasBorder && !error,\n        [`border-lighten-300`]: enabled && hasBorder && !error && active,\n        [`focus:border-lighten-300`]: enabled && hasBorder && !error,\n      };\n    } else if (theme === themes.light) {\n      // TODO\n    }\n  } else {\n    const colorVal = colors[color];\n    classNames = {\n      [`border-${colorVal}`]: hasBorder && !error && !transparent && !active,\n      [`hover:border-${colorVal}-dark`]: enabled && hasBorder && !error,\n      [`border-${colorVal}-dark`]: enabled && hasBorder && !error && active,\n      [`focus:border-${colorVal}-dark`]: enabled && hasBorder && !error,\n    };\n  }\n\n  return cn(\n    merge(\n      {\n        'z-0': true,\n        'hover:z-5': true,\n        [`z-1`]: enabled && hasBorder && !error && active,\n        border: hasBorder && size <= sizes.md,\n        'border-2': hasBorder && size > sizes.md,\n        'border-red': hasBorder && error,\n        'border-transparent': !hasBorder || transparent,\n      },\n      classNames,\n      overrides || {}\n    )\n  );\n};\n\nexport const radiusClassName = (\n  {\n    rounded,\n  }: {\n    rounded?: boolean;\n  },\n  overrides?: IStringObject<any>\n) => {\n  return cn(\n    merge(\n      {\n        rounded: !rounded,\n        'rounded-full': rounded,\n      },\n      overrides || {}\n    )\n  );\n};\n\nexport const iconClassName = (\n  {\n    color,\n    size,\n    iconPos,\n    enabled,\n    hasBorder,\n    error,\n    clickable,\n    rounded,\n  }: {\n    color: colors;\n    size: sizes;\n    iconPos: posX;\n    enabled?: boolean;\n    hasBorder?: boolean;\n    error?: string;\n    clickable?: boolean;\n    rounded?: boolean;\n  },\n  overrides?: IStringObject<any>\n) => {\n  const colorVal = colors[color];\n\n  return cn(\n    'flex items-center h-full',\n    merge(\n      {\n        [`px-${paddingXMap[size]}`]: !rounded,\n        'pl-2': iconPos === posX.right && !clickable && !rounded,\n        'pr-2': iconPos === posX.left && !clickable && !rounded,\n\n        'cursor-pointer': enabled && clickable,\n\n        [`hover:bg-${colorVal}-lightest`]: enabled && clickable && hasBorder,\n        [`hover:bg-darken-100`]: enabled && clickable && !hasBorder,\n        'border-l': hasBorder && clickable && iconPos === posX.right,\n        'border-r': hasBorder && clickable && iconPos === posX.left,\n        'border-red': hasBorder && error,\n        [`border-${colorVal}`]: hasBorder && !error,\n        [`hover:border-${colorVal}-dark`]: hasBorder && !error,\n        'bg-darken-least': clickable && !hasBorder,\n      },\n      overrides || {}\n    )\n  );\n};\n","import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\n\nexport interface IPortal {\n  children: any;\n  className?: string;\n}\n\nexport class Portal extends React.PureComponent<IPortal> {\n  private el?: HTMLDivElement;\n\n  constructor(props: any) {\n    super(props);\n\n    if (typeof document === 'undefined') return;\n\n    this.el = document.createElement('div');\n\n    if (props.className) {\n      this.el.className = props.className;\n    }\n  }\n\n  public componentDidMount() {\n    if (!this.el) return;\n\n    document.body.appendChild(this.el);\n  }\n\n  public componentWillUnmount() {\n    if (!this.el) return;\n\n    document.body.removeChild(this.el);\n  }\n\n  public render() {\n    if (!this.el) return null;\n\n    return ReactDOM.createPortal(this.props.children, this.el);\n  }\n}\n","import * as React from 'react';\nimport { AutoSizer, List } from 'react-virtualized';\n\nconst cn: any = require('classnames');\n\nimport { IStringObject } from '@core/types';\n\n/**\n * Wraps [react-virtualized](https://github.com/bvaughn/react-virtualized).\n */\n\nexport type rowHeightFunc = (args: { index: number }) => number;\n\nexport type scrollAlignmentOpts = 'auto' | 'start' | 'end' | 'center';\n\n/*\n  Responsible for rendering a single row, given its index. Example:\n\n  ```js\n  const user = list[index]\n\n  // If row content is complex, consider rendering a light-weight placeholder while scrolling.\n  const content = isScrolling\n    ? '...'\n    : <User user={user} />\n\n  // Style is required since it specifies how the row is to be sized and positioned.\n  // React Virtualized depends on this sizing/positioning for proper scrolling behavior.\n  // By default, the List component provides following style properties:\n  //    position\n  //    left\n  //    top\n  //    height\n  //    width\n  // You can add additional class names or style properties as you would like.\n  // Key is also required by React to more efficiently manage the array of rows.\n  return (\n    <div\n      key={key}\n      style={style}\n    >\n      {content}\n    </div>\n  )\n  ```\n */\nexport type rowRendererFunc = (\n  args: {\n    // Unique key within array of rendered rows\n    key: string;\n\n    // Index of row\n    index: number;\n\n    // The List is currently being scrolled\n    isScrolling: boolean;\n\n    // This row is visible within the List (eg it is not an overscanned row)\n    isVisible: boolean;\n\n    // Reference to the parent List (instance)\n    parent: any;\n\n    // Style object to be applied to row (to position it).\n    // This must be passed through to the rendered row element.\n    style: IStringObject<any>;\n  }\n) => React.ReactElement<any>;\n\nexport interface IListScrollerProps {\n  // Number of rows in list.\n  rowCount: number;\n\n  // Either a fixed row height (number) or a function that returns the height of a row given its index.\n  rowHeight: number | rowHeightFunc;\n\n  // Responsible for rendering a row\n  rowRenderer: rowRendererFunc;\n\n  className?: string;\n  noRowsRenderer?: () => JSX.Element;\n  onScroll?: () => void;\n\n  // Controls the alignment scrolled-to-rows.\n  scrollToAlignment?: scrollAlignmentOpts;\n\n  // Row index to ensure visible (by forcefully scrolling if necessary)\n  scrollToIndex?: number;\n\n  // Forced vertical scroll offset; can be used to synchronize scrolling between components\n  scrollTop?: number;\n}\n\nexport class ListScroller extends React.Component<IListScrollerProps> {\n  private list: any;\n\n  public render() {\n    const {\n      rowCount,\n      rowHeight,\n      rowRenderer,\n      className,\n      noRowsRenderer,\n      onScroll,\n      scrollToAlignment,\n      scrollToIndex,\n      scrollTop,\n    } = this.props;\n\n    return (\n      <AutoSizer className={cn(className)}>\n        {({ width, height }: { width: any; height: any }) => (\n          <List\n            ref={(elem: any) => {\n              this.list = elem;\n            }}\n            width={width}\n            height={height}\n            rowCount={rowCount}\n            rowHeight={rowHeight}\n            rowRenderer={rowRenderer}\n            noRowsRenderer={noRowsRenderer}\n            onScroll={onScroll}\n            scrollToAlignment={scrollToAlignment}\n            scrollToIndex={scrollToIndex}\n            scrollTop={scrollTop}\n          />\n        )}\n      </AutoSizer>\n    );\n  }\n\n  /**\n   * Scroll to the specified offset. Useful for animating position changes.\n   */\n  protected scrollToPosition = (scrollTop: number) => {\n    if (this.list) {\n      this.list.scrollToPosition(scrollTop);\n    }\n  };\n\n  /**\n   * Ensure row is visible. This method can be used to safely scroll back to a cell that a user has\n   * scrolled away from even if it was previously scrolled to.\n   */\n  protected scrollToRow = (index: number) => {\n    if (this.list) {\n      this.list.scrollToRow(index);\n    }\n  };\n}\n","import _ from 'lodash';\n\nimport { isExternalLink, cleanSlashes } from '@platform/utils/url';\n\n/**\n * openByDefaultToDepth - open if we're at this depth\n * depth - current depth in file tree\n * page - the current page\n * basePath - the full nested path\n * activePath - the current active path\n * buildPath - function that builds the path\n */\nconst computeFolder = props => {\n  const { openByDefaultToDepth = 0, depth = 0, basePath, activePath, buildPath } = props;\n  const page = props.page || {};\n\n  const { title, route = {}, data = {}, config } = page;\n  const path = route.path;\n\n  const hasChildren = !_.isEmpty(data.children);\n  const hasContent = !_.isEmpty(data.blocks);\n\n  const folder = {\n    name: title || 'Un-named',\n  };\n\n  if (depth === 0) {\n    folder.noToggle = true;\n  }\n\n  if (depth < openByDefaultToDepth) {\n    folder.openByDefault = true;\n  }\n\n  if (hasContent) {\n    folder.hasContent = true;\n  }\n\n  const tokenName = _.get(config, ['sidebar', 'token']);\n  const tokenIcon = _.get(config, ['sidebar', 'icon']);\n\n  if (tokenName || tokenIcon) {\n    folder.token = {\n      name: tokenName,\n      icon: tokenIcon,\n    };\n  }\n\n  const meta = _.get(config, ['sidebar', 'meta']);\n\n  if (meta) {\n    folder.meta = meta;\n  }\n\n  if (_.isEmpty(path)) {\n    folder.isDivider = true;\n  } else if (isExternalLink(path)) {\n    folder.icon = 'external';\n    folder.href = path;\n  } else {\n    folder.path = cleanSlashes(`/${basePath}/${path}`);\n\n    if (hasContent || !hasChildren) {\n      folder.href = buildPath ? cleanSlashes(buildPath(folder.path)) : folder.path;\n    }\n\n    if (hasChildren) {\n      folder.children = _.map(data.children, child => {\n        return computeFolder({\n          openByDefaultToDepth,\n          depth: depth + 1,\n          page: child,\n          basePath: folder.path,\n          activePath,\n          buildPath,\n        });\n      });\n    }\n  }\n\n  return folder;\n};\n\nexport const computeTree = (notUsed, props = {}) => {\n  const { buildPath, children, basePath = '', activePath = '' } = props;\n\n  if (_.isEmpty(children)) return null;\n\n  const section = {};\n\n  const treeData = _.map(children, child =>\n    computeFolder({\n      openByDefaultToDepth: 1,\n      page: child,\n      basePath,\n      activePath,\n      buildPath,\n    })\n  );\n\n  if (treeData.length) {\n    section.treeData = treeData;\n  }\n\n  return [section];\n};\n","import _ from 'lodash';\n\nimport { replaceVariables } from '@platform/utils/variables';\nimport { cleanSlashes } from '@platform/utils/url';\n\nimport * as sidebar from './sidebar/viewer';\nexport const sidebarUtils = sidebar;\n\n// Notes on this in the utils/index file\nexport const blockConfig = {\n  text: {\n    padded: true,\n\n    solo: {\n      padded: true,\n    },\n\n    nested: {\n      padded: true,\n    },\n  },\n\n  code: {\n    padded: true,\n    standalone: true,\n    outlined: true,\n\n    solo: {\n      padded: false,\n      outlined: false,\n    },\n\n    nested: {\n      padded: true,\n      outlined: false,\n      canvas: true,\n    },\n  },\n\n  tabs: {\n    padded: true,\n    standalone: true,\n\n    solo: {\n      padded: false,\n      outlined: false,\n    },\n  },\n\n  jsonSchema: {\n    padded: true,\n    standalone: true,\n    outlined: true,\n\n    solo: {\n      padded: false,\n      outlined: false,\n    },\n\n    nested: {\n      padded: true,\n      outlined: false,\n    },\n  },\n\n  http: {\n    padded: true,\n    standalone: true,\n    paddedInner: true,\n    canvas: true,\n\n    solo: {\n      padded: false,\n      canvas: false,\n    },\n  },\n\n  image: {\n    padded: true,\n    standalone: true,\n\n    nested: {\n      padded: true,\n    },\n  },\n\n  callout: {\n    padded: true,\n    standalone: true,\n    paddedInner: true,\n\n    nested: {\n      padded: true,\n    },\n  },\n\n  html: {\n    padded: true,\n\n    solo: {\n      padded: false,\n    },\n\n    nested: {\n      padded: true,\n    },\n  },\n\n  container: {\n    padded: true,\n    outlined: true,\n  },\n\n  hero: {},\n  barList: {},\n  cardList: {},\n  operation: {},\n  ref: {},\n\n  accordion: {\n    padded: true,\n    standalone: true,\n    outlined: true,\n\n    solo: {\n      padded: false,\n      outlined: false,\n    },\n  },\n};\n\n/**\n * Iterate recursively through subpage tree to build up a path to the first routable subpage with\n * blocks.\n */\nexport const findFirstSubpagePath = ({ subpages = [], basePath = '', pathTree = '' }) => {\n  let path = '';\n\n  _.forOwn(subpages, subpage => {\n    path = `${_.get(subpage, 'route.path', '')}`;\n\n    if (path && !_.isEmpty(_.get(subpage, 'data.blocks'))) {\n      path = `${pathTree}${path}`;\n    } else if (!_.isEmpty(_.get(subpage, 'data.children'))) {\n      path = `${findFirstSubpagePath({\n        subpages: subpage.data.children,\n        pathTree: `${pathTree}${path}`,\n      })}`;\n    }\n\n    if (path) {\n      return false;\n    }\n  });\n\n  return `${basePath}${path}`.replace('//', '/');\n};\n\nexport const findPageByPath = props => {\n  const { pages = {}, path = '/' } = props;\n\n  const collectedData = {\n    data: undefined, // the found page data\n    treePath: [], // path to page in the tree structure we use for things like sidebar (n/a here)\n    parsedPath: [], // path to page in parsed property\n  };\n\n  const pathParts = _.split(path, '/');\n\n  let pagePath = _.findKey(pages, (page, pathPath) => {\n    return `/${pathParts[1]}` === pathPath;\n  });\n\n  // if we couldn't find a specific page but have a root route, use it\n  if (!pagePath && pages['/']) {\n    pagePath = '/';\n  }\n\n  const page = pages[pagePath];\n\n  if (page) {\n    collectedData.data = {\n      path: pagePath,\n      ...page,\n    };\n    collectedData.parsedPath = ['pages', pagePath];\n  }\n\n  return collectedData;\n};\n\n// Assumes each subpage only has one part, ie /foo/bar is two subpages, with bar nested inside of foo\n// not /foo/bar being one subpage with the path \"/foo/bar\"\nexport const findSubpageByPath = props => {\n  const {\n    subpages = [],\n    pathParts = [],\n    collectedData = {\n      searchedPath: props.pathParts, // helpful to know if we had something to look for but didn't find it (page not found screen)\n      data: undefined, // the found subpage data\n      treePath: [], // path to subpage in the tree structure we use for things like sidebar\n      parsedPath: [],\n    },\n  } = props;\n\n  const path = pathParts[0];\n\n  let foundSubpageIndex;\n  let foundSubpage;\n\n  for (const index in subpages) {\n    if (foundSubpage) break;\n\n    const subpage = subpages[index];\n\n    if (_.get(subpage, 'route.path') === `/${path}`) {\n      foundSubpageIndex = index;\n      foundSubpage = subpage;\n    }\n  }\n\n  if (foundSubpage) {\n    collectedData.data = {\n      ...foundSubpage,\n      path: _.get(foundSubpage, 'route.path'),\n    };\n    collectedData.treePath.push(foundSubpageIndex);\n\n    collectedData.parsedPath = collectedData.parsedPath.concat(['data', 'children']);\n    collectedData.parsedPath.push(foundSubpageIndex);\n  }\n\n  // we're not done searching\n  if (pathParts[1]) {\n    if (_.isEmpty(collectedData, 'data.data.children')) {\n      // doesn't exist\n      collectedData.data = undefined;\n      return collectedData;\n    }\n\n    // recurse through children, passing the path parts minus one part\n    return findSubpageByPath({\n      subpages: _.get(collectedData, 'data.data.children'),\n      pathParts: pathParts.slice(1),\n      collectedData,\n    });\n  }\n\n  return collectedData;\n};\n\n// [pages, /api-reference, data, children, 0]\n// returns compiled route (as a string), like /api-reference/intro\nexport const childToRoute = ({ jsonPath, spec }) => {\n  let route = jsonPath[1];\n\n  _.forEach(jsonPath, (value, index) => {\n    if (_.isFinite(value)) {\n      const path = _.slice(jsonPath, 0, index + 1).concat(['route', 'path']);\n      const childRoute = _.get(spec, path);\n      route += childRoute;\n    }\n  });\n\n  return route;\n};\n\nexport const replaceBlockVariables = ({ block, env }) => {\n  if (_.isEmpty(block)) return {};\n  if (_.isEmpty(env)) return block;\n\n  let data = block.data || {};\n\n  if (data && !_.isEmpty(data.children)) {\n    const children = _.map(_.compact(data.children), child => {\n      const blocks = _.map(_.compact(child.blocks), childBlock =>\n        replaceBlockVariables({ block: childBlock, env })\n      );\n\n      return {\n        ...replaceVariables(child, { env }),\n        blocks,\n      };\n    });\n\n    data = {\n      ...replaceVariables(data, { env }),\n      children,\n    };\n  } else if (block.type !== 'http') {\n    data = replaceVariables(data, { env });\n  }\n\n  return {\n    ...block,\n    data,\n  };\n};\n\nexport const buildViewPath = ({ path = '', version = '', basePath = '' }) => {\n  let viewPath = cleanSlashes(`/${path}`);\n\n  const containsBase = cleanSlashes(\n    `${basePath ? `/${basePath}/` : ''}${version ? `/${version}/` : ''}.*`\n  );\n\n  const re = new RegExp(`^${containsBase}`);\n  if (!re.test(viewPath)) {\n    return cleanSlashes(`/${basePath}/${version}/${viewPath}`);\n  }\n\n  return viewPath;\n};\n","import { difference, get, split, trim } from 'lodash';\n\nexport const getEnv = () => {\n  if (typeof Electron !== 'undefined') {\n    return 'electron';\n  } else if (typeof window !== 'undefined') {\n    return 'browser';\n  } else if (typeof self !== 'undefined') {\n    return 'worker';\n  } else if (typeof process !== 'undefined') {\n    return 'node';\n  }\n};\n\nexport const getConfigVar = path => {\n  let env = getEnv();\n\n  switch (env) {\n    case 'electron':\n      return get(Electron, `env.${path}`);\n    case 'browser':\n      return get(window, `__SL.config.${path}`);\n    case 'worker':\n      return get(self, `__SL.config.${path}`);\n    case 'node':\n      return get(process, `CONFIG.${path}`) || get(process, `env.${path}`);\n  }\n\n  return undefined;\n};\n\nexport const isOnPrem = () => {\n  return getConfigVar('STRIPE_PK') ? false : true;\n};\n\nexport const isStandardAuthDisabled = () => {\n  return !!(\n    getConfigVar('SL_SSO_ENTRYPOINT') ||\n    getConfigVar('GITHUB_URL') ||\n    getConfigVar('SL_LOGIN_PATH')\n  );\n};\n\n// When we decide that a feature goes live we should remove it from this list\nconst ExperimentalFeatures = ['user-projects', 'user-explorer', 'org-explorer'];\n\n// We return the cross section of ENV Vars and ExperimentalFeatures to get the true feature list\nexport const getExperimentalFeatures = () => {\n  let features = getConfigVar('SL_EXPERIMENTAL_FEATURES') || '';\n  features = split(features, ',').map(trim);\n\n  return difference(ExperimentalFeatures, features);\n};\n","import React from 'react';\nimport lunr from 'lunr';\nimport _ from 'lodash';\nimport { inject, observer } from 'mobx-react';\n\nimport FormSearch from '@platform/components/FormSearch';\n\nconst addHighlighting = (str, positions) => {\n  if (!str || !positions.length) {\n    return str || '';\n  }\n\n  let html = [];\n  let previousWordEnd = 0;\n\n  _.forEach(positions, ([wordStart, wordLength], index) => {\n    const wordEnd = wordStart + wordLength;\n\n    // Add all characters from the last word up to the start of this word\n    html.push(<span key={index}>{str.slice(previousWordEnd, wordStart)}</span>);\n\n    // Highlight the matched word\n    html.push(\n      <span key={`match-${index}`} className=\"HubSearch-match\">\n        {str.slice(wordStart, wordEnd)}\n      </span>\n    );\n\n    previousWordEnd = wordEnd;\n  });\n\n  // Add the remaining characters\n  if (previousWordEnd < str.length) {\n    html.push(<span key=\"end\">{str.slice(previousWordEnd, str.length)}</span>);\n  }\n\n  return <React.Fragment>{html}</React.Fragment>;\n};\n\nconst searchLunr = query => {\n  if (!window.LUNR_DATA) return [];\n\n  const idx = lunr.Index.load(window.LUNR_DATA);\n  const results = idx.search(query);\n\n  return results.map((result, key) => {\n    const item = window.LUNR_RESULTS && window.LUNR_RESULTS[result.ref];\n\n    const positions = { t: [], d: [] };\n\n    // There won't be anything to match against if we don't have a result item\n    if (item) {\n      _.forEach(result.matchData.metadata, word => {\n        if (word['t']) {\n          positions['t'] = positions['t'].concat(word['t'].position);\n        }\n\n        if (word['d']) {\n          positions['d'] = positions['d'].concat(word['d'].position);\n        }\n      });\n    }\n\n    return {\n      link: result.ref,\n      title: item ? item['t'] : result.ref,\n      description: item && item['d'],\n      onClick: () => {\n        window.location.pathname = result.ref;\n      },\n      renderer: ({ title, description }) => {\n        return (\n          <React.Fragment>\n            <div className=\"title\">{addHighlighting(title, positions['t'])}</div>\n\n            {description && (\n              <div className=\"description\">{addHighlighting(description, positions['d'])}</div>\n            )}\n          </React.Fragment>\n        );\n      },\n    };\n  });\n};\n\nconst HubSearch = props => {\n  const { ui, updateUi, autoFocus, onBlur, noResultsMessage } = props;\n\n  return (\n    <FormSearch\n      className=\"HubSearch\"\n      placeholder=\"Search...\"\n      value={ui.search}\n      results={ui.results}\n      noResultsMessage={noResultsMessage}\n      onResultSelect={(e, data) => {\n        window.location.pathname = data.link;\n      }}\n      onSearchChange={(e, value) => {\n        updateUi('set', 'search', value);\n        updateUi('set', 'results', searchLunr(value));\n      }}\n      autoFocus={autoFocus}\n      onBlur={onBlur}\n      minCharacters={1}\n      showNoResults\n    />\n  );\n};\n\nexport default inject((stores, props) => {\n  const { appStore } = stores;\n\n  return {\n    ...appStore.injectUi(`HubSearch-${props.id}`),\n  };\n})(observer(HubSearch));\n","import * as enums from './enums';\nimport * as events from './events';\n\nexport * from './enums';\nexport * from './events';\n\nexport { enums, events };\nexport * from './Button';\nexport * from './Card';\nexport * from './Dropdown';\nexport * from './DropdownInput';\nexport * from './Header';\nexport * from './Icon';\nexport * from './Layout';\nexport * from './ListScroller';\nexport * from './Modal';\nexport * from './PanelList';\nexport * from './PanelListItem';\nexport * from './Popup';\nexport * from './Portal';\nexport * from './Sidebar';\nexport * from './TextField';\nexport * from './Toggle';\n","import _ from 'lodash';\nimport aws4 from 'aws4';\nimport OAuth from 'oauth-1.0a';\nimport HmacSHA1 from 'crypto-js/hmac-sha1';\nimport EncBASE64 from 'crypto-js/enc-base64';\nimport HmacSHA256 from 'crypto-js/hmac-sha256';\n\nimport { createURL } from '../url';\nimport { setQuery } from '../query';\nimport { safeStringify } from '../json';\nimport { replaceVariables } from '../variables';\n\nconst AUTH_TYPES = ['basic', 'digest', 'oauth1', 'oauth2', 'aws'];\n\nexport const authUrlOptions = [\n  'https://accounts.google.com/o/oauth2/auth',\n  'https://github.com/login/oauth/authorize',\n  'https://bitbucket.org/api/1.0/oauth/authenticate',\n  'https://www.dropbox.com/1/oauth2/authorize',\n  'https://www.box.com/api/oauth2/authorize',\n  'https://api.createsend.com/oauth?type=web_server',\n  'https://foursquare.com/oauth2/authenticate',\n  'https://launchpad.37signals.com/authorization/new?type=web_server',\n  'https://secure.meetup.com/oauth2/authorize',\n  'https://soundcloud.com/connect',\n  'https://login.live.com/oauth20_authorize.srf',\n  'https://login.uber.com/oauth/v2/authorize',\n  'https://angel.co/api/oauth/authorize',\n  'https://app.asana.com/-/oauth_authorize',\n  'https://accounts.spotify.com/authorize',\n];\n\nexport const accessUrlOptions = [\n  'https://accounts.google.com/o/oauth2/token',\n  'https://github.com/login/oauth/access_token',\n  'https://bitbucket.org/api/1.0/oauth/access_token',\n  'https://www.dropbox.com/1/oauth2/authorize',\n  'https://www.box.com/api/oauth2/token',\n  'https://api.createsend.com/oauth/token',\n  'https://foursquare.com/oauth2/access_token',\n  'https://launchpad.37signals.com/authorization/token',\n  'https://secure.meetup.com/oauth2/access',\n  'https://api.soundcloud.com/oauth2/token',\n  'https://login.live.com/oauth20_token.srf',\n  'https://login.uber.com/oauth/v2/token',\n  'https://angel.co/api/oauth/token',\n  'https://app.asana.com/-/oauth_authorize',\n  'https://accounts.spotify.com/api/token',\n];\n\nexport const updateInputWithAuth = (input, authNode, variables) => {\n  const processedAuthNode = replaceVariables(authNode, {\n    env: variables,\n  });\n\n  let newInput = _.merge({}, input);\n\n  newInput.url = setQuery(newInput.url, input.query);\n\n  const processedUrl = createURL(newInput.url);\n\n  _.set(newInput, 'host', processedUrl.host);\n  _.set(newInput, 'path', processedUrl.pathname + processedUrl.search);\n\n  const patch = generateAuthPatch(processedAuthNode, newInput, {\n    signAws(request, keys) {\n      const newRequest = aws4.sign(request, keys);\n      return newRequest.headers || {};\n    },\n  });\n\n  newInput = _.merge({}, newInput, patch);\n\n  _.unset(newInput, 'host');\n  _.unset(newInput, 'path');\n\n  return newInput;\n};\n\nexport const generateBasicAuth = ({ username, password }, request, options = {}) => {\n  const string = new Buffer([username, password].join(':')).toString('base64');\n\n  return {\n    headers: {\n      Authorization: 'Basic ' + string,\n    },\n  };\n};\n\nconst hashFunction = (method, encode, options = {}) => {\n  return (baseString, key) => {\n    let hash;\n\n    switch (method) {\n      case 'HMAC-SHA1':\n        hash = HmacSHA1(baseString, key);\n        break;\n      case 'HMAC-SHA256':\n        hash = HmacSHA256(baseString, key);\n        break;\n      default:\n        return key;\n    }\n\n    if (encode) {\n      return hash.toString(EncBASE64);\n    }\n\n    return hash.toString();\n  };\n};\n\nexport const generateOAuth1 = (data, request, options = {}) => {\n  let patch = {};\n\n  const signatureMethod = data.signatureMethod || 'HMAC-SHA1';\n\n  const encode = data.encode;\n  const oauth = OAuth({\n    consumer: {\n      key: data.consumerKey,\n      secret: data.consumerSecret,\n    },\n    signature_method: signatureMethod,\n    hash_function: hashFunction(signatureMethod, encode, options),\n    version: data.version || '1.0',\n    nonce_length: data.nonceLength || 32,\n    parameter_seperator: data.parameterSeperator || ', ',\n  });\n\n  let token = null;\n  if (data.token) {\n    token = {\n      key: data.token,\n      secret: data.tokenSecret,\n    };\n  }\n\n  const requestToAuthorize = {\n    url: request.url,\n    method: (request.method || 'get').toUpperCase(),\n    data: request.body,\n  };\n\n  if (_.isEmpty(request.url)) {\n    console.warn('editor/updateAuth parse url error', request.url);\n  }\n\n  const authPatch = oauth.authorize(requestToAuthorize, token);\n  patch.authorization = {\n    oauth1: {\n      nonce: authPatch.oauth_nonce,\n    },\n  };\n\n  if (data.useHeader) {\n    // add to the header\n    const headerPatch = oauth.toHeader(authPatch);\n    patch = {\n      headers: {\n        Authorization: headerPatch.Authorization,\n      },\n    };\n  } else {\n    patch = {\n      query: authPatch,\n    };\n  }\n\n  return patch;\n};\n\nexport const generateOAuth2 = (data, request, options = {}) => {\n  let patch = {};\n\n  if (data.useHeader) {\n    _.unset(request, 'query.access_token');\n    // add to the header\n    patch = {\n      headers: {\n        Authorization: 'Bearer {$$.env.oauth_access_token}',\n      },\n    };\n  } else {\n    _.unset(request, 'headers.Authorization');\n    // add to the query string\n    patch = {\n      query: {\n        access_token: '{$$.env.oauth_access_token}',\n      },\n    };\n  }\n\n  return patch;\n};\n\nexport const generateAws = (data, request, options = {}) => {\n  let patch = {};\n\n  if (!options.signAws) {\n    console.warn('authorization/generateAws signAws function not supplied!');\n    return patch;\n  }\n\n  const requestToAuthorize = {\n    ...request,\n    method: (request.method || 'get').toUpperCase(),\n    body: safeStringify(request.body) || '',\n    service: data.service,\n    region: data.region,\n  };\n\n  const headers = options.signAws(requestToAuthorize, {\n    secretAccessKey: data.secretKey,\n    accessKeyId: data.accessKey,\n    sessionToken: data.sessionToken,\n  });\n\n  // add to the header\n  patch = {\n    headers,\n  };\n\n  return patch;\n};\n\nexport const generateAuthPatch = (authNode, request, options = {}) => {\n  let patch = {};\n  if (!authNode || !_.includes(AUTH_TYPES, authNode.type)) {\n    return patch;\n  }\n\n  if (_.isEmpty(authNode)) {\n    return patch;\n  }\n\n  // unset these so they re-create properly\n  _.unset(request, ['headers', 'X-Amz-Date']);\n  _.unset(request, ['headers', 'X-Amz-Security-Token']);\n\n  switch (authNode.type) {\n    case 'basic':\n      patch = generateBasicAuth(authNode, request, options);\n      break;\n    case 'oauth1':\n      patch = generateOAuth1(authNode, request, options);\n      break;\n    case 'oauth2':\n      patch = generateOAuth2(authNode, request, options);\n      break;\n    case 'aws':\n      patch = generateAws(authNode, request, options);\n      break;\n    default:\n      console.warn(authNode.type, 'auth not implemented');\n      break;\n  }\n\n  return patch;\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport { inject } from 'mobx-react';\n\nimport { URI } from '@core/uri';\n\nimport { stringifyQuery, parseQuery } from '../query';\n\nimport { Link as NavLink } from './NavLink';\n\n// A wrapper around the stoplight/ui Link\nconst Link = props => {\n  const { routerStore, to, href, ...linkProps } = props;\n\n  let target = href || to;\n  let pathname;\n  let query;\n  let hash;\n\n  if (typeof target === 'object') {\n    pathname = target.pathname;\n    query = target.query;\n    hash = target.hash;\n  } else {\n    const parts = _.split(target, '?');\n    pathname = parts[0];\n\n    const other = _.split(parts[1], '#');\n    query = parseQuery(other[0] || '');\n    hash = other[1] ? `#${other[1]}` : '';\n  }\n\n  // Used by the Hub-Builder to preserve __build_id\n  if (!_.isEmpty(routerStore.globalQueryParams)) {\n    query = Object.assign({}, query, routerStore.globalQueryParams);\n  }\n\n  query = stringifyQuery(query);\n\n  let url = pathname;\n\n  // Make sure theres no trailing ?\n  if (query) {\n    url += `?${query}`;\n  }\n\n  if (hash) {\n    url += hash;\n  }\n\n  return <NavLink {...linkProps} uri={URI.parse(url)} />;\n};\n\nexport default inject('routerStore')(Link);\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { Search } from 'semantic-ui-react';\n\nimport FormInputLabel from '../FormInputLabel';\n\nclass SearchComponent extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      results: props.results || [],\n    };\n  }\n\n  componentWillMount() {\n    this.filterResults(this.props.value);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!_.isEqual(this.props.results, nextProps.results)) {\n      this.setState({ results: nextProps.results });\n    }\n  }\n\n  isCategory = () => {\n    const { results } = this.props;\n\n    return _.isArray(results) ? false : true;\n  };\n\n  filterResults = value => {\n    const { filterResults, results } = this.props;\n\n    if (filterResults) {\n      if (_.isEmpty(value)) {\n        this.setState({ results });\n      } else {\n        const re = new RegExp(_.escapeRegExp(value), 'i');\n\n        if (this.isCategory()) {\n          const newResults = {};\n\n          _.forEach(results, (category, key) => {\n            const categoryResults = _.filter(category.results, result => {\n              return re.test(result.title) || re.test(result.value);\n            });\n\n            if (categoryResults.length) {\n              newResults[key] = {\n                ...category,\n                results: categoryResults,\n              };\n            }\n          });\n\n          this.setState({ results: newResults });\n        } else {\n          this.setState({\n            results: _.filter(results, result => {\n              return re.test(result.title) || re.test(result.value);\n            }),\n          });\n        }\n      }\n    }\n  };\n\n  onSearchChange = (e, { value }) => {\n    const { onSearchChange } = this.props;\n\n    if (onSearchChange) {\n      onSearchChange(e, value);\n    }\n\n    this.filterResults(value);\n  };\n\n  onResultSelect = (e, data = {}) => {\n    const { onResultSelect } = this.props;\n    const { result } = data;\n\n    if (onResultSelect) {\n      onResultSelect(e, result);\n    }\n\n    this.filterResults();\n  };\n\n  render = () => {\n    const {\n      className,\n      label,\n      tip,\n      required,\n      filterResults,\n      transparent,\n      showResultsOnClick,\n      inputProps = {},\n      ...searchProps\n    } = this.props;\n\n    let results = this.props.results || [];\n\n    if (filterResults) {\n      results = this.state.results;\n    }\n\n    return (\n      <div\n        className={cn('FormSearch', {\n          [className]: className,\n          transparent,\n        })}\n      >\n        <FormInputLabel label={label} tip={tip} required={required} />\n\n        <Search\n          label={label && typeof label !== 'string' ? label : null}\n          minCharacters={0}\n          showNoResults={false}\n          category={this.isCategory(results)}\n          onClick={() => {\n            if (showResultsOnClick) {\n              this.filterResults();\n            }\n          }}\n          fluid\n          {...searchProps}\n          results={results}\n          onSearchChange={this.onSearchChange}\n          onResultSelect={this.onResultSelect}\n          input={{\n            type: 'text',\n            className: 'fluid',\n            ...inputProps,\n          }}\n        />\n      </div>\n    );\n  };\n}\n\nexport default SearchComponent;\n","import _ from 'lodash';\nimport qs from 'qs';\n\nexport const setQuery = (url, queryObj, options) => {\n  options = options || {};\n\n  if (_.isEmpty(queryObj)) {\n    return url;\n  }\n\n  const urlParts = _.split(url, '?');\n  const existingQueryObj = parseQuery(urlParts[1]);\n\n  if (options.preserve) {\n    _.merge(queryObj, existingQueryObj);\n  }\n\n  _.merge(existingQueryObj, queryObj);\n\n  let queryStr = stringifyQuery(existingQueryObj);\n\n  // replace brackets and $ sign in the URL (mostly used for variables)\n  queryStr = queryStr\n    .replace(/\\%7B/gi, '{')\n    .replace(/\\%7D/gi, '}')\n    .replace(/\\%24/gi, '$');\n\n  return `${urlParts[0]}?${queryStr}`;\n};\n\nexport const parseQuery = (search, opts = {}) => {\n  const { arrayFormat = 'brackets' } = opts;\n\n  return qs.parse(_.trimStart(search, '?'), { arrayFormat });\n};\n\nexport const stringifyQuery = (query = {}, opts = {}) => {\n  const { arrayFormat = 'brackets' } = opts;\n\n  return qs.stringify(query, { ...opts, arrayFormat });\n};\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { faSpinner } from '@fortawesome/pro-solid-svg-icons/faSpinner';\n\nimport { borderClassName, iconClassName, paddingClassName, radiusClassName } from './classNames';\nimport { colors, defaultColor, defaultSize, posX, sizes, themes } from './enums';\nimport { divClickHandler } from './events';\nimport { Icon, IIcon } from './Icon';\n\nexport interface IButtonGroupProps {\n  children?: any;\n  className?: string;\n  shadow?: boolean;\n}\n\nexport const ButtonGroup = ({ children, className, shadow }: IButtonGroupProps) => {\n  return (\n    <span className={cn('ButtonGroup flex items-center', className)}>\n      <span className={cn('flex', { 'shadow-sm': shadow })}>{children}</span>\n    </span>\n  );\n};\n\nexport interface IButtonProps {\n  id?: string;\n  children?: any;\n  className?: string;\n  title?: string;\n  theme?: themes;\n  customTheme?: string;\n  color?: colors;\n  size?: sizes;\n  transparent?: boolean;\n  loading?: boolean;\n  disabled?: boolean;\n  active?: boolean;\n  hovering?: boolean;\n  outlined?: boolean;\n  fluid?: boolean;\n  rounded?: boolean;\n  shadow?: boolean;\n  iconColor?: colors;\n  icon?: IIcon;\n  rightIcon?: IIcon;\n  iconPos?: posX;\n  onClick?: divClickHandler;\n  onClickIcon?: divClickHandler;\n  onMouseDown?: divClickHandler;\n  attributes?: object;\n}\n\nexport const Button = ({\n  id,\n  children,\n  className,\n  title,\n  theme,\n  customTheme,\n  color = defaultColor,\n  size = defaultSize,\n  transparent,\n  active,\n  hovering,\n  loading,\n  disabled,\n  outlined,\n  fluid,\n  rounded,\n  shadow,\n  iconColor,\n  icon,\n  rightIcon,\n  iconPos = posX.left,\n  onClick,\n  onClickIcon,\n  onMouseDown,\n  attributes = {},\n}: IButtonProps) => {\n  const colorVal = colors[color];\n  const sizeVal = sizes[size];\n  const enabled = active || (!disabled && !loading);\n  const hasBorder = outlined;\n\n  const paddingClasses = paddingClassName({\n    size,\n    iconClickable: onClickIcon ? true : false,\n    iconPos: icon ? iconPos : undefined,\n  });\n\n  const borderClasses =\n    !customTheme &&\n    borderClassName({\n      theme,\n      color,\n      size,\n      enabled,\n      active,\n      hasBorder,\n      transparent,\n    });\n\n  const radiusClasses = radiusClassName({ rounded });\n\n  let iconElem;\n  if (icon) {\n    iconElem = (\n      <div\n        className={cn(\n          'Button-icon',\n          iconClassName({\n            color,\n            size,\n            iconPos,\n            hasBorder,\n            clickable: onClickIcon ? true : false,\n            rounded,\n          }),\n          {\n            [`text-${iconColor ? colors[iconColor] : ''}`]: iconColor,\n          }\n        )}\n      >\n        <Icon icon={loading ? faSpinner : icon} pulse={loading} />\n      </div>\n    );\n  }\n\n  let rightIconElem;\n  if (rightIcon) {\n    rightIconElem = (\n      <div\n        className={cn(\n          'Button-icon',\n          iconClassName({\n            color,\n            size,\n            iconPos: posX.right,\n            hasBorder,\n            clickable: false,\n          })\n        )}\n      >\n        <Icon icon={rightIcon} />\n      </div>\n    );\n  }\n\n  /**\n   * If the icon has a click handler, we attach this to the inner button div.\n   * Else we attach to the wrapping div.\n   */\n  const clickHandler =\n    enabled && onClick\n      ? (e: any) => {\n          onClick(e);\n        }\n      : undefined;\n\n  const mouseDownHandler =\n    enabled && onMouseDown\n      ? (e: any) => {\n          onMouseDown(e);\n        }\n      : undefined;\n\n  let bgClasses = {};\n  if (!customTheme) {\n    if (theme) {\n      if (theme === themes.dark) {\n        bgClasses = {\n          [`bg-lighten-300`]: !outlined && !transparent && !active,\n          [`bg-lighten-700`]: !outlined && active,\n          [`hover:bg-lighten-100`]: outlined && enabled && !active,\n          [`hover:bg-lighten-700`]: !outlined && enabled && !active,\n          [`bg-lighten-100`]: outlined && active,\n        };\n      } else if (theme === themes.light) {\n        // TODO\n      }\n    } else {\n      bgClasses = {\n        [`bg-${colorVal}`]: !outlined && !transparent && !active,\n        [`bg-${colorVal}-dark`]: !outlined && active,\n        [`hover:bg-${colorVal}-lightest`]: outlined && enabled && !active,\n        [`bg-${colorVal}-lightest`]: outlined && enabled && !active && hovering,\n        [`hover:bg-${colorVal}-light`]: !transparent && !outlined && enabled && !active,\n        [`hover:bg-${colorVal}-lighter`]: transparent && !outlined && enabled && !active,\n        [`bg-${colorVal}-lighter`]: enabled && (hovering || active),\n        ['opacity-75']: !enabled,\n      };\n    }\n  }\n\n  let textClasses = {};\n  if (!customTheme) {\n    if (theme && theme === themes.dark) {\n      textClasses = {\n        [`text-muted-light`]: (outlined || transparent) && !active,\n        [`hover:text-white`]: outlined && enabled,\n        'text-white': outlined && active,\n        'text-black': !outlined && (!transparent || active),\n        'hover:text-black': !outlined && !active && enabled,\n      };\n    } else if (theme && theme === themes.light) {\n      textClasses = {\n        [`text-muted`]: (outlined || transparent) && !active,\n        [`text-black`]: outlined && active,\n        'text-white': !outlined && (!transparent || active),\n        'hover:text-white': !outlined && !active && enabled,\n      };\n    } else {\n      textClasses = {\n        [`text-${colorVal}-dark`]: (outlined || transparent) && !active,\n        [`text-${colorVal}-darker`]: outlined && active,\n        'text-white': !outlined && (!transparent || active),\n        'hover:text-white': !transparent && !outlined && !active && enabled,\n        [`hover:text-${colorVal}-darker`]: transparent && !active && enabled,\n        [`text-${colorVal}-darker`]: transparent && !active && enabled && hovering,\n      };\n    }\n  }\n\n  return (\n    <div\n      id={id}\n      title={title}\n      onClick={!onClickIcon ? clickHandler : undefined}\n      onMouseDown={!onClickIcon ? mouseDownHandler : undefined}\n      className={cn(\n        'Button',\n        className,\n        customTheme,\n        'flex select-none inline-flex justify-center font-bold leading-reset',\n        `h-${sizes[size]}`,\n        `text-${sizeVal}`,\n        radiusClasses,\n        borderClasses,\n        textClasses,\n        bgClasses,\n        {\n          // cursor\n          'cursor-pointer': enabled && !active,\n          'cursor-not-allowed': disabled,\n          'cursor-wait': loading,\n\n          // structure\n          'w-full': fluid,\n          solid: !outlined,\n\n          // shadows\n          shadow,\n        }\n      )}\n      {...attributes}\n    >\n      {iconPos === posX.left && iconElem}\n\n      {children && (\n        <div\n          onClick={onClickIcon ? clickHandler : undefined}\n          onMouseDown={onClickIcon ? mouseDownHandler : undefined}\n          className={paddingClasses}\n        >\n          {loading && !iconElem ? 'loading...' : children}\n        </div>\n      )}\n\n      {iconPos === posX.right && iconElem}\n      {rightIconElem}\n    </div>\n  );\n};\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nexport interface IHeader {\n  className?: string;\n  title: string | React.ReactElement<any>;\n  subtitle?: string | React.ReactElement<any>;\n  bgClassName?: string;\n}\n\nexport class Header extends React.Component<IHeader> {\n  public render() {\n    const { className, title, subtitle, bgClassName } = this.props;\n\n    return (\n      <div\n        className={cn(className, bgClassName, 'p-8 rounded-t-lg', {\n          'text-white': bgClassName,\n          'bg-grey-lighter border-b border-grey-light': !bgClassName,\n        })}\n      >\n        {typeof title === 'string' ? <div className=\"text-2xl font-extrabold\">{title}</div> : title}\n\n        {typeof subtitle === 'string' ? (\n          <div\n            className={cn({\n              'text-lighten-600': bgClassName,\n              'text-muted': !bgClassName,\n              'mt-2': !!title,\n            })}\n          >\n            {subtitle}\n          </div>\n        ) : (\n          subtitle\n        )}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { colors } from './enums';\nimport { divClickHandler } from './events';\nimport { Icon, IIcon } from './Icon';\n\nexport interface ISidebar {\n  sections: ISidebarSection[];\n  className?: string;\n}\n\nexport interface ISidebarSection {\n  children: Array<ISidebarChild | SidebarChildRenderer>;\n  className?: string;\n  title?: string;\n}\n\nexport type SidebarChildRenderer = (renderChild: (opts: ISidebarChild) => any) => void;\n\nexport interface ISidebarChild {\n  title: string;\n  subtitle?: string;\n  icon?: IIcon;\n  color?: colors;\n  active?: boolean;\n  className?: string;\n  onClick?: divClickHandler;\n}\n\nexport class Sidebar extends React.Component<ISidebar> {\n  public render() {\n    const { className, sections = [] } = this.props;\n\n    if (!sections.length) return null;\n\n    return (\n      <div className={cn('bg-grey-lightest w-1/4 border-r border-grey-light', className)}>\n        {sections.map((section, index) => {\n          return this._renderSection(section, index);\n        })}\n      </div>\n    );\n  }\n\n  private _renderSection = (section: ISidebarSection, index: number) => {\n    const { children, title, className } = section;\n\n    return (\n      <div className={cn('flex flex-col', className)} key={index}>\n        {title && <div className=\"px-4 py-3 text-muted\">{title}</div>}\n\n        {children.map((child, childIndex) => {\n          if (child instanceof Function) {\n            return child(this._renderChild);\n          }\n\n          return this._renderChild(child, childIndex);\n        })}\n      </div>\n    );\n  };\n\n  private _renderChild = (child: ISidebarChild, index?: number) => {\n    const { title, subtitle, icon, active, className, onClick } = child;\n\n    return (\n      <div\n        key={index}\n        className={cn(\n          'py-3 px-6 font-semibold cursor-pointer opacity-50 hover:opacity-75',\n          className,\n          {\n            'opacity-100': active,\n            'bg-darken-50': active,\n            'text-primary': active,\n          }\n        )}\n        onClick={onClick}\n      >\n        {icon && (\n          <div\n            className=\"w-12 text-center -ml-4 text-grey\"\n            style={{ fontSize: '0.9em', marginTop: 2 }}\n          >\n            <Icon icon={icon} />\n          </div>\n        )}\n\n        <div>\n          <div className=\"font-bold truncate\">{title}</div>\n          {subtitle && <div className=\"mt-1 text-xs text-muted truncate\">{subtitle}</div>}\n        </div>\n      </div>\n    );\n  };\n}\n","import * as React from 'react';\n\nimport { themes } from './enums';\nimport { IPopupPosition, Popup } from './Popup';\n\nconst cn: any = require('classnames');\n\nexport interface IPanelListItem {\n  name: any;\n  className?: string;\n  badge?: string;\n  isActive?: boolean;\n  meta?: string[];\n  details?: any;\n  theme?: themes;\n  popup?: IPopupPosition;\n  data?: any; // arbitrary data to store and pass through to onClick\n  onClick?: (item: IPanelListItem) => void;\n}\n\nexport interface IPanelListItemState {\n  isContextOpen?: boolean;\n}\nexport class PanelListItem extends React.Component<IPanelListItem, IPanelListItemState> {\n  private _rowHeight = 45;\n\n  constructor(props: IPanelListItem) {\n    super(props);\n\n    this.state = { isContextOpen: false };\n  }\n\n  public render() {\n    const { isContextOpen } = this.state;\n\n    const {\n      name,\n      badge,\n      details,\n      meta,\n      popup = {},\n      isActive,\n      onClick,\n      theme = themes.dark,\n    } = this.props;\n\n    return (\n      <Popup\n        posX={popup.posX || 'right'}\n        posY={popup.posY || 'center'}\n        hideDelay={0}\n        renderTrigger={(attributes, props) => (\n          <div\n            {...attributes}\n            style={{ height: this._rowHeight }}\n            className={cn('PanelList-trigger flex items-center text-sm px-4 opacity-85', {\n              'text-white': theme === themes.dark,\n              'bg-dark-active': isActive && !isContextOpen,\n              'hover:bg-darken-50': onClick && !isActive && theme === themes.light,\n              'hover:bg-lighten-50': onClick && !isActive && theme === themes.dark,\n              'bg-darken-50': isContextOpen && theme === themes.light,\n              'bg-lighten-50': isContextOpen && theme === themes.dark,\n              'cursor-pointer': onClick && !isActive,\n            })}\n            title={typeof name === 'string' ? name : ''}\n            onClick={\n              onClick\n                ? () => {\n                    props.hidePopup();\n                    onClick(this.props);\n                  }\n                : undefined\n            }\n          >\n            <div className=\"flex flex-col flex-1 w-100\">\n              <div className=\"truncate\">\n                {badge && <span className={cn('font-extrabold')}>{badge}</span>} {name}\n              </div>\n              {meta && (\n                <div\n                  className={cn('text-xs truncate', {\n                    'text-darken-600': theme === themes.light,\n                    'text-lighten-600': theme === themes.dark,\n                  })}\n                >\n                  {meta.join('  ')}\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n        renderContent={() => {\n          // TODO: support item.details being markdown\n          return (\n            details && (\n              <div\n                className=\"bg-white rounded shadow py-3 px-6 overflow-auto\"\n                style={{ maxHeight: 400, maxWidth: 500 }}\n              >\n                {details}\n              </div>\n            )\n          );\n        }}\n      />\n    );\n  }\n}\n","\nimport React, { Component } from 'react'\nimport { Route } from 'react-router-dom'\nimport { cleanPath } from '@stoplight/react-static'\n\nimport universal, { setHasBabelPlugin } from 'react-universal-component'\n  \n\n\nsetHasBabelPlugin()\n\nconst universalOptions = {\n  loading: () => null,\n  error: props => {\n    console.error(props.error);\n    return <div>An error occurred loading this page's template. More information is available in the console.</div>;\n  },\n}\n\nconst t_0 = universal(import('../client/containers/Page.js'), universalOptions)\nconst t_1 = universal(import('../client/containers/NotFound.js'), universalOptions)\nconst t_2 = universal(import('../client/containers/Oauth.js'), universalOptions)\nconst t_3 = universal(import('../client/containers/Login.js'), universalOptions)\nconst t_4 = universal(import('../client/containers/Logout.js'), universalOptions)\n\n\n// Template Map\nglobal.componentsByTemplateID = global.componentsByTemplateID || [\n  t_0,\nt_1,\nt_2,\nt_3,\nt_4\n]\n\nconst defaultTemplateIDs = {\n  '404': 1\n}\n\n// Template Tree\nglobal.templateIDsByPath = global.templateIDsByPath || defaultTemplateIDs\n\n// Get template for given path\nconst getComponentForPath = path => {\n  path = cleanPath(path)\n  return global.componentsByTemplateID[global.templateIDsByPath[path]]\n}\n\nglobal.reactStaticGetComponentForPath = getComponentForPath\nglobal.reactStaticRegisterTemplateIDForPath = (path, id) => {\n  global.templateIDsByPath[path] = id\n}\nglobal.clearTemplateIDs = () => {\n  global.templateIDsByPath = defaultTemplateIDs\n}\n\nexport default class Routes extends Component {\n  componentDidMount () {\n    global.clearTemplateIDs = () => {\n      this.setState({})\n    }\n    \n\n  }\n  render () {\n    const { component: Comp, render, children } = this.props\n\n    const getFullComponentForPath = path => {\n      let Comp = getComponentForPath(path)\n      let is404 = path === '404'\n      if (!Comp) {\n        is404 = true\n        Comp = getComponentForPath('/404')\n      }\n      return (newProps = {}) => (\n        Comp\n          ? <Comp {...newProps} {...(is404 ? {is404: true} : {})} />\n          : null\n      )\n    }\n\n    const renderProps = {\n      componentsByTemplateID: global.componentsByTemplateID,\n      templateIDsByPath: global.templateIDsByPath,\n      getComponentForPath: getFullComponentForPath\n    }\n\n    if (Comp) {\n      return (\n        <Comp\n          {...renderProps}\n        />\n      )\n    }\n\n    if (render || children) {\n      return (render || children)(renderProps)\n    }\n\n    // This is the default auto-routing renderer\n    return (\n      <Route render={props => {\n        let Comp = getFullComponentForPath(props.location.pathname)\n        // If Comp is used as a component here, it triggers React to re-mount the entire\n        // component tree underneath during reconciliation, losing all internal state.\n        // By unwrapping it here we keep the real, static component exposed directly to React.\n        return Comp && Comp()\n      }} />\n    )\n  }\n}\n\n","import _ from 'lodash';\n\nimport { safeParse } from '../json';\n\nexport const emptySchema = `{\n    \"type\": \"object\"\n}`;\n\nexport const emptyJsonSchema = JSON.parse(emptySchema);\n\nexport const isSchemaEmpty = schema => {\n  if (_.isEmpty(schema)) {\n    return true;\n  }\n\n  let parsed = schema;\n  if (typeof parsed === 'string') {\n    try {\n      parsed = JSON.parse(parsed);\n    } catch (e) {\n      return true;\n    }\n  }\n\n  if (\n    !parsed ||\n    !Object.keys(parsed).length ||\n    (parsed.properties && !Object.keys(parsed.properties).length)\n  ) {\n    return true;\n  }\n\n  if (parsed.allOf || parsed.oneOf || parsed.anyOf || parsed.patternProperties) {\n    return false;\n  }\n\n  if (parsed.type === 'object' && _.isEmpty(parsed.properties)) {\n    return true;\n  }\n\n  if (parsed.type === 'array' && _.isEmpty(parsed.items)) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const isValidJSON = target => {\n  try {\n    if (typeof target === 'object') {\n      target = JSON.stringify(target);\n    }\n    JSON.parse(target);\n    return true;\n  } catch (e) {\n    return false;\n  }\n};\n\n// MM TODO: this is pretty meh... what if it's {type: \"string\"}, etc? Check for specific\n// allowed combinations of property/values (type: string|number|...)\nexport const isJsonSchema = target => {\n  const keys = _.keys(target);\n  return _.intersection(keys, [\n    'allOf',\n    'oneOf',\n    'anyOf',\n    'properties',\n    'items',\n    'patternProperties',\n  ]).length > 0\n    ? true\n    : false;\n};\n\nexport const buildExampleFromSchema = (s, schemas) => {\n  let schema = safeParse(s);\n  if (typeof schemas !== 'undefined') {\n    schema = dereferenceSchema(schema, schemas, true);\n  }\n\n  const schemaType = Array.isArray(schema.type) ? schema.type : [schema.type];\n  const { properties } = schema;\n  const values = {};\n\n  if (properties) {\n    for (const k in properties) {\n      if (!Object.prototype.hasOwnProperty.call(properties, k)) {\n        continue;\n      }\n\n      const prop = properties[k];\n      if (!prop.type) {\n        continue;\n      }\n\n      const propType = Array.isArray(prop.type) ? prop.type : [prop.type];\n      if (prop.hasOwnProperty('default')) {\n        values[k] = prop.default;\n        if (propType.indexOf('string') === -1) {\n          try {\n            values[k] = JSON.parse(prop.default);\n          } catch (e) {}\n        }\n      } else if (prop.enum) {\n        values[k] = _.first(prop.enum);\n      }\n\n      if (typeof values[k] === 'undefined') {\n        values[k] = buildExampleFromSchema(prop);\n      }\n    }\n\n    return values;\n  } else if (schema.items) {\n    return [buildExampleFromSchema(schema.items)];\n  } else if (schema.allOf) {\n    for (const item of schema.allOf) {\n      _.merge(values, buildExampleFromSchema(item));\n    }\n    return values;\n  } else if (schema.oneOf) {\n    return buildExampleFromSchema(schema.oneOf[0]);\n  } else if (schema.anyOf) {\n    return buildExampleFromSchema(schema.anyOf[0]);\n  } else if (schemaType.indexOf('object') !== -1) {\n    return {};\n  }\n\n  let finalProp;\n  const propType = _.first(_.without(schemaType, 'null'));\n  switch (propType) {\n    case 'number':\n    case 'integer':\n      finalProp = 123;\n      break;\n    case 'boolean':\n      finalProp = true;\n      break;\n    case 'string':\n      finalProp = 'string';\n      if (schema.format) {\n        finalProp = `${finalProp} (${schema.format})`;\n      }\n\n      break;\n    default:\n      finalProp = schema.type;\n      break;\n  }\n\n  return finalProp;\n};\n\nconst _dereferenceSchema = (options = {}) => {\n  let {\n    target = {},\n    schemas = {},\n    previousRefs = [],\n    refCache = {},\n    allOfParent,\n    combinerParent,\n    hideInheritedFrom,\n    isRoot,\n  } = options;\n\n  let schema = target;\n  let properties;\n  let isCombiner;\n  let isAllOf;\n\n  if (_.isEmpty(schemas)) {\n    return schema;\n  }\n\n  if (_.get(schema, '$ref')) {\n    schema = _dereferenceSchemaRef({\n      target: schema,\n      schemas,\n      ref: target.$ref,\n      previousRefs,\n      refCache,\n      allOfParent,\n      combinerParent,\n      hideInheritedFrom,\n      isRoot,\n    });\n  } else if (_.get(schema, 'properties')) {\n    properties = schema.properties;\n  } else if (_.get(schema, 'items')) {\n    if (schema.items.$ref) {\n      schema.items = _dereferenceSchemaRef({\n        target: schema.items,\n        schemas,\n        ref: schema.items.$ref,\n        previousRefs,\n        refCache,\n        allOfParent,\n        combinerParent,\n        hideInheritedFrom,\n      });\n    } else if (schema.items.properties) {\n      properties = schema.items.properties;\n    } else if (schema.items.allOf) {\n      properties = schema.items.allOf;\n      isCombiner = true;\n    } else if (schema.items.oneOf) {\n      properties = schema.items.oneOf;\n      isCombiner = true;\n    } else if (schema.items.anyOf) {\n      properties = schema.items.anyOf;\n      isCombiner = true;\n    }\n  } else if (_.get(schema, 'allOf')) {\n    properties = schema.allOf;\n    isCombiner = true;\n    isAllOf = true;\n  } else if (_.get(schema, 'oneOf')) {\n    properties = schema.oneOf;\n    isCombiner = true;\n  } else if (_.get(schema, 'anyOf')) {\n    properties = schema.anyOf;\n    isCombiner = true;\n  } else if (_.get(schema, 'additionalProperties')) {\n    properties = schema.additionalProperties;\n  } else if (_.get(schema, 'patternProperties')) {\n    properties = schema.patternProperties;\n  } else if (_.get(schema, 'dependencies')) {\n    properties = schema.dependencies;\n  }\n\n  if (properties) {\n    for (const k in properties) {\n      if (properties.hasOwnProperty(k)) {\n        properties[k] = _dereferenceSchema({\n          target: properties[k],\n          schemas,\n          previousRefs,\n          refCache,\n          allOfParent: isAllOf,\n          combinerParent: isCombiner,\n          hideInheritedFrom,\n          isRoot: isRoot && isAllOf,\n        });\n      }\n    }\n  }\n\n  return schema;\n};\n\nconst _dereferenceSchemaRef = (options = {}) => {\n  const {\n    target,\n    schemas,\n    ref,\n    previousRefs = [],\n    refCache = {},\n    allOfParent,\n    combinerParent,\n    hideInheritedFrom,\n    isRoot,\n  } = options;\n\n  if (refCache[ref]) {\n    return refCache[ref].resolved;\n  }\n\n  if (previousRefs.indexOf(ref) !== -1) {\n    const resolved = {\n      type: '@circular',\n    };\n\n    if (!hideInheritedFrom) {\n      resolved.__inheritedFrom = { name: ref, ref };\n    }\n\n    return resolved;\n  }\n\n  const newRefs = previousRefs.concat(ref);\n\n  // defensive clone to protect against mutations :(\n  const refPath = ref.replace('#/', '').split('/');\n  const schema = _.cloneDeep(_.get(schemas, refPath.concat('schema')) || _.get(schemas, refPath));\n\n  if (schema) {\n    let propsInherited = false;\n    let isAllOf = allOfParent;\n\n    if (schema.properties) {\n      if (combinerParent) {\n        propsInherited = 'properties';\n      } else if (!hideInheritedFrom) {\n        schema.__inheritedFrom = { name: ref, ref };\n      }\n    } else if (schema.items) {\n      if (combinerParent) {\n        propsInherited = 'items';\n      } else if (!hideInheritedFrom) {\n        schema.__inheritedFrom = { name: ref, ref };\n      }\n    } else if (schema.allOf) {\n      propsInherited = 'allOf';\n      isAllOf = true;\n    } else if (schema.oneOf) {\n      propsInherited = 'oneOf';\n      isAllOf = false;\n    } else if (schema.anyOf) {\n      propsInherited = 'anyOf';\n      isAllOf = false;\n    }\n\n    if (propsInherited) {\n      const iterFunc = _.isArray(schema[propsInherited]) ? _.map : _.mapValues;\n\n      schema[propsInherited] = iterFunc(schema[propsInherited], item => {\n        if (item.properties) {\n          item.properties = _.mapValues(item.properties, val => {\n            const obj = { ...val };\n\n            // Don't show hideInheritedFrom for combiners anymore.\n            if (!isAllOf && !hideInheritedFrom) {\n              obj.__inheritedFrom = { name: ref, ref };\n            }\n\n            return obj;\n          });\n\n          return item;\n        }\n\n        const obj = { ...item };\n\n        // Don't show hideInheritedFrom for combiners anymore.\n        if (!isAllOf && !hideInheritedFrom) {\n          obj.__inheritedFrom = { name: ref, ref };\n        }\n\n        return obj;\n      });\n    }\n\n    const resolved = _dereferenceSchema({\n      target: schema,\n      schemas,\n      previousRefs: newRefs,\n      refCache,\n      hideInheritedFrom,\n    });\n\n    if (!isRoot && !hideInheritedFrom) {\n      resolved.__inheritedFrom = { name: ref, ref };\n    }\n\n    refCache[ref] = {\n      depth: previousRefs.length,\n      resolved,\n    };\n\n    return resolved;\n  }\n\n  refCache[ref] = {\n    depth: previousRefs.length,\n    target,\n  };\n\n  return target;\n};\n\n/**\n * Replace all $ref's with their respective JSON Schema objects\n * @param  {Object} target             - Schema to dereference\n * @param  {Object} schemas            - Schemas that the target may reference. For example a Swagger or {definitions: {}}. This function will use _.get and .split('/') to find the reference path. #/responses/foo will be in {responses: {foo: {}}}\n * @param  {Boolean} hideInheritedFrom - Don't add the __inheritedFrom property to the dereferenced schema\n * @return {Object}                    - An object with no $refs\n */\nexport const dereferenceSchema = (target, schemas, hideInheritedFrom) => {\n  if (!target) {\n    return {};\n  }\n\n  const schema = safeParse(_.cloneDeep(target));\n\n  return _dereferenceSchema({ target: schema, schemas, hideInheritedFrom, isRoot: true });\n};\n\n// If there are two schemas with the same namespace, the more specific one wins\n// By more specific, we mean a schema belonging to an environment > schema belonging to a workspace\nexport const uniqueByNamespace = schemas => {\n  const newSchemas = {};\n  for (const s of schemas) {\n    if (newSchemas[s.namespace]) {\n      if (s.environment) {\n        newSchemas[s.namespace] = s;\n      }\n    } else {\n      newSchemas[s.namespace] = s;\n    }\n  }\n\n  return _.values(newSchemas);\n};\n\nexport const findPropertyByRef = ({ schema = {}, refPath = [], namespacePath = [] } = {}) => {\n  let sParsed = schema.definition;\n  if (typeof sParsed === 'string') {\n    try {\n      sParsed = JSON.parse(schema.definition);\n    } catch (e) {\n      return [\n        {\n          type: 'error',\n          message: `Error parsing schema definition with namespace ${schema.namespace}. ${e}`,\n        },\n      ];\n    }\n  }\n\n  let currentSchema = sParsed;\n  for (const p of refPath) {\n    if (p === '' || p === namespacePath[1]) {\n      continue;\n    }\n    const pathParts = p.split('/');\n    for (const part of pathParts) {\n      if (!currentSchema) {\n        break;\n      }\n      if (currentSchema.type === 'object') {\n        currentSchema = currentSchema.properties;\n      }\n      currentSchema = currentSchema[part];\n    }\n  }\n\n  if (currentSchema) {\n    return true;\n  }\n\n  return false;\n};\n\nexport const findSchemaByRef = ({ schemas = [], ref = '' } = {}) => {\n  for (const s of schemas) {\n    const namespace = s.namespace.split('#/');\n    const refPath = ref.split('#/');\n    if (namespace.length > 0 && refPath.length > 0 && refPath[1] === namespace[1]) {\n      // Find the property\n      let found = true;\n      if (refPath.length > 1) {\n        found = findPropertyByRef({ schema: s, refPath, namespacePath: namespace });\n      }\n\n      if (found) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n};\n\nexport const publicJSON = resource => {\n  return _.omit(resource, [\n    'skipCompliance',\n    'createdAt',\n    'updatedAt',\n    'owner',\n    'workspace',\n    'project',\n    'environment',\n    'pendingChanges',\n    'committedAt',\n    'commits',\n    'compliance',\n    'groupId',\n    'summary',\n    'discovered',\n    'mock',\n    'operationId',\n  ]);\n};\n\nexport const resolveSchema = ({ schema, swagger } = {}) => {\n  if (_.isEmpty(swagger)) {\n    return schema;\n  }\n\n  const resolvedSchema = _.cloneDeep(schema);\n  resolvedSchema.definition = dereferenceSchema(resolvedSchema.definition, swagger);\n  return resolvedSchema;\n};\n\n/**\n * Marks all properties as required for objects and array child objects for\n * passed schema.\n * @param {object} schema - schema object.\n * @param {boolean} [mutate=false] - pass true if you want to mutate source schema.\n * @return {object} - modified schema.\n */\nexport const markFieldsRequired = (schema, mutate = false) => {\n  const resolvedSchema = mutate ? schema : _.cloneDeep(schema);\n  const props =\n    _.get(resolvedSchema, ['items', 'properties']) || _.get(resolvedSchema, ['properties']);\n\n  if (props) {\n    _.forOwn(props, (value, key) => {\n      if (_.isObject(value)) {\n        value = markFieldsRequired(value, true);\n      }\n\n      if (resolvedSchema.required && !resolvedSchema.required.includes(key)) {\n        resolvedSchema.required.push(key);\n      } else {\n        resolvedSchema.required = [key];\n      }\n    });\n  }\n\n  return resolvedSchema;\n};\n\nexport const schemaMerger = (objValue, srcValue) => {\n  if (_.isArray(objValue)) {\n    return _.uniq(objValue.concat(srcValue));\n  }\n};\n\n/**\n * Merge keys in all schemas, error if keys are incompatible, create of union of \"required\" values.\n * @param {array} jsonSchemas - schemas to merge.\n * @return {object}\n */\nexport const mergeSchemas = jsonSchemas => {\n  if (!_.isArray(jsonSchemas) || jsonSchemas.length < 1) {\n    throw new Error('Must merge at least 1 JSON schema.');\n  }\n\n  return _.mergeWith({}, ...jsonSchemas, (mergedValue, newValue, key) => {\n    if (_.isNil(mergedValue)) {\n      return;\n    }\n\n    if (key === 'required') {\n      return _.uniq(mergedValue.concat(newValue));\n    }\n\n    // Force override of existing properties. Remove this to restore original ability to merge json schemas\n    if (key === 'properties') {\n      for (const field in newValue) {\n        if (newValue.hasOwnProperty(field)) {\n          if (mergedValue.hasOwnProperty(field)) {\n            mergedValue[field] = newValue[field];\n          }\n        }\n      }\n    }\n\n    if (_.isPlainObject(mergedValue)) {\n      if (!_.isPlainObject(newValue)) {\n        throw new Error(`Failed to merge schemas because \"${key}\" has different values.`);\n      }\n\n      return;\n    }\n\n    if (!_.isEqual(mergedValue, newValue)) {\n      throw new Error(\n        `Failed to merge schemas because \"${key}\" has different values: ${JSON.stringify(\n          mergedValue\n        )} and ${JSON.stringify(newValue)}.`\n      );\n    }\n  });\n};\n\nexport const isSchemaViewerEmpty = schema => {\n  const keys = _.keys(schema);\n  const combinerTypes = ['allOf', 'oneOf', 'anyOf'];\n\n  if (keys.length === 1 && _.includes(combinerTypes, keys[0])) {\n    return _.isEmpty(_.get(schema, keys[0], []));\n  }\n\n  return false;\n};\n","import _ from 'lodash';\nimport base32 from 'thirty-two';\n\nconst atob = (data = '') => {\n  let buff = new Buffer(data, 'base64');\n  return buff.toString('utf8');\n};\n\nexport const encodeBase32 = ({ value = '', stripPadding = false, lower = false }) => {\n  value = base32.encode(value).toString();\n\n  if (stripPadding) {\n    value = _.trimEnd(value, '=');\n  }\n\n  if (lower) {\n    value = _.toLower(value);\n  }\n\n  return value;\n};\n\nexport const decodeBase32 = ({ value = '' }) => {\n  // add padding characters\n  let padding = '';\n  const toAdd = value.length % 8;\n\n  if (toAdd === 2) {\n    padding = '======';\n  } else if (toAdd === 4) {\n    padding = '====';\n  } else if (toAdd === 5) {\n    padding = '===';\n  } else if (toAdd === 7) {\n    padding = '==';\n  }\n  value += padding;\n\n  return base32.decode(_.toUpper(value)).toString();\n};\n\nexport const b64EncodeUnicode = (str = '') => {\n  const encoded = encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) => {\n    return String.fromCharCode(parseInt(p1, 16));\n  });\n\n  if (typeof bota !== 'undefined') {\n    return btoa(encoded);\n  }\n\n  return Buffer.from(encoded).toString('base64');\n};\n\nexport const b64DecodeUnicode = (str = '') => {\n  return decodeURIComponent(\n    Array.prototype.map\n      .call(atob(str), function(c) {\n        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);\n      })\n      .join('')\n  );\n};\n","import _ from 'lodash';\n\nimport { parseQuery, stringifyQuery } from '../query';\n\nexport const buildParams = (location = {}, params = {}, options = {}) => {\n  let currentParams = options.preserve && location.search ? parseQuery(location.search) : {};\n\n  const computed = {};\n  Object.assign(computed, currentParams, params);\n\n  return _.omitBy(computed, _.isEmpty);\n};\n\nexport const buildQueryParams = (params, options = {}) => {\n  let pathname = options.pathname || _.get(window, 'location.pathname');\n\n  const newParams = buildParams(window.location, params, {\n    preserve: true,\n    ...options,\n  });\n\n  if (!_.isEmpty(newParams)) {\n    pathname += `?${stringifyQuery(newParams)}`;\n  }\n  return pathname;\n};\n\n// accepts array or string path\n// any slashes present in the path must be converted to ~1\nexport const pathToHash = ({ path }) => {\n  const targetPath = _.map(_.cloneDeep(_.toPath(path || [])), part => part.replace(/\\//g, '~1'));\n  let jsonPath = `/${targetPath.join('/')}`;\n\n  return jsonPath;\n};\n\n// ~1 in the hash must be converted to /\nexport const hashToPath = ({ hash }) => {\n  return _.compact(_.map(_.trim(hash, '#/').split('/'), part => part.replace(/~1/g, '/')));\n};\n\nexport const buildHash = (hash, options = {}) => {\n  let pathname = options.pathname || _.get(window, 'location.pathname');\n\n  let targetHash = hash;\n  if (!_.startsWith(hash, '#') && (!options.noSign && !_.isEmpty(hash))) {\n    targetHash = `#${hash}`;\n  }\n\n  return `${pathname}${targetHash}`;\n};\n","import _ from 'lodash';\n\nimport { safeParse, safeStringify } from '../json';\n\nexport const extractVariables = (target, re) => {\n  const toProcess = safeStringify(target);\n  const matches = [];\n\n  const reg =\n    re ||\n    new RegExp(/\\{(\\$\\.[\\[\\]\\.\\w- ']+)\\}|\\{(\\$\\$\\.[\\[\\]\\.\\w- ']+)\\}|\\{(input\\.[\\[\\]\\.\\w- ']+)\\}/g);\n\n  while (true) {\n    const match = reg.exec(toProcess);\n    if (!match || _.isEmpty(match)) {\n      return _.uniq(matches);\n    }\n\n    matches.push(match[0]);\n  }\n};\n\nconst cleanVariableValue = value => {\n  let cleaned = safeStringify(value);\n\n  if (typeof cleaned === 'string') {\n    // escape double quotes\n    cleaned = cleaned.replace(/\\\"/g, '\\\\\"');\n  }\n\n  return cleaned;\n};\n\nexport const replaceVariables = (target, variables = {}) => {\n  const parsedVariables = safeParse(variables);\n  if (_.isEmpty(target) || _.isEmpty(parsedVariables)) {\n    return target;\n  }\n\n  let processed = false;\n  let toProcess = safeStringify(target);\n  const matches = extractVariables(target);\n\n  _.forEach(matches, match => {\n    const trimmedVariable = _.trim(match, '{} ');\n    const variable = _.replace(trimmedVariable, /^(\\$\\$|\\$|input)\\./gi, '');\n\n    let value = _.get(parsedVariables, variable);\n    if (_.isUndefined(value)) {\n      value = _.get(parsedVariables, trimmedVariable);\n    }\n\n    if (typeof value !== 'undefined') {\n      if (typeof value === 'string') {\n        const replaceRegExp = new RegExp(_.escapeRegExp(match), 'g');\n        toProcess = toProcess.replace(replaceRegExp, cleanVariableValue(value));\n      } else {\n        let m = _.replace(match, '$$.', '\\\\$\\\\$.');\n        if (m === match) {\n          m = _.replace(match, '$.', '\\\\$.');\n        }\n        match = m;\n        toProcess = toProcess.replace(\n          new RegExp(`\"${match}\"|${match}`, 'g'),\n          cleanVariableValue(value)\n        );\n      }\n      processed = true;\n    }\n  });\n\n  if (processed) {\n    toProcess = replaceVariables(toProcess, variables);\n  }\n  return safeParse(toProcess, toProcess || target);\n};\n","import shortid from 'shortid';\n\nexport default ({ length, lowercase } = {}) => {\n  let id = shortid.generate();\n\n  if (length) {\n    id = id.substring(0, length);\n  }\n\n  if (lowercase) {\n    id = id.toLowerCase();\n  }\n\n  return id;\n};\n","export * from './json';\n","import { safeStringify } from '@stoplight/json';\nimport { get as _get, set as _set, trimStart as _trimStart } from 'lodash';\n\nexport const stringify = (\n  target: any,\n  replacer?: (key: any, value: any) => any,\n  offset?: number\n) => {\n  if (!target || typeof target === 'string') return target;\n\n  try {\n    // try regular stringify first as mentioned in this tip: https://github.com/davidmarkclements/fast-safe-stringify#protip\n    return JSON.stringify(target, replacer, offset);\n  } catch (_) {\n    return safeStringify(target, replacer, offset);\n  }\n};\n\nexport const parse = (target: string): any => {\n  if (typeof target !== 'string') return target;\n  return JSON.parse(target);\n};\n\nexport const getValue = (obj: any, path: string | string[], defaultVal?: any): any => {\n  return _get(obj, path, defaultVal);\n};\n\nexport const setValue = (obj: any, path: string | string[], value: any): any => {\n  return _set(obj, path, value);\n};\n\nexport const startsWith = (source: any[] | string, val: any[] | string): boolean => {\n  if (source instanceof Array) {\n    if (val instanceof Array) {\n      if (val.length > source.length) return false;\n\n      for (const i in val) {\n        if (!val.hasOwnProperty(i)) continue;\n\n        const si = parseInt(source[i]);\n        const vi = parseInt(val[i]);\n\n        // support if numeric index is stringified in one but not the other\n        if (!isNaN(si) || !isNaN(vi)) {\n          if (si !== vi) {\n            return false;\n          }\n        } else if (source[i] !== val[i]) {\n          return false;\n        }\n      }\n    }\n  } else if (typeof source === 'string') {\n    if (typeof val === 'string') {\n      return source.startsWith(val);\n    }\n  } else {\n    return false;\n  }\n\n  return true;\n};\n\n/**\n * Removes elems from target, matched in order, starting on the left\n * trimStart([1, 2, 3], [1, 2]) === [3]\n * trimStart([1, 2, 3], [999, 2]) === [1, 2, 3] since source[0] does not equal elems[0]\n */\nexport const trimStart = (target: any[] | string, elems: any[] | string) => {\n  if (typeof target === 'string') {\n    // @ts-ignore\n    return _trimStart(target, elems);\n  }\n\n  if (!elems || !elems.length || !(elems instanceof Array)) return target;\n\n  let toRemove = 0;\n  for (const i in target) {\n    if (!target.hasOwnProperty(i)) continue;\n    if (target[i] !== elems[i]) break;\n    toRemove++;\n  }\n\n  return target.slice(toRemove);\n};\n","import { INumberedObject } from '@core/types';\n\nexport const enumToOptions = (target: any) => {\n  const options: INumberedObject<any> = {};\n\n  for (const k in target) {\n    if (!target[k]) continue;\n    const v = target[k];\n    if (isFinite(parseInt(k))) {\n      options[k] = v;\n    }\n  }\n\n  return options;\n};\n\nexport enum themes {\n  dark = 1,\n  light,\n}\n\nexport enum colors {\n  primary = 1,\n  secondary,\n  accent,\n  active,\n  negative,\n  warning,\n  positive,\n  muted,\n  'muted-light',\n  darken,\n  lighten,\n  black,\n  white,\n  grey,\n  red,\n  orange,\n  yellow,\n  green,\n  teal,\n  blue,\n  indigo,\n  purple,\n  pink,\n}\nexport const defaultColor = colors.grey;\n\nexport enum sizes {\n  xs = 1,\n  sm,\n  md,\n  lg,\n  xl,\n}\nexport const defaultSize = sizes.md;\n\nexport enum posX {\n  left = 1,\n  right,\n}\nexport enum posY {\n  top = 1,\n  bottom,\n}\nexport enum pos {\n  posX,\n  posY,\n}\n","// adapted from https://github.com/Microsoft/vscode-uri\n\n// @ts-ignore\nimport { extname, normalize } from '@core/path';\n\nimport { ILocation, IUri, IUriComponents, IUriState } from './types';\n\n// OS detection\ndeclare const process: { platform: 'win32' };\ndeclare const navigator: { userAgent: string };\nlet isWindows: boolean;\nif (typeof process === 'object') {\n  isWindows = process.platform === 'win32';\n} else if (typeof navigator === 'object') {\n  const userAgent = navigator.userAgent;\n  isWindows = userAgent.indexOf('Windows') >= 0;\n}\n\nfunction _encode(ch: string): string {\n  return (\n    '%' +\n    ch\n      .charCodeAt(0)\n      .toString(16)\n      .toUpperCase()\n  );\n}\n\n// see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent\nfunction encodeURIComponent2(str: string): string {\n  return encodeURIComponent(str).replace(/[!'()*]/g, _encode);\n}\n\nfunction encodeNoop(str: string): string {\n  return str.replace(/[#?]/, _encode);\n}\n\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component paths\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n *\n *\n */\nexport class URI {\n  public static isUri(thing: any): thing is URI {\n    if (thing instanceof URI) {\n      return true;\n    }\n    if (!thing) {\n      return false;\n    }\n    return (\n      typeof (thing as URI).authority === 'string' &&\n      typeof (thing as URI).fragment === 'string' &&\n      typeof (thing as URI).path === 'string' &&\n      typeof (thing as URI).query === 'string' &&\n      typeof (thing as URI).scheme === 'string'\n    );\n  }\n\n  // ---- parse & validate ------------------------\n\n  public static parse(value: string, decode?: boolean): URI {\n    const ret = new URI();\n    const data = URI._parseComponents(value);\n    ret._scheme = data.scheme;\n    ret._authority = decode ? decodeURIComponent(data.authority) : data.authority;\n    ret._path = decode ? decodeURIComponent(data.path) : data.path;\n    ret._query = decode ? decodeURIComponent(data.query) : data.query;\n    ret._fragment = decode ? decodeURIComponent(data.fragment) : data.fragment;\n    URI._validate(ret);\n    return ret;\n  }\n\n  public static file(path: string): URI {\n    const ret = new URI();\n    ret._scheme = 'file';\n\n    // normalize to fwd-slashes on windows,\n    // on other systems bwd-slaches are valid\n    // filename character, eg /f\\oo/ba\\r.txt\n    if (isWindows) {\n      path = path.replace(/\\\\/g, URI._slash);\n    }\n\n    // check for authority as used in UNC shares\n    // or use the path as given\n    if (path[0] === URI._slash && path[0] === path[1]) {\n      const idx = path.indexOf(URI._slash, 2);\n      if (idx === -1) {\n        ret._authority = path.substring(2);\n      } else {\n        ret._authority = path.substring(2, idx);\n        ret._path = path.substring(idx);\n      }\n    } else {\n      ret._path = path;\n    }\n\n    ret._path = normalize(ret._path);\n\n    // Ensure that path starts with a slash\n    // or that it is at least a slash\n    if (ret._path[0] !== URI._slash) {\n      ret._path = URI._slash + ret._path;\n    }\n\n    URI._validate(ret);\n\n    return ret;\n  }\n\n  public static from(components: IUriComponents): URI {\n    return new URI().with(components);\n  }\n\n  public static revive(data: any): URI {\n    const result = new URI();\n    result._scheme = (data as IUriState).scheme || URI._empty;\n    result._authority = (data as IUriState).authority || URI._empty;\n    result._path = (data as IUriState).path || URI._empty;\n    result._query = (data as IUriState).query || URI._empty;\n    result._fragment = (data as IUriState).fragment || URI._empty;\n    result._fsPath = (data as IUriState).fsPath;\n    result._formatted = (data as IUriState).external;\n    URI._validate(result);\n    return result;\n  }\n\n  private static _schemePattern = /^\\w[\\w\\d+.-]*$/;\n  private static _singleSlashStart = /^\\//;\n  private static _doubleSlashStart = /^\\/\\//;\n  private static _empty = '';\n  private static _slash = '/';\n  private static _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n  private static _driveLetterPath = /^\\/[a-zA-z]:/;\n  private static _upperCaseDrive = /^(\\/)?([A-Z]:)/;\n\n  private static _parseComponents(value: string): IUri {\n    const ret: IUri = {\n      scheme: URI._empty,\n      authority: URI._empty,\n      path: URI._empty,\n      query: URI._empty,\n      fragment: URI._empty,\n    };\n\n    const match = URI._regexp.exec(value);\n    if (match) {\n      ret.scheme = match[2] || ret.scheme;\n      ret.authority = match[4] || ret.authority;\n      ret.path = match[5] || ret.path;\n      ret.query = match[7] || ret.query;\n      ret.fragment = match[9] || ret.fragment;\n    }\n    return ret;\n  }\n\n  private static _validate(ret: URI): void {\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !URI._schemePattern.test(ret.scheme)) {\n      throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n      if (ret.authority) {\n        if (!URI._singleSlashStart.test(ret.path)) {\n          throw new Error(\n            '[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character'\n          );\n        }\n      } else {\n        if (URI._doubleSlashStart.test(ret.path)) {\n          throw new Error(\n            '[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")'\n          );\n        }\n      }\n    }\n  }\n\n  private static _asFormatted(uri: URI, skipEncoding: boolean): string {\n    const encoder = !skipEncoding ? encodeURIComponent2 : encodeNoop;\n\n    const parts: string[] = [];\n\n    const { scheme, query, fragment } = uri;\n    let { authority, path } = uri;\n\n    if (scheme) {\n      parts.push(scheme, ':');\n    }\n\n    if (authority || scheme === 'file') {\n      parts.push('//');\n    }\n\n    if (authority) {\n      authority = authority.toLowerCase();\n      const idx = authority.indexOf(':');\n      if (idx === -1) {\n        parts.push(encoder(authority));\n      } else {\n        parts.push(encoder(authority.substr(0, idx)), authority.substr(idx));\n      }\n    }\n\n    if (path) {\n      // lower-case windows drive letters in /C:/fff or C:/fff\n      const m = URI._upperCaseDrive.exec(path);\n      if (m) {\n        if (m[1]) {\n          path = '/' + m[2].toLowerCase() + path.substr(3); // \"/c:\".length === 3\n        } else {\n          path = m[2].toLowerCase() + path.substr(2); // // \"c:\".length === 2\n        }\n      }\n\n      if (scheme === 'mailto') {\n        parts.push(path);\n      } else {\n        // encode every segement but not slashes\n        // make sure that # and ? are always encoded\n        // when occurring in paths - otherwise the result\n        // cannot be parsed back again\n        let lastIdx = 0;\n        while (true) {\n          const idx = path.indexOf(URI._slash, lastIdx);\n          if (idx === -1) {\n            parts.push(encoder(path.substring(lastIdx)));\n            break;\n          }\n          parts.push(encoder(path.substring(lastIdx, idx)), URI._slash);\n          lastIdx = idx + 1;\n        }\n      }\n    }\n\n    if (query) {\n      parts.push('?', encoder(query));\n    }\n\n    if (fragment) {\n      parts.push('#', encoder(fragment));\n    }\n\n    return parts.join(URI._empty);\n  }\n\n  private _scheme: string;\n  private _authority: string;\n  private _path: string;\n  private _query: string;\n  private _fragment: string;\n  private _formatted: string | null;\n  private _fsPath: string | null;\n\n  constructor() {\n    this._scheme = URI._empty;\n    this._authority = URI._empty;\n    this._path = URI._empty;\n    this._query = URI._empty;\n    this._fragment = URI._empty;\n\n    this._formatted = null;\n    this._fsPath = null;\n  }\n\n  /**\n   * scheme is the 'http' part of 'http://www.msft.com/some/path?query#fragment'.\n   * The part before the first colon.\n   */\n  get scheme() {\n    return this._scheme;\n  }\n\n  /**\n   * authority is the 'www.msft.com' part of 'http://www.msft.com/some/path?query#fragment'.\n   * The part between the first double slashes and the next slash.\n   */\n  get authority() {\n    return this._authority;\n  }\n\n  /**\n   * path is the '/some/path' part of 'http://www.msft.com/some/path?query#fragment'.\n   */\n  get path() {\n    return this._path;\n  }\n\n  /**\n   * query is the 'query' part of 'http://www.msft.com/some/path?query#fragment'.\n   */\n  get query() {\n    return this._query;\n  }\n\n  /**\n   * fragment is the 'fragment' part of 'http://www.msft.com/some/path?query#fragment'.\n   */\n  get fragment() {\n    return this._fragment;\n  }\n\n  // ---- filesystem path -----------------------\n\n  /**\n   * Returns a string representing the corresponding file system path of this URI.\n   * Will handle UNC paths and normalize windows drive letters to lower-case. Also\n   * uses the platform specific path separator. Will *not* validate the path for\n   * invalid characters and semantics. Will *not* look at the scheme of this URI.\n   */\n  get fsPath() {\n    if (!this._fsPath) {\n      let value: string;\n      if (this._authority && this._path && this.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = `//${this._authority}${normalize(this._path)}`;\n      } else if (URI._driveLetterPath.test(this._path)) {\n        // windows drive letter: file:///c:/far/boo\n        value = this._path[1].toLowerCase() + normalize(this._path.substr(2));\n      } else {\n        // other path\n        value = normalize(this._path);\n      }\n      if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n      }\n      this._fsPath = value;\n    }\n\n    return this._fsPath;\n  }\n\n  get origin(): string {\n    if (this.scheme && this.authority) {\n      return `${this.scheme}://${this.authority}`;\n    }\n\n    return '';\n  }\n\n  get location(): ILocation {\n    const res = {\n      hash: '',\n      host: '',\n      hostname: '',\n      href: this.toURL(),\n      origin: this.origin,\n      pathname: '',\n      port: '',\n      protocol: '',\n      search: '',\n    } as ILocation;\n\n    if (this.scheme) {\n      res.protocol = `${this.scheme}:`;\n    }\n\n    if (this.authority) {\n      res.host = this.authority;\n      const parts = this.authority.split(':');\n      res.hostname = parts[0];\n      res.port = parts[1];\n    }\n\n    if (this.path) {\n      res.pathname = this.path;\n    }\n\n    if (this.query) {\n      res.search = `?${this.query}`;\n    }\n\n    if (this.fragment) {\n      res.hash = `#${this.fragment}`;\n    }\n\n    return res;\n  }\n\n  public isAbsolute(): boolean {\n    return this.scheme === 'mailto' || (this.scheme && this.authority) ? true : false;\n  }\n\n  public isFile(root?: URI): boolean {\n    if (root && this.scheme === '') {\n      return root.scheme === '' || root.scheme === 'file';\n    }\n    return this.scheme === 'file';\n  }\n\n  public isJSONPointer(): boolean {\n    return this.fragment !== '' && this.scheme === '' && this.authority === '' && this.path === '';\n  }\n\n  // ---- modify to new -------------------------\n\n  public with(change: {\n    scheme?: string;\n    authority?: string;\n    path?: string;\n    query?: string;\n    fragment?: string;\n  }): URI {\n    if (!change) {\n      return this;\n    }\n\n    let { scheme, authority, path, query, fragment } = change;\n    if (scheme === void 0) {\n      scheme = this.scheme;\n    } else if (scheme === null) {\n      scheme = '';\n    }\n    if (authority === void 0) {\n      authority = this.authority;\n    } else if (authority === null) {\n      authority = '';\n    }\n    if (path === void 0) {\n      path = this.path;\n    } else if (path === null) {\n      path = '';\n    }\n    if (query === void 0) {\n      query = this.query;\n    } else if (query === null) {\n      query = '';\n    }\n    if (fragment === void 0) {\n      fragment = this.fragment;\n    } else if (fragment === null) {\n      fragment = '';\n    }\n\n    if (\n      scheme === this.scheme &&\n      authority === this.authority &&\n      path === this.path &&\n      query === this.query &&\n      fragment === this.fragment\n    ) {\n      return this;\n    }\n\n    const ret = new URI();\n    ret._scheme = scheme;\n    ret._authority = authority;\n    ret._path = path;\n    ret._query = query;\n    ret._fragment = fragment;\n\n    if (ret.isFile()) {\n      ret._path = normalize(ret._path);\n    }\n\n    URI._validate(ret);\n\n    return ret;\n  }\n\n  // ---- printing/externalize ---------------------------\n\n  /**\n   *\n   * @param skipEncoding Do not encode the result, default is `true`\n   */\n  public toString(skipEncoding: boolean = true): string {\n    if (!skipEncoding) {\n      if (!this._formatted) {\n        this._formatted = URI._asFormatted(this, false);\n      }\n      return this._formatted;\n    } else {\n      // we don't cache that\n      return URI._asFormatted(this, true);\n    }\n  }\n\n  public toURL(): any {\n    let url = '';\n\n    if (this._scheme) {\n      url += `${this._scheme}:`;\n\n      if (this._authority || this._scheme === 'file') {\n        url += '//';\n      }\n    }\n\n    if (this._authority) {\n      url += this._authority;\n    }\n\n    if (this._path) {\n      url += this._path;\n    }\n\n    if (this._query) {\n      url += `?${this._query}`;\n    }\n\n    if (this._fragment) {\n      url += `#${this._fragment}`;\n    }\n\n    return url;\n  }\n\n  public toJSON(): any {\n    const res = {\n      fsPath: this.fsPath,\n      external: this.toString(true),\n      $mid: 1,\n    } as IUriState;\n\n    if (this.path) {\n      res.path = this.path;\n    }\n\n    if (this.scheme) {\n      res.scheme = this.scheme;\n    }\n\n    if (this.authority) {\n      res.authority = this.authority;\n    }\n\n    if (this.query) {\n      res.query = this.query;\n    }\n\n    if (this.fragment) {\n      res.fragment = this.fragment;\n    }\n\n    return res;\n  }\n\n  public toJSONPointer(): string {\n    return this.fragment ? `#${this.fragment || '/'}` : '';\n  }\n\n  public queryParams(): { [key: string]: string } {\n    const params = {};\n    const queries = this.query.split('&');\n\n    for (const param of queries) {\n      const [key, value] = param.split('=');\n      params[key] = value;\n    }\n\n    return params;\n  }\n\n  public fileExtension(param: string): string {\n    const params = this.queryParams();\n    const value = params[param];\n\n    if (value) {\n      return extname(value);\n    }\n\n    return '';\n  }\n}\n","export * from './path';\n","/* tslint:disable */\n\n// adapted from https://github.com/wjordan/browser-path/blob/master/src/node_path.ts\n\n// TODO: really, all we need is a basic normalize function...\n// should take paths like foo/bar/../fee.json and return foo/fee.json\n// note have to handle the OS differences, and test lots of combinations (can use part of test suite from browser-path library)\n\n/**\n * Emulates Node's `path` module. This module contains utilities for handling and\n * transforming file paths. **All** of these methods perform only string\n * transformations. The file system is not consulted to check whether paths are\n * valid.\n * @see http://nodejs.org/api/path.html\n * @class\n */\n\n// The platform-specific file separator. BrowserFS uses `/`.\nconst sep: string = '/';\n\nconst _replaceRegex = new RegExp('//+', 'g');\n\n/**\n * Normalize a string path, taking care of '..' and '.' parts.\n *\n * When multiple slashes are found, they're replaced by a single one; when the path contains a trailing slash, it is preserved. On Windows backslashes are used.\n * @example Usage example\n *   normalize('/foo/bar//baz/asdf/quux/..')\n *   // returns\n *   '/foo/bar/baz/asdf'\n * @param {String} p The path to normalize.\n * @return {String}\n */\nexport const normalize = (p: string): string => {\n  // Special case: '' -> '.'\n  if (p === '') {\n    p = '.';\n  }\n  // It's very important to know if the path is relative or not, since it\n  // changes how we process .. and reconstruct the split string.\n  var absolute = p.charAt(0) === sep;\n  // Remove repeated //s\n  p = _removeDuplicateSeps(p);\n  // Try to remove as many '../' as possible, and remove '.' completely.\n  var components = p.split(sep);\n  var goodComponents: string[] = [];\n  for (var idx = 0; idx < components.length; idx++) {\n    var c = components[idx];\n    if (c === '.') {\n      continue;\n    } else if (\n      c === '..' &&\n      (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))\n    ) {\n      // In the absolute case: Path is relative to root, so we may pop even if\n      // goodComponents is empty (e.g. /../ => /)\n      // In the relative case: We're getting rid of a directory that preceded\n      // it (e.g. /foo/../bar -> /bar)\n      goodComponents.pop();\n    } else {\n      goodComponents.push(c);\n    }\n  }\n\n  // Add in '.' when it's a relative path with no other nonempty components.\n  // Possible results: '.' and './' (input: [''] or [])\n  // @todo Can probably simplify this logic.\n  if (!absolute && goodComponents.length < 2) {\n    switch (goodComponents.length) {\n      case 1:\n        if (goodComponents[0] === '') {\n          goodComponents.unshift('.');\n        }\n        break;\n      default:\n        goodComponents.push('.');\n    }\n  }\n  p = goodComponents.join(sep);\n  if (absolute && p.charAt(0) !== sep) {\n    p = sep + p;\n  }\n  return p;\n};\n\n/**\n * Join all arguments together and normalize the resulting\n *\n * Arguments must be strings.\n * @example Usage\n *   join('/foo', 'bar', 'baz/asdf', 'quux', '..')\n *   // returns\n *   '/foo/bar/baz/asdf'\n *\n *   join('foo', {}, 'bar')\n *   // throws exception\n *   TypeError: Arguments to join must be strings\n * @param [String,...] paths Each component of the path\n * @return [String]\n */\nexport const join = (...paths: any[]): string => {\n  // Required: Prune any non-strings from the  I also prune empty segments\n  // so we can do a simple join of the array.\n  var processed: string[] = [];\n  for (var i = 0; i < paths.length; i++) {\n    var segment = paths[i];\n    if (typeof segment !== 'string') {\n      throw new TypeError('Invalid argument type to join: ' + typeof segment);\n    } else if (segment !== '') {\n      processed.push(segment);\n    }\n  }\n  return normalize(processed.join(sep));\n};\n\n/**\n * Resolves to to an absolute\n *\n * If to isn't already absolute from arguments are prepended in right to left\n * order, until an absolute path is found. If after using all from paths still\n * no absolute path is found, the current working directory is used as well.\n * The resulting path is normalized, and trailing slashes are removed unless\n * the path gets resolved to the root directory. Non-string arguments are\n * ignored.\n *\n * Another way to think of it is as a sequence of cd commands in a shell.\n *\n *     resolve('foo/bar', '/tmp/file/', '..', 'a/../subfile')\n *\n * Is similar to:\n *\n *     cd foo/bar\n *     cd /tmp/file/\n *     cd ..\n *     cd a/../subfile\n *     pwd\n *\n * The difference is that the different paths don't need to exist and may also\n * be files.\n * @example Usage example\n *   resolve('/foo/bar', './baz')\n *   // returns\n *   '/foo/bar/baz'\n *\n *   resolve('/foo/bar', '/tmp/file/')\n *   // returns\n *   '/tmp/file'\n *\n *   resolve('wwwroot', 'static_files/png/', '../gif/image.gif')\n *   // if currently in /home/myself/node, it returns\n *   '/home/myself/node/wwwroot/static_files/gif/image.gif'\n * @param [String,...] paths\n * @return [String]\n */\nexport const resolve = (...paths: string[]): string => {\n  // Monitor for invalid paths, throw out empty paths, and look for the *last*\n  // absolute path that we see.\n  let processed: string[] = [];\n\n  for (var i = 0; i < paths.length; i++) {\n    var p = paths[i];\n    if (typeof p !== 'string') {\n      throw new TypeError('Invalid argument type to join: ' + typeof p);\n    } else if (p !== '') {\n      // Remove anything that has occurred before this absolute path, as it\n      // doesn't matter.\n      if (p.charAt(0) === sep) {\n        processed = [];\n      }\n      processed.push(p);\n    }\n  }\n  // Special: Remove trailing slash unless it's the root\n  let resolved = normalize(processed.join(sep));\n  if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n    return resolved.substr(0, resolved.length - 1);\n  }\n  // Special: If it doesn't start with '/', it's relative and we need to append\n  // the current directory.\n  if (resolved.charAt(0) !== sep) {\n    // Remove ./, since we're going to append the current directory.\n    if (resolved.charAt(0) === '.' && (resolved.length === 1 || resolved.charAt(1) === sep)) {\n      resolved = resolved.length === 1 ? '' : resolved.substr(2);\n    }\n    // Append the current directory, which *must* be an absolute\n    // var cwd = process.cwd(); // not available in browser\n    const cwd: string = '';\n\n    if (resolved !== '') {\n      // cwd will never end in a /... unless it's the root.\n      resolved = normalize(`${cwd}${cwd !== '/' ? sep : ''}${resolved}`);\n    } else {\n      resolved = cwd;\n    }\n  }\n  return resolved;\n};\n\n/**\n * Solve the relative path from from to to.\n *\n * At times we have two absolute paths, and we need to derive the relative path\n * from one to the other. This is actually the reverse transform of\n * resolve, which means we see that:\n *\n *    resolve(from, relative(from, to)) == resolve(to)\n *\n * @example Usage example\n *   relative('C:\\\\orandea\\\\test\\\\aaa', 'C:\\\\orandea\\\\impl\\\\bbb')\n *   // returns\n *   '..\\\\..\\\\impl\\\\bbb'\n *\n *   relative('/data/orandea/test/aaa', '/data/orandea/impl/bbb')\n *   // returns\n *   '../../impl/bbb'\n * @param {String} from\n * @param {String} to\n * @return [String]\n */\nexport const relative = (from: string, to: string): string => {\n  var i: number;\n  // Alright. Let's resolve these two to absolute paths and remove any\n  // weirdness.\n  from = resolve(from);\n  to = resolve(to);\n  var fromSegs = from.split(sep);\n  var toSegs = to.split(sep);\n  // Remove the first segment on both, as it's '' (both are absolute paths)\n  toSegs.shift();\n  fromSegs.shift();\n  // There are two segments to this path:\n  // * Going *up* the directory hierarchy with '..'\n  // * Going *down* the directory hierarchy with foo/baz/bat.\n  var upCount = 0;\n  var downSegs: string[] = [];\n  // Figure out how many things in 'from' are shared with 'to'.\n  for (i = 0; i < fromSegs.length; i++) {\n    var seg = fromSegs[i];\n    if (seg === toSegs[i]) {\n      continue;\n    }\n    // The rest of 'from', including the current element, indicates how many\n    // directories we need to go up.\n    upCount = fromSegs.length - i;\n    break;\n  }\n  // The rest of 'to' indicates where we need to change to. We place this\n  // outside of the loop, as toSegs.length may be greater than fromSegs.length.\n  downSegs = toSegs.slice(i);\n  // Special case: If 'from' is '/'\n  if (fromSegs.length === 1 && fromSegs[0] === '') {\n    upCount = 0;\n  }\n  // upCount can't be greater than the number of fromSegs\n  // (cd .. from / is still /)\n  if (upCount > fromSegs.length) {\n    upCount = fromSegs.length;\n  }\n  // Create the final string!\n  var rv = '';\n  for (i = 0; i < upCount; i++) {\n    rv += '../';\n  }\n  rv += downSegs.join(sep);\n  // Special case: Remove trailing '/'. Happens if it's all up and no down.\n  if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n    rv = rv.substr(0, rv.length - 1);\n  }\n  return rv;\n};\n\n/**\n * Return the directory name of a  Similar to the Unix `dirname` command.\n *\n * Note that BrowserFS does not validate if the path is actually a valid\n * directory.\n * @example Usage example\n *   dirname('/foo/bar/baz/asdf/quux')\n *   // returns\n *   '/foo/bar/baz/asdf'\n * @param [String] p The path to get the directory name of.\n * @return [String]\n */\nexport const dirname = (p: string): string => {\n  // We get rid of //, but we don't modify anything else (e.g. any extraneous .\n  // and ../ are kept intact)\n  p = _removeDuplicateSeps(p);\n  var absolute = p.charAt(0) === sep;\n  var sections = p.split(sep);\n  // Do 1 if it's /foo/bar, 2 if it's /foo/bar/\n  if (sections.pop() === '' && sections.length > 0) {\n    sections.pop();\n  }\n  // # of sections needs to be > 1 if absolute, since the first section is '' for '/'.\n  // If not absolute, the first section is the first part of the path, and is OK\n  // to return.\n  if (sections.length > 1 || (sections.length === 1 && !absolute)) {\n    return sections.join(sep);\n  } else if (absolute) {\n    return sep;\n  } else {\n    return '.';\n  }\n};\n\n/**\n * Return the last portion of a  Similar to the Unix basename command.\n * @example Usage example\n *   basename('/foo/bar/baz/asdf/quux.html')\n *   // returns\n *   'quux.html'\n *\n *   basename('/foo/bar/baz/asdf/quux.html', '.html')\n *   // returns\n *   'quux'\n * @param [String] p\n * @param [String?] ext\n * @return [String]\n */\nexport const basename = (p: string, ext: string = ''): string => {\n  // Special case: Normalize will modify this to '.'\n  if (p === '') {\n    return p;\n  }\n  // Normalize the string first to remove any weirdness.\n  p = normalize(p);\n  // Get the last part of the string.\n  var sections = p.split(sep);\n  var lastPart = sections[sections.length - 1];\n  // Special case: If it's empty, then we have a string like so: foo/\n  // Meaning, 'foo' is guaranteed to be a directory.\n  if (lastPart === '' && sections.length > 1) {\n    return sections[sections.length - 2];\n  }\n  // Remove the extension, if need be.\n  if (ext.length > 0) {\n    var lastPartExt = lastPart.substr(lastPart.length - ext.length);\n    if (lastPartExt === ext) {\n      return lastPart.substr(0, lastPart.length - ext.length);\n    }\n  }\n  return lastPart;\n};\n\n/**\n * Return the extension of the path, from the last '.' to end of string in the\n * last portion of the  If there is no '.' in the last portion of the path\n * or the first character of it is '.', then it returns an empty string.\n * @example Usage example\n *   extname('index.html')\n *   // returns\n *   '.html'\n *\n *   extname('index.')\n *   // returns\n *   '.'\n *\n *   extname('index')\n *   // returns\n *   ''\n * @param [String] p\n * @return [String]\n */\nexport const extname = (p: string): string => {\n  p = normalize(p);\n  var sections = p.split(sep);\n  p = sections.pop() || '';\n  // Special case: foo/file.ext/ should return '.ext'\n  if (p === '' && sections.length > 0) {\n    p = sections.pop() || '';\n  }\n  if (p === '..') {\n    return '';\n  }\n  var i = p.lastIndexOf('.');\n  if (i === -1 || i === 0) {\n    return '';\n  }\n  return p.substr(i);\n};\n\n/**\n * Checks if the given path is an absolute\n *\n * Despite not being documented, this is a tested part of Node's path API.\n * @param [String] p\n * @return [Boolean] True if the path appears to be an absolute\n */\nexport const isAbsolute = (p: string): boolean => {\n  return p.length > 0 && p.charAt(0) === sep;\n};\n\n/**\n * Unknown. Undocumented.\n */\nexport const _makeLong = (p: string): string => {\n  return p;\n};\n\nexport const _removeDuplicateSeps = (p: string): string => {\n  p = p.replace(_replaceRegex, sep);\n  return p;\n};\n","var map = {\n\t\".\": 143,\n\t\"./\": 143,\n\t\"./index\": 143,\n\t\"./index.js\": 143\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 706;","import _ from 'lodash';\n\nimport { updateInputWithAuth } from '@platform/utils/authorization';\nimport { safeParse } from '@platform/utils/json';\nimport { getConfigVar } from '@platform/utils/config';\nimport { encodeFileId } from '@platform/utils/instances';\nimport { replaceVariables } from '@platform/utils/variables';\nimport { getEndpointFromSpecs } from '@platform/utils/specs/swagger';\n\nexport const scenarioPathLocations = ['before', 'scenarios', 'after', 'utilities'];\n\nexport const splitLogicPath = ({ locations = [], path = '' }) => {\n  const result = {\n    location: '',\n    path,\n  };\n\n  if (!locations || !(locations instanceof Array)) {\n    return result;\n  }\n\n  const match = path.match(new RegExp(`${locations.join('|').replace(/\\$/g, '\\\\$')}`));\n\n  if (match) {\n    result.location = match[0];\n    result.path = _.trimStart(result.path.replace(result.location, ''), '.');\n  }\n\n  return result;\n};\n\nexport const assertionsPassed = ({ assertions = [] } = {}) => {\n  let passed = true;\n\n  for (const a of assertions) {\n    if (!_.get(a, 'result.pass')) {\n      passed = false;\n      break;\n    }\n  }\n\n  return passed;\n};\n\nexport const stepResultMeta = ({ stepResult } = {}) => {\n  const meta = {\n    className: 'is-plain',\n    type: 'plain',\n    code: 2,\n    status: 'not run',\n  };\n\n  if (_.isEmpty(stepResult)) {\n    return meta;\n  }\n\n  meta.status = _.get(stepResult, 'output.status') || 'run';\n\n  if (_.gt(stepResult.failCount, 0)) {\n    meta.type = 'negative';\n    meta.code = 0;\n  } else if (_.gt(stepResult.passCount, 0)) {\n    meta.type = 'positive';\n    meta.code = 1;\n  }\n\n  meta.className = `is-${meta.type}`;\n\n  return meta;\n};\n\nexport const stepName = (step, { skipToken, mappedScenarioNames } = {}) => {\n  const targetStep = step || {};\n\n  let name = targetStep.name;\n\n  if (_.isEmpty(name)) {\n    switch (targetStep.type) {\n      case 'http':\n        if (skipToken) {\n          name = _.get(targetStep, 'input.url') || '!emptyUrl!';\n        } else {\n          name = `${_.get(targetStep, 'input.method', 'GET').toUpperCase()} ${_.get(\n            targetStep,\n            'input.url'\n          ) || '!emptyUrl!'}`;\n        }\n\n        break;\n      case 'ref':\n        const refName = _.get(targetStep, 'input.name', '');\n        const ref = _.get(targetStep, 'input.$ref', '');\n        const refId = _.last(ref.split('/'));\n        name = _.get(mappedScenarioNames, refId);\n\n        if (_.isEmpty(name)) {\n          if (_.isEmpty(refName)) {\n            name = ref || '!emptyRef!';\n          } else {\n            name = `${refName} [${ref}]`;\n          }\n        }\n\n        break;\n      default:\n        name = targetStep.name || 'Un-named';\n    }\n  }\n\n  return name;\n};\n\nexport const stepToken = (step, { maxLength = 999 } = {}) => {\n  const targetStep = step || {};\n\n  const data = {\n    name: null,\n    icon: null,\n    className: '',\n  };\n\n  switch (targetStep.type) {\n    case 'http':\n      const method = _.get(targetStep, 'input.method', 'get');\n      data.name = method.substring(0, maxLength);\n      break;\n    case 'ref':\n      data.name = 'REF';\n      break;\n    case 'script':\n      data.name = 'SCRIPT';\n      break;\n    default:\n      break;\n  }\n\n  return data;\n};\n\nexport const newStep = ({ type, name, input, before, after } = {}) => {\n  const step = {\n    type: type || 'http',\n    name: name || '',\n    input: input || {\n      method: 'get',\n      url: '',\n    },\n  };\n\n  if (before) {\n    step.before = before;\n  }\n\n  if (after) {\n    step.after = after;\n  }\n\n  return step;\n};\n\nexport const scenarioName = scenario => {\n  if (!scenario) {\n    return 'Error: undefined scenario.';\n  }\n\n  if (scenario.hasOwnProperty('$ref')) {\n    if (scenario.$ref) {\n      return scenario.$ref;\n    } else {\n      return 'Invalid scenario ref.';\n    }\n  } else {\n    return scenario.name || 'No name.';\n  }\n};\n\nexport const newScenario = ({ name, steps } = {}) => {\n  return {\n    name: name || 'New Scenario',\n    steps: steps || [newStep()],\n  };\n};\n\nexport const prepareStepRun = ({ step, specs, variables }) => {\n  const afterAssertions = _.get(step, 'after.assertions', []);\n\n  if (_.isEmpty(specs) || _.isEmpty(afterAssertions)) {\n    return step;\n  }\n\n  return {\n    ...step,\n  };\n};\n\nexport const prepareScenarioRun = ({ scenario, specs, variables }) => {\n  if (_.isEmpty(specs)) {\n    return scenario;\n  }\n\n  const newSteps = [];\n\n  for (const step of scenario.steps) {\n    newSteps.push(prepareStepRun({ step, specs, variables }));\n  }\n\n  return {\n    ...scenario,\n    steps: newSteps,\n  };\n};\n\nexport const prepareCollectionRun = ({ collection, specs, variables }) => {\n  if (_.isEmpty(specs)) {\n    return collection;\n  }\n\n  const newScenarios = [];\n\n  for (const scenario of collection.data.scenarios) {\n    newScenarios.push(prepareScenarioRun({ scenario, specs, variables }));\n  }\n\n  return {\n    ...collection,\n    scenarios: newScenarios,\n  };\n};\n\nconst flattenRefStep = refStep => {\n  const scenarioSteps = _.get(refStep, 'input.spec.steps');\n  const outputSteps = _.get(refStep, 'output.steps');\n\n  if (_.isEmpty(outputSteps) || _.isEmpty(scenarioSteps)) {\n    return [];\n  }\n\n  let steps = [];\n\n  for (const step of scenarioSteps) {\n    const stepResult = outputSteps[step.id];\n    if (step.type === 'ref') {\n      steps = steps.concat(flattenRefStep(stepResult));\n      continue;\n    }\n\n    steps.push(stepResult);\n  }\n\n  return steps;\n};\n\nexport const flattenRefOutput = steps => {\n  if (_.isEmpty(steps)) {\n    return;\n  }\n\n  let newSteps = [];\n\n  for (const stepId in steps) {\n    if (!_.has(steps, stepId)) {\n      continue;\n    }\n\n    const step = steps[stepId];\n\n    if (step.type === 'ref') {\n      newSteps = newSteps.concat(flattenRefStep(step));\n    } else {\n      newSteps.push(step);\n    }\n  }\n\n  return newSteps;\n};\n\nexport const computeAllScenarios = ({ collection = {} }) => {\n  let scenarios = [];\n  for (const path of scenarioPathLocations) {\n    scenarios = scenarios.concat(_.values(_.get(collection, path, {})));\n  }\n  return scenarios;\n};\n\nexport const cleanStep = ({ step = {} }) => {\n  step = _.pick(step, ['id', 'type', 'name', 'description', 'input', 'before', 'after']);\n\n  return step;\n};\n\nexport const cleanScenario = ({ scenario = {} }) => {\n  scenario = _.pick(scenario, ['id', 'name', 'description', 'steps']);\n\n  scenario.steps = scenario.steps || [];\n  for (const i in scenario.steps) {\n    if (!Object.prototype.hasOwnProperty.call(scenario.steps, i)) {\n      continue;\n    }\n\n    scenario.steps[i] = cleanStep({ step: scenario.steps[i] });\n  }\n\n  return scenario;\n};\n\nexport const cleanCollection = ({ collection = {} }) => {\n  collection = _.cloneDeep(\n    _.pick(collection, [\n      'scenarioVersion',\n      'name',\n      'description',\n      'settings',\n      'before',\n      'scenarios', // deprecated\n      'main',\n      'after',\n      'utilities', // deprecated\n      'utils',\n    ])\n  );\n\n  for (const path of scenarioPathLocations) {\n    const scenarios = _.get(collection, path, []);\n    for (const i in scenarios) {\n      if (!Object.prototype.hasOwnProperty.call(scenarios, i)) {\n        continue;\n      }\n\n      const target = [...path.split('.'), i];\n      _.set(collection, target, cleanScenario({ scenario: _.get(collection, target) }));\n    }\n  }\n\n  return collection;\n};\n\nexport const githubExample = {\n  name: 'GitHub Gists',\n  description:\n    \"This 2 step example scenario demonstrates how to fetch a list of gists (step 1), save the id of the first one, and use that id to fetch the gist details (step 2).\\nClick the **Run Scenario** button above to run it, click the steps below or on the left to explore how it's put together.\\nThe GitHub API has rate limits, so this scenario will sometimes fail if those limits have been reached!\",\n  steps: [\n    {\n      type: 'http',\n      name: 'List Gists',\n      input: {\n        url: 'https://api.github.com/gists',\n        method: 'get',\n      },\n      after: {\n        assertions: [\n          {\n            target: 'output.status',\n            op: 'eq',\n            expected: 200,\n          },\n        ],\n        transforms: [\n          {\n            target: '$.ctx.gistId',\n            source: 'output.body[0].id',\n          },\n        ],\n      },\n    },\n    {\n      type: 'http',\n      name: 'Get Gist',\n      input: {\n        method: 'get',\n        url: 'https://api.github.com/gists/{$.ctx.gistId}',\n      },\n      after: {\n        assertions: [\n          {\n            target: 'output.body.id',\n            op: 'eq',\n            expected: '{$.ctx.gistId}',\n          },\n        ],\n      },\n    },\n  ],\n};\n\nexport const todosExample = {\n  name: 'Todos API Crud',\n  description:\n    'This scenario sends 4 HTTP requests to the Stoplight Todos demo API, which is hosted at http://todos.stoplight.io.\\nBefore running it, you **must** set the todos-apikey environment variable below! Set it to \"123\" - very secure API, we know :).\\nOf note in this scenario is the usage of the $.ctx.todoId variable. This variable is set in the capture section of the first step, \"Create Todo\".',\n  steps: [\n    {\n      type: 'http',\n      name: 'Create Todo',\n      input: {\n        method: 'post',\n        url: 'http://todos.stoplight.io/todos?apikey={$$.env.todos-apikey}',\n        body: {\n          name: 'demo todo',\n          completed: false,\n        },\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      },\n      after: {\n        assertions: [\n          {\n            target: 'output.status',\n            op: 'eq',\n            expected: 201,\n          },\n        ],\n        transforms: [\n          {\n            target: '$.ctx.todoId',\n            source: 'output.body.id',\n          },\n        ],\n      },\n    },\n    {\n      type: 'http',\n      name: 'Get Todo',\n      input: {\n        method: 'get',\n        url: 'http://todos.stoplight.io/todos/{$.ctx.todoId}',\n      },\n      after: {\n        assertions: [\n          {\n            target: 'output.status',\n            op: 'eq',\n            expected: 200,\n          },\n        ],\n      },\n    },\n    {\n      type: 'http',\n      name: 'Update Todo',\n      input: {\n        method: 'put',\n        url: 'http://todos.stoplight.io/todos/{$.ctx.todoId}?apikey={$$.env.todos-apikey}',\n        body: {\n          completed: true,\n        },\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      },\n      after: {\n        assertions: [\n          {\n            target: 'output.status',\n            op: 'eq',\n            expected: 200,\n          },\n          {\n            target: 'output.body.completed',\n            op: 'eq',\n            expected: true,\n          },\n        ],\n      },\n    },\n    {\n      type: 'http',\n      name: 'Delete Todo',\n      input: {\n        method: 'delete',\n        url: 'http://todos.stoplight.io/todos/{$.ctx.todoId}?apikey={$$.env.todos-apikey}',\n      },\n      after: {\n        assertions: [\n          {\n            target: 'output.status',\n            op: 'eq',\n            expected: 204,\n          },\n        ],\n      },\n    },\n  ],\n};\n\nexport const anonCollection = {\n  _id: 'scenario-editor',\n  id: 'scenario-editor',\n  name: 'Example Scenario Collection',\n  description:\n    'Welcome! Use scenarios to test, automate, and mashup web APIs. \\n\\nWe\\'ve included some example scenarios on the left, but feel free to explore and add your own scenarios by clicking the \"New Scenario\" button above.\\n\\n**If you like what you see, click the \"Register\" button above to create a free account and unlock all sorts of extra features!**',\n  scenarios: [githubExample, todosExample],\n};\n\nexport const defaultCollection = ({ title = 'My Collection' } = {}) => ({\n  scenarioVersion: '1.1',\n  name: title,\n  description: '',\n  before: {},\n  scenarios: {},\n  after: {},\n  utilities: {},\n});\n\nexport const buildConductorUrl = ({ fileId, docs = false, path, variables = {} } = {}) => {\n  const parts = getConfigVar('SL_PRISM_HOST').split('://');\n  const encodedFileId = encodeFileId(fileId);\n\n  let target = `${parts[0]}://${parts[1]}`;\n\n  if (path) {\n    target += path;\n  }\n\n  const query = [];\n\n  query.push(`__id=${encodedFileId}`);\n\n  if (docs) {\n    query.push('__docs=1');\n  }\n\n  _.forEach(variables, (v, k) => {\n    if (v) {\n      query.push(`${k}=${v}`);\n    }\n  });\n  if (!_.isEmpty(query)) {\n    target += `?${query.join('&')}`;\n  }\n\n  return target;\n};\n\nexport const calculateCoverageReport = ({ endpoints, specs, results, env }) => {\n  const filteredResults = _.filter(results, step => {\n    return _.get(step, 'after.assertions', []).length;\n  });\n\n  const report = {\n    endpointCount: endpoints.length,\n    endpoints: {},\n\n    responseCodes: [],\n    passedCodes: [],\n    coveragePercent: {},\n\n    assertionsCount: 0,\n    basicAssertionsCount: 0,\n  };\n\n  if (_.isEmpty(specs)) {\n    return report;\n  }\n\n  _.forEach(endpoints, endpoint => {\n    const reportEndpoint = {};\n\n    const assertionsByCode = {};\n    _.forEach(filteredResults, step => {\n      const endpointFromSpec = getEndpointFromSpecs({\n        specs,\n        method: _.get(step, 'input.method'),\n        url: _.get(step, 'input.url'),\n        variables: {\n          env,\n        },\n      });\n\n      if (\n        endpointFromSpec &&\n        endpointFromSpec.specId === endpoint.specId &&\n        endpointFromSpec.operationId === endpoint.operationId\n      ) {\n        const assertions = _.get(step, 'after.assertions', []);\n        let statusCode = _.get(step, 'output.status');\n\n        _.forEach(assertions, assertion => {\n          if (assertion.target === 'output.status') {\n            statusCode = assertion.expected;\n          }\n\n          assertionsByCode[statusCode] = (assertionsByCode[statusCode] || []).concat(assertion);\n        });\n      }\n    });\n\n    _.forEach(endpoint.responses, code => {\n      const assertions = assertionsByCode[code] || [];\n\n      const codeReport = {\n        passed: 0,\n        failed: 0,\n        count: assertions.length,\n        icon: 'minus',\n        size: 'large',\n        color: 'warning',\n      };\n\n      _.forEach(assertions, assertion => {\n        if (assertion.pass) {\n          codeReport.passed++;\n        } else {\n          codeReport.failed++;\n        }\n      });\n\n      if (codeReport.failed > 0) {\n        codeReport.color = 'negative';\n        codeReport.icon = 'remove';\n      } else if (codeReport.passed > 0) {\n        codeReport.color = 'positive';\n        codeReport.icon = 'checkmark';\n      }\n\n      report.assertionsCount += codeReport.count;\n      if (code.charAt(0) === '2') {\n        report.basicAssertionsCount += codeReport.count;\n      }\n\n      report.responseCodes.push(code);\n\n      if (codeReport.failed === 0 && codeReport.passed > 0) {\n        report.passedCodes.push(code);\n      }\n\n      reportEndpoint[code] = codeReport;\n    });\n\n    report.endpoints[endpoint.operationId] = reportEndpoint;\n  });\n\n  // count of all codes\n  report.codeCount = report.responseCodes.length;\n  // count of all codes that is passing\n  report.passedCodeCount = report.passedCodes.length;\n\n  report.basicCodeCount = _.filter(report.responseCodes, code => code.charAt(0) === '2').length;\n  report.passedBasicCodeCount = _.filter(report.passedCodes, code => code.charAt(0) === '2').length;\n\n  report.coveragePercent = {\n    all: Math.round((report.passedCodeCount / report.codeCount) * 100) || 0,\n    basic: Math.round((report.passedBasicCodeCount / report.basicCodeCount) * 100) || 0,\n  };\n\n  report.responseCodes = _.sortBy(_.uniq(report.responseCodes));\n  report.passedCodes = _.uniq(report.passedCodes);\n\n  return report;\n};\n\nexport const getConductorUrl = () => {\n  if (window.Electron) {\n    return `http://localhost:${window.Electron.config.get('prism.port')}/v1`;\n  }\n\n  return `${getConfigVar('SL_PRISM_HOST')}/v1`;\n};\n\nexport const createScenarioStepRequest = ({\n  withCredentials,\n  sessionCookie,\n  cancelToken,\n  collection,\n  skipPrism,\n  stepPath,\n  runMap,\n  specs,\n  ctx,\n  env,\n}) => {\n  let request = {};\n\n  if (skipPrism) {\n    request = convertScenarioStepToHTTPRequest({\n      stepPath,\n      step: _.get(collection, stepPath),\n      variables: {\n        env,\n        ctx,\n      },\n    });\n  } else {\n    request = {\n      method: 'post',\n      url: `${getConductorUrl()}/run`,\n      headers: {\n        'Session-Cookie': sessionCookie,\n      },\n      data: {\n        env,\n        ctx,\n        specs,\n        runMap,\n        collection,\n      },\n      cancelToken,\n      withCredentials,\n    };\n  }\n\n  return request;\n};\n\nexport const convertScenarioStepToHTTPRequest = ({ step = {}, variables = {}, stepPath }) => {\n  let resolvedInput = replaceVariables(step.input, variables);\n\n  // Update the request with correct basic auth headers. Other authorization methods are adding already\n  if (resolvedInput && resolvedInput.auth && resolvedInput.auth.type === 'basic') {\n    resolvedInput = updateInputWithAuth(resolvedInput, resolvedInput.auth);\n  }\n\n  const { method, url, headers, body } = resolvedInput;\n\n  return {\n    method,\n    url,\n    headers,\n    data: body,\n    transformResponse: [\n      output =>\n        convertHTTPResponseToScenarioResult({\n          output,\n          variables,\n          input: { method, url, headers, body },\n          stepPath,\n          step,\n        }),\n    ],\n  };\n};\n\nexport const convertHTTPResponseToScenarioResult = ({\n  output,\n  variables,\n  input,\n  stepPath,\n  step,\n}) => {\n  const result = {};\n\n  _.set(result, stepPath, {\n    ...step,\n    ...variables,\n    input,\n    output: {\n      body: safeParse(output, output),\n    },\n    type: 'http',\n    status: 'completed',\n  });\n\n  return result;\n};\n","import _ from 'lodash';\nimport minilog from 'minilog';\n\nconst hasLocalStorage = typeof window !== 'undefined' && typeof window.localStorage !== 'undefined';\n\nconst levelMap = { debug: 1, info: 2, warn: 3, error: 4 };\n\n// this holds all of our loggers, and is made available in the console in browser environments\nconst registry = {};\n\nconst initializeFilters = ({ level = 'info', clear }) => {\n  if (clear) {\n    minilog.suggest.clear();\n  }\n\n  let filters = [{ n: new RegExp('.*'), l: levelMap[level] }];\n  if (hasLocalStorage) {\n    const persistedFilters = localStorage.getItem('logFilters');\n    if (persistedFilters) {\n      try {\n        filters = JSON.parse(persistedFilters);\n      } catch (e) {\n        console.error(\n          'Logger: could not parse localStorage.logFilters, consider running \"delete localStorage.logFilters\" in the console to reset'\n        );\n      }\n    }\n  }\n\n  _.forOwn(filters, f => {\n    if (_.get(f, 'n')) {\n      f.n = new RegExp(f.n);\n      minilog.suggest._white.push(f);\n    } else {\n      console.error(\n        'Logger: localStorage.logFilters is corrupted, consider running \"delete localStorage.logFilters\" in the console to reset'\n      );\n    }\n  });\n};\n\nconst persistFilters = () => {\n  if (hasLocalStorage) {\n    const filters = _.map(_.cloneDeep(_.get(minilog, 'suggest._white', [])), f => {\n      if (_.isRegExp(f.n)) {\n        f.n = f.n.source;\n      }\n\n      return f;\n    });\n\n    localStorage.setItem('logFilters', JSON.stringify(filters));\n  }\n};\n\nconst updateLogger = props => {\n  const { registryObj = registry, level, path = [], recurse = true, reset } = props;\n\n  let parents = props.parents;\n  if (!parents) {\n    parents = _.isEmpty(path) ? [] : path;\n  }\n\n  const targetLogger = registryObj.logger;\n  if (targetLogger) {\n    const loggerName = `log.${parents.join('.')}` || new RegExp(/.*/);\n\n    // remove existing filter\n    minilog.suggest._white = _.reject(minilog.suggest._white, { n: loggerName });\n\n    // add new filter, or reset\n    if (reset) {\n      console.info(`${loggerName} logLevel reset to global`);\n    } else {\n      minilog.suggest.allow(loggerName, level);\n      console.info(`${loggerName} logLevel changed to ${level}`);\n    }\n  }\n\n  let children = registryObj;\n  if (!_.isEmpty(path)) {\n    children = _.get(registry, path, {});\n  }\n  children = _.omit(children, ['enable', 'reset', 'logger']);\n\n  // recursively update child loggers\n  if (recurse) {\n    _.forOwn(children, (target, name) => {\n      updateLogger({\n        registryObj: target,\n        parents: parents.concat([name]),\n        level,\n        name,\n        reset,\n      });\n    });\n  }\n};\n\nconst updateLoggerFactory = ({ path = [], levelOverride = 'debug', recurse, reset }) => {\n  return (level = levelOverride) => {\n    updateLogger({ path, level, recurse, reset });\n    persistFilters();\n  };\n};\n\nexport const registerLogger = (namespace, name, { defaultLevel = 'info' } = {}) => {\n  if (!namespace || !name) {\n    console.warn('registerLogger requires a namespace and name', { namespace, name });\n    return;\n  }\n\n  const logger = minilog(`log.${namespace}.${name}`);\n\n  registry[namespace] = registry[namespace] || {\n    enable: updateLoggerFactory({ path: [namespace] }),\n    reset: updateLoggerFactory({ path: [namespace], reset: true }),\n  };\n\n  registry[namespace][name] = {\n    enable: updateLoggerFactory({ path: [namespace, name] }),\n    reset: updateLoggerFactory({ path: [namespace, name], reset: true }),\n    logger,\n  };\n\n  return logger;\n};\n\nexport const initLogging = ({ defaultLevel = 'info' } = {}) => {\n  // only enable this logger in the browser\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  minilog.suggest.defaultResult = false;\n  initializeFilters({ level: defaultLevel });\n\n  minilog.enable();\n\n  _.merge(registry, {\n    enable: updateLoggerFactory({ path: [], recurse: false }),\n    reset: () => {\n      minilog.suggest.clear().allow(/.*/, defaultLevel);\n      delete localStorage.logFilters;\n    },\n    logger: minilog,\n  });\n\n  if (typeof window !== 'undefined') {\n    window.log = registry;\n  }\n};\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { IStringObject } from '@core/types';\n\nimport { paddingXMap, paddingYMap } from './classNames';\nimport { colors, defaultColor, defaultSize, sizes } from './enums';\nimport { divClickHandler } from './events';\nimport { Icon, IIcon } from './Icon';\n\nexport interface ICard {\n  className?: string;\n  title?: string;\n  titleMeta?: string;\n  subtitleLeft?: string;\n  subtitleRight?: string;\n  items?: any[];\n  color?: colors;\n  size?: sizes;\n  loading?: boolean;\n  disabled?: boolean;\n  outlined?: boolean;\n  fluid?: boolean;\n  rounded?: boolean;\n  shadow?: boolean;\n  icon?: IIcon;\n  iconProps?: IStringObject<any>;\n  onClick?: divClickHandler;\n}\n\nexport const Card = ({\n  className,\n  icon,\n  iconProps = {},\n  title,\n  titleMeta,\n  subtitleLeft,\n  subtitleRight,\n  items = [],\n  color = defaultColor,\n  size = defaultSize,\n  loading,\n  disabled,\n  fluid,\n  rounded,\n  shadow,\n  onClick,\n}: ICard) => {\n  const colorVal = colors[color];\n  const enabled = !disabled && !loading;\n  // const sizeVal = sizes[size];\n\n  const textSize = cn({\n    'text-md': size < sizes.md,\n    'text-lg': size === sizes.md,\n    'text-xl': size > sizes.md,\n  });\n\n  const smallerTextSize = cn({\n    'text-xs': size < sizes.md,\n    'text-sm': size === sizes.md,\n    'text-md': size > sizes.md,\n  });\n\n  let contentElem;\n  if (items.length === 1) {\n    contentElem = <div className={`pt-${paddingYMap[size]} ${smallerTextSize}`}>{items[0]}</div>;\n  } else if (items.length) {\n    contentElem = (\n      <ul className={`ml-1 pl-4 pt-${paddingYMap[size]} ${smallerTextSize}`}>\n        {items.map((i, k) => (\n          <li key={k}>{i}</li>\n        ))}\n      </ul>\n    );\n  }\n\n  const clickHandler =\n    enabled && onClick\n      ? (e: any) => {\n          onClick(e);\n        }\n      : undefined;\n\n  return (\n    <div\n      className={cn(\n        className,\n        'rounded border',\n        `px-${paddingXMap[size]}`,\n        `py-${paddingYMap[size]}`,\n        `border-${colorVal}-light`,\n        {\n          'w-100': fluid,\n          'rounded-full': rounded,\n          shadow,\n          'cursor-pointer': clickHandler,\n          [`bg-${colorVal}-lightest`]: color !== defaultColor,\n          [`hover:border-${colorVal}`]: clickHandler,\n        }\n      )}\n      onClick={clickHandler}\n    >\n      <div className={cn('flex font-bold items-center', textSize)}>\n        {icon && (\n          <div className=\"mr-2\">\n            <Icon icon={icon} className=\"text-grey-dark\" {...iconProps} />\n          </div>\n        )}\n\n        <div className=\"flex-1 mr-4\">{title}</div>\n\n        {titleMeta && <div>{titleMeta}</div>}\n      </div>\n\n      <div className={cn('flex text-muted', smallerTextSize)}>\n        <div className=\"flex-1 mr-6\">{subtitleLeft}</div>\n        <div>{subtitleRight}</div>\n      </div>\n\n      {contentElem}\n    </div>\n  );\n};\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { faSpinner } from '@fortawesome/pro-solid-svg-icons/faSpinner';\n\nimport { colors, themes } from './enums';\nimport { divClickHandler } from './events';\nimport { Icon, IIcon } from './Icon';\nimport { IPopupPosition, Popup, PopupTriggerRenderer } from './Popup';\n\nexport type DropdownChildRenderer = (renderItem: (opts: IDropdownChild) => any) => void;\n\nexport interface IDropdownSection {\n  label?: string;\n  children: Array<IDropdownChild | DropdownChildRenderer>;\n}\n\nexport interface IDropdownChild {\n  title: string;\n  onClick?: divClickHandler;\n  onMouseDown?: divClickHandler;\n  subtitle?: string;\n  icon?: IIcon;\n  color?: colors;\n  active?: boolean;\n  disabled?: boolean;\n  loading?: boolean;\n  context?: any;\n}\n\nexport interface IDropdown extends IPopupPosition {\n  renderTrigger: PopupTriggerRenderer;\n  computeSections: () => IDropdownSection[];\n  theme?: themes;\n}\n\nexport class Dropdown extends React.PureComponent<IDropdown> {\n  public render() {\n    const { theme, renderTrigger, computeSections, ...popupProps } = this.props;\n\n    return (\n      <Popup\n        {...popupProps}\n        renderTrigger={renderTrigger}\n        renderContent={(attributes: any) => {\n          const sections = computeSections();\n          return (\n            <div className=\"shadow bg-white rounded py-2\" {...attributes}>\n              {sections.map((s, i) => {\n                return this._renderSection(s, i);\n              })}\n            </div>\n          );\n        }}\n      />\n    );\n  }\n\n  private _renderSection = (section: IDropdownSection, index: number) => {\n    return (\n      <div key={index} className=\"foo\">\n        {section.children.map((child, i) => {\n          if (child instanceof Function) {\n            return child(this._renderChild);\n          }\n\n          return this._renderChild(child, i);\n        })}\n      </div>\n    );\n  };\n\n  private _renderChild = (child: IDropdownChild, index?: number) => {\n    const { disabled, loading } = child;\n\n    return (\n      <div\n        key={index}\n        className={cn(\n          `flex items-center hover:bg-darken-50 cursor-pointer py-2 pl-4 pr-8 border-r-4 border-${\n            child.active ? colors[child.color || colors.active] : 'transparent'\n          }`,\n          {\n            'opacity-75': disabled,\n            'cursor-wait': loading,\n            'cursor-not-allowed': disabled && !loading,\n          }\n        )}\n        onClick={child.onClick}\n        onMouseDown={child.onMouseDown}\n      >\n        {child.icon && (\n          <div\n            className={`w-12 text-center -ml-4 text-${colors[child.color || colors.grey]}`}\n            style={{ fontSize: '0.9em', marginTop: 2 }}\n          >\n            <Icon icon={loading ? faSpinner : child.icon} pulse={loading} />\n          </div>\n        )}\n\n        <div className=\"text-sm\">\n          <div className=\"font-bold\">{child.title}</div>\n          {child.subtitle && (\n            <div className=\"text-muted whitespace-no-wrap mt-1/2\">{child.subtitle}</div>\n          )}\n        </div>\n      </div>\n    );\n  };\n}\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { inputFormHandler } from './events';\nimport { ListScroller } from './ListScroller';\nimport { Popup } from './Popup';\n\nexport type IDropdownInputRenderInput = (\n  attributes: {\n    value: string;\n    onChange: inputFormHandler;\n    onFocus: inputFormHandler;\n    onBlur: inputFormHandler;\n    ref: (el: HTMLInputElement) => void;\n  }\n) => any;\n\nexport type IDropdownOnItemSelect = (item: IDropdownInputItem) => string;\n\nexport interface IDropdownInputItem {\n  name: string;\n}\n\nexport interface IDropdownInput {\n  query: string;\n  renderInput: IDropdownInputRenderInput;\n  onItemSelect: IDropdownOnItemSelect;\n  items: IDropdownInputItem[];\n  emptyMsg?: string;\n}\n\nexport interface IDropdownInputState {\n  originalQuery: string;\n  query: string;\n  isFocused: boolean;\n}\n\nexport class DropdownInput extends React.Component<IDropdownInput, IDropdownInputState> {\n  private _input?: HTMLInputElement;\n  private _rowHeight = 27;\n  private _maxVisibleRows = 10;\n\n  constructor(props: IDropdownInput) {\n    super(props);\n\n    this.state = {\n      isFocused: false,\n      originalQuery: this.props.query,\n      query: this.props.query,\n    };\n  }\n\n  public componentWillUpdate(nextProps: IDropdownInput, nextState: IDropdownInputState) {\n    if (nextProps.query !== nextState.originalQuery) {\n      nextState.originalQuery = nextProps.query;\n      nextState.query = nextProps.query || '';\n    }\n  }\n\n  public render() {\n    const { renderInput } = this.props;\n\n    return (\n      <Popup\n        posX=\"left\"\n        posY=\"bottom\"\n        hideDelay={0}\n        show={this._isOpen}\n        padding={0}\n        offset={{\n          top: -5,\n        }}\n        renderTrigger={attributes => {\n          return (\n            <div {...attributes} className=\"flex-1\">\n              {renderInput({\n                value: this.state.query || '',\n                onChange: this._onChange,\n                onFocus: this._onFocus,\n                onBlur: this._onBlur,\n                ref: this._setRef,\n              })}\n            </div>\n          );\n        }}\n        renderContent={attributes => {\n          return (\n            <div {...attributes} className=\"bg-grey-darkest shadow rounded\">\n              {this._renderItems()}\n            </div>\n          );\n        }}\n      />\n    );\n  }\n\n  private get _isOpen() {\n    return this.state.isFocused;\n  }\n\n  // private get _isEmpty() {\n  //   return this.state.query.trim().length ? false : true;\n  // }\n\n  private _onChange: inputFormHandler = e => {\n    const value = e.currentTarget.value;\n    this.setState({ query: value });\n  };\n\n  private _onFocus: inputFormHandler = () => {\n    this.setState({ isFocused: true });\n  };\n\n  private _onBlur: inputFormHandler = () => {\n    this.setState({ isFocused: false });\n  };\n\n  private _setRef = (el: HTMLInputElement) => {\n    this._input = el;\n  };\n\n  private _renderItems = () => {\n    const { items = [] } = this.props;\n\n    // only grow as much as needed to show the number of items, contraining to a max height\n    // default to row height if we have no items\n    const height =\n      Math.min(items.length * this._rowHeight, this._maxVisibleRows * this._rowHeight) ||\n      this._rowHeight;\n\n    return (\n      <div style={{ height }}>\n        <ListScroller\n          rowCount={items.length}\n          rowHeight={this._rowHeight}\n          noRowsRenderer={this._renderEmptyMsg}\n          rowRenderer={this._renderItem}\n        />\n      </div>\n    );\n  };\n\n  private _renderEmptyMsg = () => {\n    const { emptyMsg = 'No results.' } = this.props;\n    return (\n      <div className=\"px-3 text-lighten-700 flex items-center\" style={{ height: this._rowHeight }}>\n        {emptyMsg}\n      </div>\n    );\n  };\n\n  private _renderItem = ({ key, index, style }: { key: string; index: number; style: any }) => {\n    const { items = [] } = this.props;\n    const item = items[index];\n\n    return (\n      <div\n        key={key}\n        style={style}\n        className={cn('flex items-center px-3 text-lighten-700 hover:bg-lighten-50 cursor-pointer')}\n        onMouseDown={() => {\n          const newValue = this.props.onItemSelect(item);\n\n          if (this._input) {\n            // noop\n          }\n\n          this.setState({\n            query: typeof newValue === 'string' ? newValue : this.state.query,\n          });\n        }}\n      >\n        {item.name}\n      </div>\n    );\n  };\n}\n","import SAlert from 'react-s-alert';\n\n// TODO: timeouts because of: https://github.com/juliancwirko/react-s-alert/issues/49#issuecomment-333866776\nconst _alert = {};\n\n['success', 'warning', 'error', 'info', 'closeAll'].forEach(functionName => {\n  _alert[functionName] = text => {\n    setTimeout(() => {\n      SAlert[functionName](text);\n    }, 0);\n  };\n});\n\nexport const alert = _alert;\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { Button, IButtonProps } from './Button';\nimport { sizes } from './enums';\nimport { Header, IHeader } from './Header';\nimport { ISidebar, Sidebar } from './Sidebar';\n\nexport interface ILayout {\n  content: any;\n  header?: ILayoutHeader | any;\n  sidebar?: ILayoutSidebar;\n  footer?: ILayoutFooter;\n  className?: string;\n}\n\nexport interface ILayoutHeader extends IHeader {}\nexport interface ILayoutSidebar extends ISidebar {}\nexport interface ILayoutFooter {\n  left?: {\n    actions?: IButtonProps[];\n  };\n  right?: {\n    actions?: IButtonProps[];\n  };\n}\n\nconst LayoutFooter = (props: ILayoutFooter) => {\n  const leftActions = props.left && props.left.actions ? props.left.actions : [];\n  const rightActions = props.right && props.right.actions ? props.right.actions : [];\n\n  if (!leftActions.length && !rightActions.length) {\n    return null;\n  }\n\n  return (\n    <div className=\"flex p-6 border-t border-grey-light rounded-b-lg bg-white\">\n      <div>\n        {leftActions.map((action, i) => {\n          return <Button key={i} className=\"mr-2\" size={sizes.lg} {...action} />;\n        })}\n      </div>\n\n      <div className=\"flex-1\" />\n\n      <div>\n        {rightActions.map((action, i) => {\n          return <Button key={i} className=\"ml-2\" size={sizes.lg} {...action} />;\n        })}\n      </div>\n    </div>\n  );\n};\n\nexport class Layout extends React.Component<ILayout> {\n  public render() {\n    const { className, header, sidebar, content, footer } = this.props;\n\n    let headerElem;\n    if (header) {\n      if (React.isValidElement(header)) {\n        headerElem = header;\n      } else {\n        headerElem = <Header {...header} />;\n      }\n    }\n\n    return (\n      <div className={cn('flex flex-col w-full h-full', className)}>\n        {headerElem}\n\n        <div\n          className={cn('flex flex-1 bg-white', {\n            'rounded-t-lg': !headerElem,\n            'rounded-b-lg': !footer,\n          })}\n        >\n          {sidebar && <Sidebar className={cn(sidebar.className)} sections={sidebar.sections} />}\n          <div className=\"flex flex-col flex-1\">{content}</div>\n        </div>\n\n        {footer && <LayoutFooter {...footer} />}\n      </div>\n    );\n  }\n}\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { faTimes } from '@fortawesome/pro-solid-svg-icons/faTimes';\n\nimport { Icon, IIcon } from './Icon';\nimport { Portal } from './Portal';\n\nexport interface IModal {\n  show?: boolean;\n  width?: string | number;\n  className?: string;\n  closeIcon?: IIcon;\n  onDidShow?: () => void;\n  onDidHide?: () => void;\n  pinX?: boolean;\n  offsetX?: number;\n  pinY?: boolean;\n  offsetY?: number;\n  fullscreen?: boolean;\n  renderContent: () => any;\n}\n\nexport class Modal extends React.Component<IModal> {\n  private _escapeListener: any;\n\n  public componentWillMount() {\n    const { show } = this.props;\n\n    if (show) this._show(this.props);\n  }\n\n  public componentWillReceiveProps(nextProps: IModal) {\n    const { show, onDidHide } = this.props;\n\n    if (nextProps.show !== show) {\n      if (nextProps.show) {\n        this._show(nextProps);\n      } else if (!nextProps.show && onDidHide) {\n        this._hide(nextProps);\n      }\n    }\n  }\n\n  public componentWillUnmount() {\n    const { onDidHide } = this.props;\n\n    if (onDidHide) this._hide(this.props);\n  }\n\n  public render() {\n    const {\n      show,\n      width = 900,\n      className,\n      renderContent,\n      onDidHide,\n      closeIcon,\n      pinX,\n      pinY,\n      offsetX,\n      offsetY,\n      fullscreen,\n    } = this.props;\n\n    if (!show) return null;\n\n    const containerStyle: any = { width, maxWidth: '90%' };\n\n    if (pinX || pinY || fullscreen) {\n      containerStyle.position = 'fixed';\n\n      if (pinX) {\n        containerStyle.left = containerStyle.right = offsetX || 30;\n      }\n\n      if (pinY) {\n        containerStyle.top = containerStyle.bottom = offsetY || 30;\n      }\n\n      if (fullscreen) {\n        containerStyle.top = containerStyle.bottom = containerStyle.left = containerStyle.right = 0;\n        containerStyle.width = containerStyle.maxWidth = '100%';\n      }\n    }\n\n    return (\n      <Portal\n        className={cn('z-50 fixed pin flex items-center justify-center w-full h-full py-12', {\n          'overflow-auto': !fullscreen,\n        })}\n      >\n        <div\n          className={cn('z-1 fixed pin select-none', {\n            'bg-black opacity-85': !fullscreen,\n            'bg-grey-lightest': fullscreen,\n          })}\n          onClick={() => onDidHide && onDidHide()}\n        />\n\n        <div\n          className={cn(\n            'z-50 select-text relative',\n            {\n              'm-a bg-white shadow-dark rounded-lg': !fullscreen,\n              'overflow-auto': fullscreen,\n            },\n            className\n          )}\n          style={containerStyle}\n        >\n          {onDidHide && (\n            <div\n              className={cn(\n                'pin-t pin-r z-20 cursor-pointer flex items-center justify-center text-darken-300 hover:text-darken hover:bg-darken-50',\n                {\n                  'absolute w-12 h-12 text-xl': !fullscreen,\n                  'fixed w-24 h-24 text-5xl': fullscreen,\n                }\n              )}\n              onClick={onDidHide}\n            >\n              <Icon icon={closeIcon || faTimes} />\n            </div>\n          )}\n\n          {renderContent()}\n        </div>\n      </Portal>\n    );\n  }\n\n  private _show = (props: any = {}) => {\n    if (!this._escapeListener && typeof document !== 'undefined') {\n      this._escapeListener = document.addEventListener('keydown', this._handleEscape);\n    }\n\n    // if we are already showing, do nothing\n    if (props.show) return;\n\n    if (props.onDidShow) props.onDidShow();\n  };\n\n  private _hide = (props: any = {}) => {\n    if (this._escapeListener && typeof document !== 'undefined') {\n      document.removeEventListener('keydown', this._handleEscape);\n      this._escapeListener = undefined;\n    }\n\n    // if we are not showing, do nothing\n    if (!props.show) return;\n\n    if (props.onDidHide) props.onDidHide();\n  };\n\n  private _handleEscape = (evt: any) => {\n    evt = evt || window.event;\n\n    let isEscape = evt.keyCode === 27;\n\n    if ('key' in evt) {\n      isEscape = evt.key === 'Escape' || evt.key === 'Esc';\n    }\n\n    if (isEscape) {\n      this._hide(this.props);\n    }\n  };\n}\n","import _ from 'lodash';\nimport { routeData } from './routeData';\nimport { omitByRecursively } from '../general';\n\n// takes in an object and recursively removes falsey values from arrays\nexport const compactDeep = ({ data } = {}) => {\n  return omitByRecursively(data, (val, k, { isArray }) => {\n    return (isArray && !val) || (_.isArray(val) && _.isEmpty(val));\n  });\n};\n\n// expects results from routeData { ruleName: matched: [{ path: [], data: {} }] }\nexport const compose = ({ data } = {}) => {\n  if (!data) {\n    return {};\n  }\n\n  let matched = _.flatMap(data, rule => {\n    return rule.matched;\n  });\n  matched = _.compact(matched);\n\n  let paths = [];\n  let values = [];\n\n  _.forEach(matched, object => {\n    paths.push(_.get(object, 'path', []));\n    values.push(_.get(object, 'data', []));\n  });\n\n  const object = _.zipObjectDeep(paths, values);\n\n  return compactDeep({ data: object });\n};\n\n// filters spec based on rules and then composes the results into a new json\nexport const filter = ({ spec = {}, rules = {} }, opts = {}) => {\n  const { search = {} } = opts;\n\n  return compose({\n    data: routeData(\n      { data: spec, rules },\n      {\n        exclusive: true,\n        ...opts,\n        search: {\n          options: {\n            shouldSort: false,\n          },\n          ...search,\n        },\n      }\n    ),\n  });\n};\n","import JsonSchemaGenerator from 'json-schema-generator';\nimport _ from 'lodash';\n\nimport { safeStringify, safeParse } from '../json';\n\n// Extends the base JSON schema with the extend. If extend is a plain object,\n// it will turn it into a JSON schema before merging.\nexport const extendSchema = ({ base, extend, extendIsSchema } = {}) => {\n  const stringSource = safeStringify(base);\n\n  // do not extend if it is using $refs\n  if (stringSource.match(/\"\\$ref\"/g)) {\n    return source;\n  }\n\n  const source = safeParse(base);\n  let target = safeParse(extend);\n\n  if (!extendIsSchema) {\n    try {\n      target = JsonSchemaGenerator(target);\n    } catch (e) {\n      return source;\n    }\n  }\n\n  _.merge(source, target);\n\n  return source;\n};\n","import _ from 'lodash';\nimport URL from 'url-parse';\nimport JsonSchemaGenerator from 'json-schema-generator';\n\nimport { safeStringify, safeParse } from '../json';\nimport { pruneObject } from '../general';\nimport { extendSchema } from '../schemas/json-schema-generator';\nimport { parseDynamicParams, getEndpointFromSpec, computePathParamsFromUri } from '../specs';\nimport { parseQuery } from '../query';\n\n// result is a full collection result object\nexport const collectionResultToHar = ({ result = {} }) => {\n  const harObj = {\n    entries: [],\n  };\n\n  const { scenarios = {} } = result;\n  _.forEach(scenarios, scenario => {\n    const { steps = [] } = scenario;\n    _.forEach(steps, step => {\n      const { input = {}, output = {} } = step;\n\n      let url;\n      let query = {};\n      try {\n        url = new URL(input.url);\n        if (!_.isEmpty(url.search)) {\n          query = parseQuery(url.search);\n        }\n      } catch (e) {\n        console.warn('invalid url', input.url);\n        return;\n      }\n\n      // build the entry\n      const entry = {\n        request: {\n          method: input.method,\n          url: url.origin + url.pathname,\n        },\n      };\n\n      if (!_.isEmpty(input.headers)) {\n        entry.request.headers = _.map(input.headers, (v, k) => ({\n          name: k,\n          value: v,\n        }));\n      }\n\n      if (!_.isEmpty(query)) {\n        entry.request.queryString = _.map(query, (v, k) => ({\n          name: k,\n          value: v,\n        }));\n      }\n\n      if (!_.isEmpty(input.body)) {\n        entry.request.postData = {};\n\n        const contentType = _.get(input, 'headers.Content-Type', '');\n        if (contentType) {\n          entry.request.postData.mimeType = input.headers['Content-Type'];\n        }\n\n        if (contentType.match(/javascript|json/g)) {\n          entry.request.postData.text = safeStringify(input.body);\n        } else {\n          const params = safeParse(input.body);\n          entry.request.postData.params = _.map(params, (v, k) => ({\n            name: k,\n            value: v,\n          }));\n        }\n      }\n\n      // buid the entry response\n      if (!_.isEmpty(output)) {\n        entry.response = {\n          status: output.status,\n        };\n\n        if (!_.isEmpty(output.headers)) {\n          entry.response.headers = _.map(output.headers, (v, k) => ({\n            name: k,\n            value: v,\n          }));\n        }\n\n        if (!_.isEmpty(output.body)) {\n          entry.response.content = {};\n\n          const contentType = _.get(output, 'headers.Content-Type', '');\n          if (contentType) {\n            entry.response.content.mimeType = output.headers['Content-Type'];\n          }\n\n          entry.response.content.text = safeStringify(output.body);\n        }\n      }\n\n      harObj.entries.push(entry);\n    });\n  });\n\n  return harObj;\n};\n\nconst headerBlacklist = [\n  'Content-Type',\n  'Cache-Control',\n  'Connection',\n  'Content-Length',\n  'Date',\n  'Etag',\n  'Server',\n  'Via',\n];\n\nconst extendParameters = ({ targetLocation, targetValue, parameters = [], extraProps = {} }) => {\n  _.forEach(targetValue, ({ name, value }) => {\n    if (_.includes(headerBlacklist, name) || _.startsWith(name, 'X-')) {\n      return;\n    }\n\n    const index = _.findIndex(parameters, { in: targetLocation, name: name });\n    const existing = parameters[index] || {\n      in: targetLocation,\n      name: name,\n    };\n\n    existing.type = typeof safeParse(value, value);\n    _.merge(existing, extraProps);\n\n    if (index < 0) {\n      parameters.push(existing);\n    } else {\n      parameters[index] = existing;\n    }\n  });\n\n  return parameters;\n};\n\nexport const harToSwagger2 = ({ existingSpec = {}, har = {} }) => {\n  const spec = {\n    paths: {},\n  };\n\n  const { entries = [] } = har;\n  _.forEach(entries, entry => {\n    // REQUEST\n    const { request = {} } = entry;\n    const { headers = [], queryString = [], postData = {} } = request;\n\n    const method = _.toLower(request.method);\n    let url;\n    let pathname;\n    try {\n      url = new URL(request.url);\n      pathname = parseDynamicParams({ url: url.pathname || '/' });\n    } catch (e) {\n      console.warn('invalid url', request.url);\n      return;\n    }\n\n    if (!method || !url) {\n      return;\n    }\n\n    // is this path already in the spec?\n    if (!_.isEmpty(existingSpec)) {\n      const endpoint = getEndpointFromSpec({\n        spec: {\n          data: existingSpec,\n        },\n        url,\n      });\n      if (endpoint && endpoint.path) {\n        pathname = endpoint.path;\n      }\n    }\n\n    const targetPath =\n      _.get(existingSpec, ['paths', pathname]) || _.get(spec, ['paths', pathname]) || {};\n    const targetOperation = _.get(targetPath, [method]) || _.get(spec, [method]) || {};\n\n    // content type stuff\n    const consumes = _.first(\n      (postData.mimeType || _.get(_.find(headers, { name: 'Content-Type' }), 'value', '')).split(\n        ';'\n      )\n    );\n    if (consumes) {\n      spec.consumes = spec.consumes || [];\n      spec.consumes.push(consumes);\n      spec.consumes = _.uniq(spec.consumes);\n    }\n\n    // query params\n    if (!_.isEmpty(queryString)) {\n      targetOperation.parameters = extendParameters({\n        targetLocation: 'query',\n        targetValue: queryString,\n        parameters: targetOperation.parameters,\n      });\n    }\n\n    // body params\n    if (!_.isEmpty(postData.params)) {\n      targetOperation.parameters = extendParameters({\n        targetLocation: 'formData',\n        targetValue: postData.params,\n        parameters: targetOperation.parameters,\n      });\n    } else if (!_.isEmpty(postData.text)) {\n      // handle text bodies\n\n      targetOperation.parameters = targetOperation.parameters || [];\n      const index = _.findIndex(targetOperation.parameters, { in: 'body' });\n      const bodyParam = targetOperation.parameters[index] || {\n        in: 'body',\n        name: 'body',\n      };\n\n      const example = safeParse(postData.text, postData.text);\n      let newSchema = {};\n      try {\n        newSchema = JsonSchemaGenerator(JSON.parse(postData.text));\n      } catch (e) {}\n\n      if (bodyParam.schema) {\n        bodyParam.schema = extendSchema({\n          base: bodyParam.schema,\n          extend: newSchema,\n          extendIsSchema: true,\n        });\n      } else {\n        bodyParam.schema = newSchema;\n      }\n\n      // add the request body example\n      if (consumes && !_.isEmpty(example)) {\n        if (!_.get(bodyParam, ['x-examples', consumes])) {\n          _.set(bodyParam, ['x-examples', consumes], pruneObject(example));\n        }\n      }\n\n      if (index < 0) {\n        targetOperation.parameters.push(bodyParam);\n      } else {\n        targetOperation.parameters[index] = bodyParam;\n      }\n    }\n\n    // RESPONSE\n    const { response = {} } = entry;\n    if (!_.isEmpty(response) && response.status) {\n      // content type stuff\n      const contentHeader = _.find(response.headers, { name: 'Content-Type' });\n      const produces =\n        _.get(response, 'content.mimeType') ||\n        _.first(_.split(_.get(contentHeader, 'value', ''), ';'));\n\n      if (produces) {\n        spec.produces = spec.produces || [];\n        spec.produces.push(produces);\n        spec.produces = _.uniq(spec.produces);\n      }\n\n      const targetResponse = _.get(targetOperation, ['responses', response.status]) || {\n        description: '',\n      };\n\n      // headers\n      if (!_.isEmpty(response.headers)) {\n        targetResponse.headers = targetResponse.headers || {};\n\n        _.forEach(response.headers, ({ name, value }) => {\n          if (_.includes(headerBlacklist, name) || _.startsWith(name, 'X-')) {\n            return;\n          }\n\n          const newHeader = targetResponse.headers[name] || {};\n          if (!newHeader.type || newHeader.type === 'null') {\n            newHeader.type = typeof safeParse(value, value);\n          }\n          targetResponse.headers[name] = newHeader;\n        });\n\n        if (_.isEmpty(targetResponse.headers)) {\n          delete targetResponse.headers;\n        }\n      }\n\n      let example = _.get(response, 'content.text');\n      example = safeParse(example, example);\n\n      // schema\n      try {\n        let newSchema = {};\n        newSchema = JsonSchemaGenerator(JSON.parse(_.get(response, 'content.text')));\n        if (targetResponse.schema) {\n          targetResponse.schema = extendSchema({\n            base: targetResponse.schema,\n            extend: newSchema,\n            extendIsSchema: true,\n          });\n        } else {\n          targetResponse.schema = newSchema;\n        }\n      } catch (e) {}\n\n      // example\n      if (produces && !_.isEmpty(example)) {\n        if (!_.get(targetResponse, ['examples', produces])) {\n          _.set(targetResponse, ['examples', produces], pruneObject(example));\n        }\n      }\n\n      targetOperation.responses = targetOperation.responses || {};\n      _.set(targetOperation, ['responses', response.status], targetResponse);\n    }\n\n    // path params\n    const pathParams = computePathParamsFromUri(pathname);\n    if (!_.isEmpty(pathParams)) {\n      const parameters = extendParameters({\n        targetLocation: 'path',\n        targetValue: pathParams,\n        parameters: targetPath.parameters,\n        extraProps: {\n          type: 'string',\n          required: true,\n        },\n      });\n\n      if (!_.isEmpty(parameters)) {\n        _.set(spec, ['paths', pathname, 'parameters'], parameters);\n      }\n    }\n\n    // SET IT\n    _.set(spec, ['paths', pathname, method], targetOperation);\n  });\n\n  return spec;\n};\n","import _ from 'lodash';\nimport pluralize from 'pluralize';\n\nimport { generateOperationId } from './http';\n\nimport { omitByRecursively } from '../general';\nimport { safeParse } from '../json';\nimport { filter } from '../json/compose';\nimport { replaceVariables } from '../variables';\nimport { collectionResultToHar, harToSwagger2 } from '../har';\nimport { buildExampleFromSchema, dereferenceSchema } from '../schemas';\nimport { createURL, cleanSlashes, buildPathParts } from '../url';\nimport { newStep } from '../collections';\nimport { pathToHash } from '../history';\n\nexport const parameterTypes = ['path', 'query', 'header', 'body', 'formData'];\nexport const rootParameterTypes = ['path', 'query', 'header', 'body', 'formData'];\n\nexport const buildEndpointFromOperation = props => {\n  const {\n    swagger,\n    method,\n    path,\n    operation = {},\n    specId,\n    specName,\n    $ref,\n    specUrl,\n    hashPath,\n  } = props;\n\n  const { summary, operationId, responses } = operation;\n\n  const scheme = _.get(swagger, 'schemes[0]', 'http');\n  const schemeReg = new RegExp(`^${scheme}://`);\n  let host = swagger.host || '{$$.env.host}';\n  if (!schemeReg.test(host)) {\n    host = `${scheme}://${host}`;\n  }\n\n  return {\n    $ref,\n    specUrl,\n    hashPath,\n    specName,\n    specId,\n    method,\n    path,\n    url: cleanSlashes(`${host}/${swagger.basePath || ''}/${path}`),\n    summary,\n    operationId: operationId || generateOperationId({ method, path }),\n    responses: Object.keys(responses || {}),\n  };\n};\n\nexport const getResponseSchemaFromOperation = ({ spec, method, path, code }) => {\n  const swagger = safeParse(_.get(spec, 'data'));\n\n  if (_.isEmpty(swagger)) {\n    return;\n  }\n\n  const response = _.get(swagger, ['paths', path, _.toLower(method), 'responses', code], {});\n\n  return dereferenceSchema(response.schema || response, swagger);\n};\n\nexport const createStepFromOperation = props => {\n  const {\n    spec,\n    url,\n    host,\n    basePath,\n    method,\n    path,\n    code,\n    pathParamsToCtx = false,\n    paramsToCtx = false,\n  } = props;\n\n  const swagger = safeParse(_.get(spec, 'data', spec));\n\n  if (_.isEmpty(swagger)) {\n    return;\n  }\n\n  const operation = _.get(swagger, ['paths', path, _.toLower(method)]);\n  if (!operation) {\n    return;\n  }\n\n  const step = {\n    input: {\n      method: _.toLower(method),\n      url: cleanSlashes(url || `${host || `{$$.env.host}`}/${basePath || ''}/${path || ''}`),\n    },\n  };\n\n  const name = operation.summary || operation.operationId || generateOperationId({ method, path });\n\n  if (!_.isEmpty(name)) {\n    step.name = name;\n  }\n\n  let body;\n  const headers = {};\n  const query = {};\n  const pathParams = {};\n\n  const parameters = _.concat(\n    _.get(swagger, ['paths', path, 'parameters'], []),\n    _.get(operation, 'parameters', [])\n  );\n\n  for (const param of parameters) {\n    switch (param.in) {\n      case 'body':\n        body = _.get(param, ['x-examples', _.first(_.keys(param['x-examples']))]);\n\n        if (_.isEmpty(body)) {\n          body = buildExampleFromSchema(param.schema, {\n            definitions: swagger.definitions,\n          });\n        }\n        break;\n      case 'query':\n        query[param.name] = param.default || (paramsToCtx && `{$.ctx.${param.name}}`) || '';\n        break;\n      case 'header':\n        headers[param.name] = param.default || (paramsToCtx && `{$.ctx.${param.name}}`) || '';\n        break;\n      case 'path':\n        pathParams[param.name] = param.default || (paramsToCtx && `{$.ctx.${param.name}}`) || '';\n        break;\n      default:\n        break;\n    }\n  }\n\n  if (body) {\n    step.input.body = body;\n    headers['Content-Type'] =\n      _.get(operation, 'produces[0]') || _.get(swagger, 'produces[0]') || 'application/json';\n  }\n\n  // we want to cycle through operation security before swagger security\n  const securityArray = _.concat(operation.security || [], swagger.security || []);\n\n  if (!_.isEmpty(securityArray)) {\n    let securityDefinition;\n\n    for (const security of securityArray) {\n      if (securityDefinition) {\n        continue;\n      }\n\n      for (const key in security) {\n        if (securityDefinition) {\n          continue;\n        }\n        securityDefinition = _.get(swagger, ['securityDefinitions', key]);\n      }\n    }\n\n    let specVarPrefix = _.trimStart(_.camelCase(spec.path), '-');\n    if (specVarPrefix) {\n      specVarPrefix = `${specVarPrefix}-`;\n    }\n\n    if (_.get(securityDefinition, 'type') === 'apiKey') {\n      const securityDefinitionName =\n        securityDefinition.default || `{$$.env.${specVarPrefix}${securityDefinition.name}}`;\n\n      switch (securityDefinition.in) {\n        case 'header':\n          headers[securityDefinition.name] = securityDefinitionName;\n          break;\n        case 'query':\n          query[securityDefinition.name] = securityDefinitionName;\n          break;\n        default:\n          break;\n      }\n    } else if (_.get(securityDefinition, 'type') === 'basic') {\n      step.input.auth = {\n        type: 'basic',\n        username: `{$$.env.${specVarPrefix}username}`,\n        password: `{$$.env.${specVarPrefix}password}`,\n      };\n    } else if (_.get(securityDefinition, 'type') === 'oauth2') {\n      step.input.auth = {\n        type: 'oauth2',\n      };\n    }\n  }\n\n  if (!_.isEmpty(headers)) {\n    step.input.headers = headers;\n  }\n\n  if (!_.isEmpty(query)) {\n    step.input.query = query;\n  }\n\n  if (!_.isEmpty(pathParams)) {\n    step.input.params = pathParams;\n  }\n\n  if (code) {\n    step.after = {\n      assertions: [\n        {\n          target: 'output.status',\n          op: 'eq',\n          expected: Number(code),\n        },\n      ],\n    };\n  }\n\n  if (pathParamsToCtx) {\n    step.input.url = step.input.url.replace(/{([a-zA-Z0-9-_]*)}/g, '{$.ctx.$1}');\n  }\n\n  return newStep(step);\n};\n\n// method is optional, if no method, will just find path\nexport const getEndpointFromSpec = ({ spec, method, url, variables }) => {\n  const swagger = safeParse(_.get(spec, 'data'));\n\n  if (_.isEmpty(swagger)) {\n    return;\n  }\n\n  // ignore any host variables at the beginning of the url\n  let parsedPath = _.replace(url, new RegExp('^{[^/]+}/'), '/');\n\n  // replace any path variables\n  parsedPath = replaceVariables(parsedPath, variables);\n\n  // ignore query string\n  parsedPath = _.split(parsedPath, '?')[0] || '';\n  parsedPath = createURL(parsedPath).pathname || parsedPath;\n\n  parsedPath = cleanSlashes(parsedPath);\n  if (swagger.basePath) {\n    parsedPath = parsedPath.replace(swagger.basePath, '');\n  }\n\n  if (_.isEmpty(parsedPath)) {\n    parsedPath = '/';\n  } else {\n    // replace these characters - they are the {dynamicParam} ones\n    parsedPath = parsedPath.replace(/\\%7B/gi, '{').replace(/\\%7D/gi, '}');\n  }\n\n  const requestPathParts = buildPathParts(parsedPath);\n  let endpoint;\n  let endpointExactScore = -1;\n\n  for (const path in swagger.paths) {\n    if (!Object.prototype.hasOwnProperty.call(swagger.paths, path)) {\n      continue;\n    }\n\n    const specPath = ['paths', path, _.toLower(method)];\n\n    const operation = method ? _.get(swagger, specPath) : {};\n    if (!operation) {\n      continue;\n    }\n\n    if (parsedPath === path) {\n      const specUrl = _.get(spec, 'urls.export', '');\n      const hashPath = pathToHash({ path });\n\n      return buildEndpointFromOperation({\n        swagger,\n        method,\n        path,\n        operation,\n        specId: spec.id,\n        specName: spec.name || _.get(swagger, 'info.title'),\n        specUrl,\n        hashPath,\n        $ref: `${specUrl}${hashPath}`,\n      });\n    }\n\n    const pathParts = buildPathParts(path);\n    if (pathParts.length !== requestPathParts.length) {\n      continue;\n    }\n\n    let match = true;\n    let epExactScore = 0;\n\n    for (const i in pathParts) {\n      // If it's a dynamic path part, auto match, and continue\n      if (pathParts[i].match(/\\{.*?\\}/)) {\n        continue;\n      }\n\n      if (pathParts[i] !== requestPathParts[i]) {\n        match = false;\n        epExactScore = -1;\n        break;\n      } else {\n        epExactScore++;\n      }\n    }\n\n    if (match && epExactScore > endpointExactScore) {\n      const specPath = ['paths', path, _.toLower(method)];\n      const specUrl = _.get(spec, 'urls.export', '');\n      const hashPath = pathToHash({ path: specPath });\n\n      endpointExactScore = epExactScore;\n      endpoint = buildEndpointFromOperation({\n        swagger,\n        method,\n        path,\n        operation,\n        specId: spec.id,\n        specName: spec.name || _.get(swagger, 'info.title'),\n        specUrl,\n        hashPath,\n        $ref: `${specUrl}${hashPath}`,\n      });\n    }\n  }\n\n  return endpoint;\n};\n\nexport const getEndpointFromSpecs = ({ specs, ...extraProps }) => {\n  if (_.isEmpty(specs)) {\n    return null;\n  }\n\n  if (!(specs instanceof Array)) {\n    return getEndpointFromSpec({ spec: specs, ...extraProps });\n  }\n\n  for (const spec of specs) {\n    const endpoint = getEndpointFromSpec({ spec, ...extraProps });\n\n    if (endpoint) {\n      return endpoint;\n    }\n  }\n\n  return null;\n};\n\nexport const getResponseSchemaFromSpecs = ({ specs, method, url, code, variables }) => {\n  const endpoint = getEndpointFromSpecs({ specs, method, url, variables });\n  let schema;\n\n  if (endpoint) {\n    const spec = _.find(specs, { id: endpoint.specId });\n    schema = getResponseSchemaFromOperation({\n      spec,\n      method,\n      path: endpoint.path,\n      code,\n    });\n  }\n\n  return schema;\n};\n\nexport const getEndpointsFromSpec = spec => {\n  const swagger = safeParse(_.get(spec, 'data'));\n\n  if (_.isEmpty(swagger)) {\n    return [];\n  }\n\n  const endpoints = [];\n\n  for (const path in swagger.paths) {\n    if (!Object.prototype.hasOwnProperty.call(swagger.paths, path)) {\n      continue;\n    }\n\n    for (const method in swagger.paths[path]) {\n      if (method === 'parameters') {\n        continue;\n      }\n\n      const specPath = ['paths', path, method];\n      const specUrl = _.get(spec, 'urls.export', '');\n      const operation = _.get(swagger, specPath);\n      const hashPath = pathToHash({ path: specPath });\n\n      endpoints.push(\n        buildEndpointFromOperation({\n          swagger,\n          method,\n          path,\n          operation,\n          specName: spec.name || _.get(swagger, 'info.title'),\n          specId: spec.id,\n          specUrl,\n          hashPath,\n          $ref: `${specUrl}${hashPath}`,\n        })\n      );\n    }\n  }\n\n  return endpoints;\n};\n\nexport const getEndpointsFromSpecs = (specs = []) => {\n  if (_.isEmpty(specs)) {\n    return [];\n  }\n\n  if (!(specs instanceof Array)) {\n    return getEndpointsFromSpec(specs);\n  }\n\n  let endpoints = [];\n\n  for (const spec of specs) {\n    endpoints = endpoints.concat(getEndpointsFromSpec(spec));\n  }\n\n  return endpoints;\n};\n\nexport const computePathParamsFromUri = (uri = '', { existingParams } = {}) => {\n  const parameters = _.reject(existingParams || [], { in: 'path' });\n\n  const matches = uri.match(/{([\\w]*)}/g);\n  if (matches) {\n    for (const m of matches) {\n      parameters.push({\n        name: m.replace(/{|}/g, ''),\n        in: 'path',\n        type: 'string',\n        required: true,\n      });\n    }\n  }\n\n  return parameters;\n};\n\nexport const computeNewPath = ({ paths, path = '', methods = [], skipConfirm }) => {\n  const updates = [];\n\n  if (_.isEmpty(path)) {\n    window.alert('You must specify a path.');\n    return;\n  }\n\n  if (_.isEmpty(methods)) {\n    window.alert('You must specify at least one method.');\n    return;\n  }\n\n  if (path.charAt(0) !== '/') {\n    path = `/${path}`;\n  }\n\n  let r = true;\n  const existing = _.get(paths, path);\n  if (existing) {\n    r = skipConfirm || window.confirm(`The ${path} path already exists in this spec. Extend it?`);\n  }\n\n  if (!r) {\n    return;\n  }\n\n  const newPath = _.cloneDeep(existing) || {};\n  const parameters = computePathParamsFromUri(path, { existingParams: newPath.parameters });\n  if (newPath && !_.isEmpty(parameters)) {\n    newPath.parameters = parameters;\n  }\n\n  for (const m of methods) {\n    newPath[m] = {\n      responses: {\n        200: {\n          description: '',\n          schema: {\n            type: 'object',\n            properties: {},\n          },\n        },\n      },\n    };\n  }\n\n  updates.push({\n    transformation: 'set',\n    path: ['paths', path],\n    value: newPath,\n  });\n\n  return updates;\n};\n\nexport const computeNewResource = ({ path = '', paths = {}, name, schema }) => {\n  const updates = [];\n\n  // check basic requirements\n\n  if (_.isEmpty(name)) {\n    window.alert('You must specify a model name.');\n    return;\n  }\n\n  if (_.isEmpty(path)) {\n    window.alert('You must specify a base resource path.');\n    return;\n  }\n\n  if (path.charAt(0) !== '/') {\n    path = `/${path}`;\n  }\n\n  const capitalName = _.upperFirst(name);\n  const capitalNameTrimmed = capitalName.trim();\n  const kebabName = _.kebabCase(name).toLowerCase();\n  const resourcePath = `${path}/{${_.camelCase(name)}Id}`;\n\n  // are we extending? if so, double check w user\n\n  let r = true;\n\n  const existingPath = paths[path];\n  const existingResourcePath = paths[resourcePath];\n  if (existingPath) {\n    r = window.confirm(`The ${path} path already exists in this spec. Extend it?`);\n  } else if (existingResourcePath) {\n    r = window.confirm(`The ${resourcePath} path already exists in this spec. Extend it?`);\n  }\n  if (!r) {\n    return;\n  }\n\n  let readSchema = {};\n  let writeSchema = {};\n  let readWriteSchema = {};\n  if (!_.isEmpty(schema)) {\n    const ruleFactory = perm => {\n      return {\n        r: {\n          recursive: true,\n          circular: true,\n          matcher({ key, value }) {\n            return (\n              !_.includes(['readOnly', 'writeOnly'], key) &&\n              (_.isObject(value) && value.type && _.get(value, perm))\n            );\n          },\n          dataFactory: ({ value }) => _.omit(value, [perm]),\n        },\n        required: {\n          recursive: true,\n          circular: true,\n          matcher: ({ key, value }) => key === 'required',\n        },\n      };\n    };\n    const requiredFilterRules = {\n      r: {\n        recursive: true,\n        circular: true,\n        matcher: ({ key, value }) => true,\n      },\n      required: {\n        recursive: true,\n        circular: true,\n        matcher: ({ key, value }) => key === 'required',\n        dataFactory: ({ spec, parentPath, value }) => {\n          const properties = _.keys(_.get(spec, parentPath.concat('properties')));\n          const required = _.intersection(value, properties);\n          return required.length ? required : undefined;\n        },\n      },\n    };\n\n    readSchema = filter(\n      {\n        spec: schema,\n        rules: ruleFactory('readOnly'),\n      },\n      {\n        exclusive: false,\n      }\n    );\n    readSchema = filter(\n      {\n        spec: readSchema,\n        rules: requiredFilterRules,\n      },\n      {\n        exclusive: false,\n      }\n    );\n\n    writeSchema = filter({\n      spec: schema,\n      rules: ruleFactory('writeOnly'),\n    });\n    writeSchema = filter(\n      {\n        spec: writeSchema,\n        rules: requiredFilterRules,\n      },\n      {\n        exclusive: false,\n      }\n    );\n\n    readWriteSchema = omitByRecursively(schema, (v, k) => {\n      return (\n        _.includes(['readOnly', 'writeOnly'], k) ||\n        (_.isObject(v) && v.type && (_.get(v, 'readOnly') || _.get(v, 'writeOnly')))\n      );\n    });\n    readWriteSchema = filter(\n      {\n        spec: readWriteSchema,\n        rules: requiredFilterRules,\n      },\n      {\n        exclusive: false,\n      }\n    );\n  }\n\n  // build common schema\n  let commonSchemaTitle = `${capitalName} Common`;\n  let commonSchema = {\n    title: commonSchemaTitle,\n    description: `The properties that are shared amongst all versions of the ${capitalName} model.`,\n    type: 'object',\n    properties: {},\n    ...readWriteSchema,\n  };\n  let commonSchemaKey = `${kebabName}-common`;\n  let commonNamespace = `#/definitions/${commonSchemaKey}`;\n  updates.push({\n    transformation: 'set',\n    path: ['definitions', commonSchemaKey],\n    value: commonSchema,\n  });\n\n  // build input schema\n  let inputSchemaTitle = `${capitalName} Input`;\n  let inputSchema = {\n    title: inputSchemaTitle,\n    description: `The properties that are allowed when creating or updating a ${capitalName}.`,\n    allOf: [\n      {\n        $ref: commonNamespace,\n      },\n      {\n        type: 'object',\n        properties: {},\n        ...writeSchema,\n      },\n    ],\n  };\n  let inputSchemaKey = `${kebabName}-input`;\n  let inputNamespace = `#/definitions/${inputSchemaKey}`;\n  updates.push({\n    transformation: 'set',\n    path: ['definitions', inputSchemaKey],\n    value: inputSchema,\n  });\n\n  // build output schema\n  let outputSchemaTitle = `${capitalName} Output`;\n  let outputSchema = {\n    title: outputSchemaTitle,\n    description: `The properties that are included when fetching a list of ${pluralize(\n      capitalName\n    )}.`,\n    allOf: [\n      {\n        type: 'object',\n        properties: {},\n        ...readSchema,\n      },\n      {\n        $ref: commonNamespace,\n      },\n    ],\n  };\n  let outputSchemaKey = `${kebabName}-output`;\n  let outputNamespace = `#/definitions/${outputSchemaKey}`;\n  updates.push({\n    transformation: 'set',\n    path: ['definitions', outputSchemaKey],\n    value: outputSchema,\n  });\n\n  // build outputDetailed detailed schema\n  let outputDetailedSchemaTitle = `${capitalName} Output Detailed`;\n  let outputDetailedSchema = {\n    title: outputDetailedSchemaTitle,\n    description: `The properties that are included when fetching a single ${capitalName}.`,\n    allOf: [\n      {\n        $ref: outputNamespace,\n      },\n      {\n        type: 'object',\n        properties: {},\n      },\n    ],\n  };\n  let outputDetailedSchemaKey = `${kebabName}-output-detailed`;\n  let outputDetailedNamespace = `#/definitions/${outputDetailedSchemaKey}`;\n  updates.push({\n    transformation: 'set',\n    path: ['definitions', outputDetailedSchemaKey],\n    value: outputDetailedSchema,\n  });\n\n  // create the path operations\n\n  const newPath = _.cloneDeep(existingPath) || {};\n  const parameters = computePathParamsFromUri(path);\n  if (!existingPath && !_.isEmpty(parameters)) {\n    newPath.parameters = parameters;\n  }\n\n  // list\n  newPath.get = {\n    summary: `List ${capitalName}`,\n    operationId: `find${pluralize(capitalNameTrimmed)}`,\n    responses: {\n      200: {\n        description: '',\n        schema: {\n          type: 'array',\n          items: {\n            $ref: outputNamespace,\n          },\n        },\n      },\n    },\n  };\n\n  // if (false && example) {\n  //   _.set(newPath, ['get', 'responses', 200, 'examples', 'application/json'], example);\n  // }\n\n  // create\n  newPath.post = {\n    summary: `Create ${capitalName}`,\n    operationId: `create${capitalNameTrimmed}`,\n    parameters: [\n      {\n        in: 'body',\n        name: 'body',\n        schema: {\n          $ref: inputNamespace,\n        },\n      },\n    ],\n    responses: {\n      201: {\n        description: '',\n        schema: {\n          $ref: outputDetailedNamespace,\n        },\n      },\n    },\n  };\n\n  // if (false && example) {\n  //   _.set(newPath, ['post', 'parameters', 0, 'schema', 'example'], example);\n  //   _.set(newPath, ['post', 'responses', 201, 'examples', 'application/json'], example);\n  // }\n\n  // create the resourcePath operations\n\n  const newResourcePath = _.cloneDeep(existingResourcePath) || {};\n  const resourceParameters = computePathParamsFromUri(resourcePath);\n  if (!existingResourcePath && !_.isEmpty(resourceParameters)) {\n    newResourcePath.parameters = resourceParameters;\n  }\n\n  // get\n  newResourcePath.get = {\n    summary: `Get ${capitalName}`,\n    operationId: `get${capitalNameTrimmed}`,\n    responses: {\n      200: {\n        description: '',\n        schema: {\n          $ref: outputDetailedNamespace,\n        },\n      },\n    },\n  };\n\n  // if (false && example) {\n  //   _.set(newResourcePath, ['get', 'responses', 200, 'examples', 'application/json'], example);\n  // }\n\n  // update\n  newResourcePath.put = {\n    summary: `Update ${capitalName}`,\n    operationId: `update${capitalNameTrimmed}`,\n    parameters: [\n      {\n        in: 'body',\n        name: 'body',\n        schema: {\n          $ref: inputNamespace,\n        },\n      },\n    ],\n    responses: {\n      200: {\n        description: '',\n        schema: {\n          $ref: outputDetailedNamespace,\n        },\n      },\n    },\n  };\n\n  // if (false && example) {\n  //   _.set(newResourcePath, ['put', 'parameters', 0, 'schema', 'example'], example);\n  //   _.set(newResourcePath, ['put', 'responses', 200, 'examples', 'application/json'], example);\n  // }\n\n  // delete\n  newResourcePath.delete = {\n    summary: `Delete ${capitalName}`,\n    operationId: `delete${capitalNameTrimmed}`,\n    responses: {\n      204: {\n        description: '',\n      },\n    },\n  };\n\n  // set the new paths\n\n  updates.push({\n    transformation: 'set',\n    path: ['paths', path],\n    value: newPath,\n  });\n  updates.push({\n    transformation: 'set',\n    path: ['paths', resourcePath],\n    value: newResourcePath,\n  });\n\n  return updates;\n};\n\nexport const computeUpdatesFromCollectionResult = ({ spec, result = {} }) => {\n  const har = collectionResultToHar({ result });\n  const newSpec = harToSwagger2({ existingSpec: _.cloneDeep(spec), har }) || {};\n\n  const updates = [];\n\n  if (newSpec.consumes) {\n    updates.push({\n      transformation: 'set',\n      path: ['consumes'],\n      value: _.uniq((spec.consumes || []).concat(newSpec.consumes)),\n    });\n  }\n\n  if (newSpec.produces) {\n    updates.push({\n      transformation: 'set',\n      path: ['produces'],\n      value: _.uniq((spec.produces || []).concat(newSpec.produces)),\n    });\n  }\n\n  if (spec.paths) {\n    _.forEach(newSpec.paths, (path, k) => {\n      // are we extending? if so, double check w user\n      let r = true;\n      const existingPath = _.get(spec, `paths.${k}`);\n      if (existingPath) {\n        r = window.confirm(`The ${k} path already exists in this spec. Extend it?`);\n      }\n\n      if (!r) {\n        return;\n      }\n\n      updates.push({\n        transformation: 'set',\n        path: ['paths', k],\n        value: _.merge(spec.paths[k], path),\n      });\n    });\n  }\n\n  return updates;\n};\n","import * as React from 'react';\n\nimport { themes } from './enums';\nimport { ListScroller } from './ListScroller';\nimport { IPanelListItem, PanelListItem } from './PanelListItem';\nimport { IPopupPosition } from './Popup';\n\nexport interface IPanelList {\n  items: IPanelListItem[];\n  theme?: themes;\n  className?: string;\n  emptyMsg?: string;\n  scrollToIndex?: number;\n  popup?: IPopupPosition;\n  onClick?: (item: IPanelListItem) => void;\n}\n\nexport class PanelList extends React.Component<IPanelList, {}> {\n  private _rowHeight = 45;\n\n  public render() {\n    const { items, className, scrollToIndex } = this.props;\n\n    return (\n      <ListScroller\n        className={className}\n        rowCount={items.length}\n        rowHeight={this._rowHeight}\n        noRowsRenderer={this._renderEmptyMsg}\n        rowRenderer={this._renderItem}\n        scrollToIndex={scrollToIndex}\n      />\n    );\n  }\n\n  private _renderEmptyMsg = () => {\n    const { emptyMsg = 'Nothing to show here.' } = this.props;\n    return <div className=\"ta-c py-4 px-4 text-muted-light\">{emptyMsg}</div>;\n  };\n\n  private _renderItem = ({ key, index, style }: { key: string; index: number; style: any }) => {\n    const { items, onClick, popup = {}, theme = themes.dark } = this.props;\n\n    const item = items[index] || {};\n\n    return (\n      <div key={key} style={style}>\n        <PanelListItem onClick={onClick} popup={popup} theme={theme} {...item} />\n      </div>\n    );\n  };\n}\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nimport { faSpinner } from '@fortawesome/pro-solid-svg-icons/faSpinner';\n\nimport { borderClassName, iconClassName, paddingClassName, radiusClassName } from './classNames';\nimport { colors, defaultColor, defaultSize, posX, sizes, themes } from './enums';\nimport { divClickHandler, inputClickHandler, inputFormHandler } from './events';\nimport { Icon } from './Icon';\n\nexport interface ITextFieldProps {\n  value: string;\n  onChange: inputFormHandler;\n  onEnter?: () => void;\n  onEscape?: () => void;\n  placeholder?: string;\n  type?: string;\n  label?: any;\n  error?: string;\n  className?: string;\n  style?: object;\n  inputClassName?: string;\n  theme?: themes;\n  color?: colors;\n  size?: sizes;\n  loading?: boolean;\n  disabled?: boolean;\n  solid?: boolean;\n  fluid?: boolean;\n  rounded?: boolean;\n  shadow?: boolean;\n  outlined?: boolean;\n  icon?: any;\n  focus?: boolean;\n  iconPos?: posX;\n  onClick?: inputClickHandler;\n  onFocus?: inputFormHandler;\n  onBlur?: inputFormHandler;\n  onClickIcon?: divClickHandler;\n}\n\nexport class TextField extends React.Component<ITextFieldProps> {\n  private input?: HTMLInputElement | null;\n\n  public componentDidMount() {\n    const { focus } = this.props;\n\n    if (this.input) {\n      if (focus) {\n        this.input.focus();\n        this.input.select();\n      }\n    }\n  }\n\n  public render() {\n    const {\n      value = '',\n      placeholder,\n      type = 'text',\n      label,\n      error,\n      className,\n      style,\n      inputClassName,\n      theme,\n      color = defaultColor,\n      size = defaultSize,\n      loading,\n      disabled,\n      solid,\n      fluid,\n      rounded,\n      shadow,\n      outlined = true,\n      icon,\n      iconPos = posX.right,\n      onClickIcon,\n    } = this.props;\n\n    const colorVal = colors[color];\n    const sizeVal = sizes[size];\n    const enabled = !disabled && !loading;\n    const hasBorder = !solid;\n\n    const paddingClasses = paddingClassName({\n      size,\n      iconClickable: onClickIcon ? true : false,\n      iconPos: icon ? iconPos : undefined,\n    });\n\n    const borderClasses = outlined\n      ? borderClassName({\n          theme,\n          color,\n          size,\n          enabled,\n          hasBorder,\n          error,\n        })\n      : '';\n\n    const radiusClasses = radiusClassName({ rounded });\n\n    let bgClasses = {};\n    if (theme && theme === themes.dark) {\n      bgClasses = {\n        [`bg-transparent`]: hasBorder,\n        [`bg-darken-200`]: !hasBorder,\n        [`focus:bg-lighten-50`]: true,\n        ['opacity-75']: !enabled,\n      };\n    } else if (theme && theme === themes.light) {\n      bgClasses = {\n        [`bg-transparent`]: hasBorder,\n        [`bg-darken-50`]: !hasBorder,\n        [`focus:bg-darken-100`]: !hasBorder,\n        [`focus:bg-darken-50`]: hasBorder,\n        ['opacity-75']: !enabled,\n      };\n    } else {\n      bgClasses = {\n        [`focus:bg-${colorVal}-lightest`]: enabled && hasBorder,\n        [`bg-${colorVal}-lightest`]: !hasBorder,\n        [`focus:bg-${colorVal}-lighter`]: enabled && !hasBorder,\n        ['opacity-75']: !enabled,\n      };\n    }\n\n    let textClasses = {};\n    if (theme && theme === themes.dark) {\n      textClasses = {\n        [`text-lighten-600`]: true,\n        [`focus:text-white`]: true,\n      };\n    } else if (theme && theme === themes.light) {\n      // TODO\n    } else {\n      textClasses = {\n        [`text-${colorVal}-darker`]: true,\n        [`hover:text-${colorVal}-darkest`]: enabled && !hasBorder,\n        [`focus:text-${colorVal}-darkest`]: enabled && !hasBorder,\n      };\n    }\n    textClasses[`text-${sizeVal}`] = true;\n    textClasses['text-red'] = error;\n\n    let iconElem;\n    if (icon) {\n      iconElem = (\n        <div\n          className={cn(\n            bgClasses,\n            textClasses,\n            iconClassName({\n              color,\n              size,\n              iconPos,\n              enabled,\n              hasBorder,\n              error,\n              clickable: onClickIcon ? true : false,\n            })\n          )}\n          onClick={enabled ? this.onIconClick : undefined}\n        >\n          <Icon icon={loading ? faSpinner : icon} pulse={loading} />\n        </div>\n      );\n    }\n\n    return (\n      <div\n        className={cn(className, 'TextField flex flex-col', {\n          'w-full': fluid,\n          'theme-light': theme && theme === themes.light,\n          'theme-dark': theme && theme === themes.dark,\n        })}\n      >\n        {label && (\n          <label\n            className={cn(\n              'block tracking-wide ',\n              `text-${colorVal}-dark`,\n              `text-${sizes[size - 1] || sizes[0]}`,\n              {\n                'font-bold': size > sizes.xs,\n                'mb-1/2': size < sizes.md,\n                'mb-1': size === sizes.md,\n                'mb-2': size > sizes.md,\n                'ml-1/2': size > sizes.md,\n              }\n            )}\n            onClick={enabled ? this.onLabelClick : undefined}\n          >\n            {label}\n          </label>\n        )}\n\n        <div\n          className={cn('flex', `h-${sizes[size]}`, radiusClasses, borderClasses, {\n            // shadows\n            shadow,\n          })}\n        >\n          {iconPos === posX.left && iconElem}\n\n          <input\n            spellCheck={false}\n            ref={this.setInputRef}\n            type={type}\n            value={value}\n            placeholder={placeholder}\n            readOnly={!enabled}\n            style={style}\n            className={cn(\n              inputClassName,\n              paddingClasses,\n              bgClasses,\n              textClasses,\n              'appearance-none',\n              {\n                // cursor\n                'cursor-not-allowed': disabled,\n                'cursor-wait': loading,\n\n                // structure\n                'w-full': fluid,\n              }\n            )}\n            onKeyPress={this.onKeyPress}\n            onKeyDown={this.onKeyDown}\n            onChange={this.onChange}\n            onFocus={enabled ? this.onFocus : undefined}\n            onBlur={enabled ? this.onBlur : undefined}\n            onClick={enabled ? this.onInputClick : undefined}\n          />\n\n          {iconPos === posX.right && iconElem}\n        </div>\n      </div>\n    );\n  }\n\n  private onIconClick = (e: any) => {\n    if (this.props.onClickIcon) {\n      this.props.onClickIcon(e);\n    } else if (this.input) {\n      this.input.focus();\n    }\n  };\n\n  private onLabelClick = () => {\n    if (this.input) this.input.focus();\n  };\n\n  private setInputRef = (node: any) => {\n    this.input = node;\n  };\n\n  private onChange = (e: any) => {\n    this.props.onChange(e, {\n      value: e.target.value,\n    });\n  };\n\n  private onKeyPress = (e: any) => {\n    if (this.props.onEnter && e.key === 'Enter') {\n      return this.props.onEnter();\n    }\n  };\n\n  private onKeyDown = (e: any) => {\n    if (this.props.onEscape && e.keyCode === 27) {\n      return this.props.onEscape();\n    }\n  };\n\n  private onInputClick = (e: any) => {\n    if (!this.props.onClick) return;\n\n    this.props.onClick(e, {\n      value: this.props.value,\n    });\n  };\n\n  private onBlur = (e: any) => {\n    if (!this.props.onBlur) return;\n\n    this.props.onBlur(e, {\n      value: this.props.value,\n    });\n  };\n\n  private onFocus = (e: any) => {\n    if (!this.props.onFocus) return;\n\n    this.props.onFocus(e, {\n      value: this.props.value,\n    });\n  };\n}\n","import * as React from 'react';\n\nconst cn: any = require('classnames');\n\nexport interface IToggleState {\n  focused: boolean;\n}\n\nexport interface IToggleProps {\n  id?: string;\n  className?: string;\n  checked: boolean;\n  width?: string;\n  height?: string;\n  disabled?: boolean;\n  onChange?: React.ChangeEventHandler<HTMLInputElement>;\n  style?: React.CSSProperties;\n}\n\nexport class Toggle extends React.Component<IToggleProps, IToggleState> {\n  constructor(props: IToggleProps) {\n    super(props);\n    this.state = {\n      focused: false,\n    };\n  }\n  public render() {\n    const {\n      id,\n      className,\n      checked,\n      width = '40px',\n      height = '20px',\n      disabled,\n      onChange,\n      style = {\n        margin: 0,\n        border: 0,\n        padding: 0,\n      },\n    } = this.props;\n    // Styles originally based on the Zendesk CSS Toggle component here: https://garden.zendesk.com/css-components/forms/checkbox/\n    return (\n      <span className={className} style={style}>\n        <label>\n          <input\n            type=\"checkbox\"\n            id={id}\n            disabled={disabled}\n            onChange={onChange}\n            style={{\n              position: 'absolute',\n              clip: 'rect(1px, 1px, 1px, 1px)',\n            }}\n            onFocus={() => this.setState({ focused: true })}\n            onBlur={() => this.setState({ focused: false })}\n          />\n          <span\n            className={cn(\n              disabled ? 'bg-grey-lighter' : checked ? 'bg-primary' : 'bg-grey',\n              'inline-block bg-contain bg-no-repeat border-none',\n              checked ? 'bg-right' : 'bg-left'\n            )}\n            style={{\n              backgroundImage: `url(\"data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='14' height='14' color='%23FFF'%3E%3Ccircle cx='7' cy='7' r='5' fill='currentColor'/%3E%3C/svg%3E\")`,\n              margin: 0,\n              padding: 0,\n              width,\n              height,\n              transition:\n                'box-shadow .1s ease-in-out,background-color .15s ease-in-out,background-position .15s ease-in-out,color .25s ease-in-out',\n              borderRadius: '100px',\n              boxSizing: 'border-box',\n              boxShadow: this.state.focused ? '0 0 0 3px rgba(31, 115, 183, .35)' : undefined,\n            }}\n          />\n        </label>\n      </span>\n    );\n  }\n}\n","import _ from 'lodash';\n\nconst transformer = () => {\n  const t = {};\n\n  // TO STOPLIGHT SCHEMA\n\n  t._jsonSchemaIsRequired = (schema = {}, field) => {\n    return _.indexOf(schema.required, field) !== -1;\n  };\n\n  t._reduceJsonSchema = (schema = {}) => {\n    let stoplightSchema = {};\n\n    if (schema.type) {\n      stoplightSchema.type = schema.type;\n    }\n\n    let combiner;\n    if (schema.allOf) {\n      combiner = 'allOf';\n    } else if (schema.anyOf) {\n      combiner = 'anyOf';\n    } else if (schema.oneOf) {\n      combiner = 'oneOf';\n    }\n\n    if (combiner) {\n      stoplightSchema = _.clone(schema);\n      stoplightSchema[combiner] = [];\n      for (let part of schema[combiner]) {\n        part = t._reduceJsonSchema(part);\n        if (schema.type) {\n          part.type = schema.type;\n        }\n        stoplightSchema[combiner].push(part);\n      }\n\n      delete stoplightSchema.type;\n    } else if (schema.$ref) {\n      // references\n      stoplightSchema.$ref = schema.$ref;\n    } else if (schema.type === 'object' || schema.properties || schema.patternProperties) {\n      // objects\n      stoplightSchema = _.clone(schema);\n      stoplightSchema.type = stoplightSchema.type || 'object';\n\n      // let stoplight schema children equal schema.children\n      stoplightSchema.children = schema.children || [];\n      let children = schema.properties || [];\n      if (schema.patternProperties) {\n        if (children) {\n          children = _.merge(schema.patternProperties, children);\n        } else {\n          children = schema.patternProperties;\n        }\n      }\n\n      for (const i in children) {\n        if (!Object.prototype.hasOwnProperty.call(children, i)) {\n          continue;\n        }\n\n        const child = t._toStoplightSchema(children[i]);\n        child.name = i;\n        if (t._jsonSchemaIsRequired(schema, i)) {\n          child.required = true;\n        }\n        stoplightSchema.children.push(child);\n      }\n    } else if (schema.type === 'array' || schema.items) {\n      // arrays\n      stoplightSchema = _.clone(schema);\n      stoplightSchema.type = stoplightSchema.type || 'array';\n\n      if (Object.keys(schema.items || []).length) {\n        stoplightSchema.children = [t._toStoplightSchema(schema.items)];\n      } else {\n        stoplightSchema.children = [];\n      }\n    } else {\n      // basic types\n      stoplightSchema = schema;\n    }\n\n    delete stoplightSchema.properties;\n    delete stoplightSchema.patternProperties;\n    delete stoplightSchema.items;\n    delete stoplightSchema.required;\n\n    return stoplightSchema;\n  };\n\n  t._toStoplightSchema = jsonSchema => {\n    let stoplightSchema = jsonSchema;\n\n    if (_.isEmpty(stoplightSchema)) {\n      return {};\n    }\n\n    return t._reduceJsonSchema(stoplightSchema);\n  };\n\n  t.toStoplightSchema = jsonSchema => {\n    if (typeof jsonSchema === 'string') {\n      jsonSchema = JSON.parse(jsonSchema);\n    }\n\n    return t._toStoplightSchema(_.cloneDeep(jsonSchema));\n  };\n\n  // END TO STOPLIGHT SCHEMA\n\n  // TO JSON SCHEMA\n\n  t._isType = (value, type) => {\n    if (value instanceof Array) {\n      return _.includes(value, type);\n    }\n\n    return value === type;\n  };\n\n  t._reduceStoplightSchema = (schema = {}) => {\n    let jsonSchema = {};\n\n    if (schema.type) {\n      jsonSchema.type = schema.type;\n    }\n\n    // check for combiner type\n    let combiner;\n    if (schema.allOf) {\n      combiner = 'allOf';\n    } else if (schema.anyOf) {\n      combiner = 'anyOf';\n    } else if (schema.oneOf) {\n      combiner = 'oneOf';\n    }\n\n    // if combiner recurse through and reduce\n    if (combiner) {\n      jsonSchema = _.cloneDeep(schema);\n      jsonSchema[combiner] = [];\n      for (let part of schema[combiner]) {\n        jsonSchema[combiner].push(t._reduceStoplightSchema(part));\n      }\n\n      // If all the combination parts have the same type, just set it on the combo parent,\n      // and remove it from the children\n      const types = _.map(jsonSchema[combiner], 'type');\n      if (_.uniq(types).length === 1) {\n        jsonSchema.type = types[0];\n        for (const part of jsonSchema[combiner]) {\n          delete part.type;\n        }\n      }\n    } else if (schema.$ref) {\n      // references\n      jsonSchema.$ref = schema.$ref;\n    } else if (t._isType(schema.type, 'object')) {\n      // objects\n      jsonSchema = schema;\n      jsonSchema.properties = {};\n      jsonSchema.patternProperties = {};\n      jsonSchema.required = [];\n      if (schema.children) {\n        for (const child of schema.children) {\n          if (!child) {\n            continue;\n          }\n\n          if (child.required) {\n            jsonSchema.required.push(child.name);\n          }\n          const newChild = t._toJsonSchema(_.clone(child));\n          delete newChild.name;\n          const key = child.name || '';\n          let props = jsonSchema.properties;\n          if (key.startsWith('^')) {\n            props = jsonSchema.patternProperties;\n          }\n          props[key] = newChild;\n        }\n      }\n\n      if (!Object.keys(jsonSchema.properties).length) {\n        delete jsonSchema.properties;\n      }\n\n      if (!Object.keys(jsonSchema.patternProperties).length) {\n        delete jsonSchema.patternProperties;\n      }\n\n      // objects can't have items\n      delete jsonSchema.items;\n    } else if (t._isType(schema.type, 'array')) {\n      // arrays\n      jsonSchema = schema;\n      if (schema.children instanceof Array) {\n        if (schema.children > 1) {\n          jsonSchema.items = [];\n          for (const child of schema.children) {\n            if (child.required) {\n              jsonSchema.required.push(child.name);\n            }\n            const newChild = t._toJsonSchema(_.clone(child));\n            delete newChild.name;\n            jsonSchema.items.push(newChild);\n          }\n        } else {\n          jsonSchema.items = t._toJsonSchema(schema.children[0]);\n        }\n      } else {\n        jsonSchema.items = t._toJsonSchema(schema.children);\n      }\n\n      // arrays can't have properties\n      delete jsonSchema.properties;\n      delete jsonSchema.patternProperties;\n    } else {\n      // basic types\n      jsonSchema = schema;\n      delete jsonSchema.required;\n    }\n\n    if (_.isEmpty(jsonSchema.required)) {\n      delete jsonSchema.required;\n    }\n\n    delete jsonSchema.children;\n    delete jsonSchema.name;\n    delete jsonSchema._active;\n    delete jsonSchema._isOpen;\n\n    // attempt a primitive conversion (need to make sure we store number representation, not string, for validations) if type is not string!\n    // ie maxLength: \"5\" -> maxLength: 5, \"[]\" -> []\n    for (const prop in jsonSchema) {\n      if (\n        prop !== 'type' &&\n        prop !== 'types' &&\n        typeof jsonSchema[prop] === 'string' &&\n        prop !== 'description' &&\n        jsonSchema.type &&\n        !jsonSchema.type.includes('string')\n      ) {\n        // convert all primitives (booleans, arrays, objects, etc)\n        try {\n          jsonSchema[prop] = JSON.parse(jsonSchema[prop]);\n        } catch (e) {}\n      }\n    }\n\n    return jsonSchema;\n  };\n\n  t._toJsonSchema = stoplightSchema => {\n    let jsonSchema = stoplightSchema;\n\n    if (!jsonSchema) {\n      return {};\n    }\n\n    return t._reduceStoplightSchema(jsonSchema);\n  };\n\n  t.toJsonSchema = stoplightSchema => {\n    return t._toJsonSchema(_.cloneDeep(stoplightSchema));\n  };\n\n  // END TO JSON SCHEMA\n\n  return t;\n};\n\nconst SchemaTransformer = transformer();\n\nexport default SchemaTransformer;\n","import {\n  emptySchema,\n  emptyJsonSchema,\n  isSchemaEmpty,\n  isJsonSchema,\n  isValidJSON,\n  buildExampleFromSchema,\n  dereferenceSchema,\n  uniqueByNamespace,\n  findPropertyByRef,\n  findSchemaByRef,\n  publicJSON,\n  resolveSchema,\n  markFieldsRequired,\n  schemaMerger,\n  mergeSchemas,\n  isSchemaViewerEmpty,\n} from './helpers';\n\nimport Transformer from './transformer';\n\nexport {\n  Transformer,\n  emptySchema,\n  emptyJsonSchema,\n  isSchemaEmpty,\n  isJsonSchema,\n  isValidJSON,\n  buildExampleFromSchema,\n  dereferenceSchema,\n  uniqueByNamespace,\n  findPropertyByRef,\n  findSchemaByRef,\n  publicJSON,\n  resolveSchema,\n  markFieldsRequired,\n  schemaMerger,\n  mergeSchemas,\n  isSchemaViewerEmpty,\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\n\nimport { alert } from '@platform/utils/alert';\n\n/**\n * This will check the current browser query string and render a brief alert.\n *\n * Examples:\n * foo.com?flash=Hi There\n * foo.com?flash=Whoops!&flash_type=error|warning|info|success\n */\nclass Flasher extends React.Component {\n  static propTypes = {\n    routerStore: PropTypes.object.isRequired,\n  };\n\n  componentDidMount = () => {\n    const { routerStore } = this.props;\n\n    const flash = _.get(routerStore, 'location.query.flash');\n    if (!flash) return;\n\n    const flashType = _.get(routerStore, 'location.query.flash_type', 'success');\n\n    _.invoke(alert, flashType || 'success', flash);\n\n    routerStore.setQueryParams(\n      { flash: null, flash_type: null },\n      { preserve: true, replace: true }\n    );\n  };\n\n  render() {\n    return this.props.render();\n  }\n}\n\nexport default Flasher;\n","import React from 'react';\nimport SAlert from 'react-s-alert';\nimport { inject } from 'mobx-react';\n\nimport Flasher from '../Flasher';\n\nconst defaultAlertProps = {\n  effect: 'stackslide',\n  position: 'bottom',\n  timeout: 10000,\n  html: false,\n  onRouteClose: false,\n  stack: {\n    spacing: 15, // in px\n    limit: 3,\n  },\n  offset: 25,\n};\n\nconst Alert = props => {\n  const { routerStore, ...alertProps } = props;\n\n  return (\n    <Flasher\n      routerStore={routerStore}\n      render={() => <SAlert {...Object.assign({}, defaultAlertProps, alertProps)} />}\n    />\n  );\n};\n\nexport default inject('routerStore')(Alert);\n","export const versionSortDesc = o => {\n  let sum = 0;\n  let parts = o.name.split('.');\n  for (let i = 0; i < parts.length; i++) {\n    const e = parts.length - i;\n    try {\n      sum += Number(parts[i]) * Math.pow(100, e);\n    } catch (error) {\n      // noop\n    }\n  }\n  return -sum;\n};\n\nexport const versionSortAsc = o => {\n  let sum = 0;\n  let parts = o.name.split('.');\n  for (let i = 0; i < parts.length; i++) {\n    const e = parts.length - i;\n    try {\n      sum += Number(parts[i]) * Math.pow(100, e);\n    } catch (error) {\n      // noop\n    }\n  }\n  return sum;\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\n\nimport { Link } from '@platform/utils/router';\nimport { isExternalLink } from '@platform/utils/url';\n\nconst HubHeaderItem = props => {\n  const { item = {}, to, isActive, className, style = {}, isEditor, isDark } = props;\n  let { title, path, image } = item;\n\n  // Don't render empty items\n  if (!title && !image) return null;\n\n  const componentProps = {\n    className: cn(\n      className,\n      'HubHeaderItem flex items-center text-lg mx-1 px-4 py-2 rounded font-bold',\n      {\n        'with-image': image,\n        'without-image': !image,\n        'is-active': isActive,\n        'is-dark text-white': isDark,\n        'is-light hover:text-primary': !isDark,\n        'text-black': !isActive && !isDark,\n        'text-primary': isActive && !isDark,\n        'bg-lighten-100': isActive && isDark && !image,\n      }\n    ),\n    style,\n  };\n\n  let contentElem = [];\n\n  if (image) {\n    contentElem.push(\n      <div key=\"i\" className=\"HubHeaderItem-image flex items-center\">\n        <img src={image} alt={isEditor ? '<IMAGE NOT FOUND>' : title || 'logo'} />{' '}\n        {title && <div className=\"ml-4\">{title}</div>}\n      </div>\n    );\n  } else {\n    contentElem.push(\n      <div key=\"t\" className=\"HubHeaderItem-name\">\n        {title}\n      </div>\n    );\n  }\n\n  if (_.isEmpty(path)) {\n    return <div {...componentProps}>{contentElem}</div>;\n  }\n\n  componentProps.to = to || path;\n  const isExternal = isExternalLink(componentProps.to);\n\n  if (isExternal && isEditor) {\n    componentProps.onClick = e => e.preventDefault();\n  }\n\n  return <Link {...componentProps}>{contentElem}</Link>;\n};\n\nexport default HubHeaderItem;\n","import React from 'react';\nimport _ from 'lodash';\nimport cn from 'classnames';\nimport { inject, observer } from 'mobx-react';\n\nimport { faBars } from '@fortawesome/pro-solid-svg-icons/faBars';\nimport { faSearch } from '@fortawesome/pro-solid-svg-icons/faSearch';\n\nimport FormDropdown from '@platform/components/FormDropdown';\n\nimport { checkIsWhite } from '@platform/utils/colors';\nimport { isExternalLink } from '@platform/utils/url';\nimport { versionSortDesc } from '@platform/utils/versions';\n\nimport { Icon } from '@core/ui';\n\nimport HubHeaderItem from '../HubHeaderItem';\nimport HubSearch from '../HubSearch';\n\nconst HeaderSection = props => {\n  const { items, className, activeItemPath, buildPath, isDark, children } = props;\n\n  return (\n    <div className={cn('HubHeader-section flex items-center', className)}>\n      {_.map(items, (item, i) => {\n        return (\n          <HubHeaderItem\n            key={i}\n            item={item}\n            to={buildPath(item.path)}\n            isActive={item.path === activeItemPath}\n            isDark={isDark}\n          />\n        );\n      })}\n\n      {children}\n    </div>\n  );\n};\n\nconst VersionSelector = props => {\n  const { versions, currentVersion, isDark, buildPath } = props;\n\n  if (!currentVersion || !versions || versions.length < 2) return null;\n\n  return (\n    <FormDropdown\n      className={cn('HubHeader-version-selector text-center text-sm font-bold', {\n        'text-white': isDark,\n      })}\n      options={_.map(_.sortBy(versions, versionSortDesc), version => {\n        return {\n          text: `v${version.name}`,\n          value: version.name,\n        };\n      })}\n      value={currentVersion}\n      onChange={(e, { value }) => {\n        if (currentVersion === value) return;\n\n        const version = _.find(versions, { name: value }) || {};\n        if (version) {\n          if (version.path) {\n            const axios = _.get(window, '__SL.rootStore.axios');\n            if (axios) {\n              // strip version from current path\n              const checkPath = window.location.pathname.replace(\n                _.find(versions, { name: currentVersion }).path,\n                ''\n              );\n\n              axios\n                .get(buildPath(`${version.path}/${checkPath}`))\n                .then(() => {\n                  // try to retain path, if it exists\n                  window.location.pathname = buildPath(`${version.path}/${checkPath}`);\n                })\n                .catch(() => {\n                  window.location.pathname = buildPath(version.path || '/');\n                });\n            } else {\n              window.location.pathname = buildPath(version.path || '/');\n            }\n          } else if (version.onClick) {\n            version.onClick();\n          }\n        }\n      }}\n      selectOnBlur={false}\n      selection\n    />\n  );\n};\n\nconst DesktopHubHeader = props => {\n  const {\n    activeItemPath,\n    currentVersion,\n    includeSearch,\n    buildPath,\n    location,\n    versions,\n    isDark,\n    nav,\n  } = props;\n\n  return (\n    <div className=\"HubHeader-inner sm:hidden flex items-center h-24\">\n      <HeaderSection\n        activeItemPath={activeItemPath}\n        className=\"flex-grow is-left\"\n        buildPath={buildPath}\n        location={location}\n        items={nav.left}\n        isDark={isDark}\n      >\n        <VersionSelector\n          currentVersion={currentVersion}\n          buildPath={buildPath}\n          versions={versions}\n          isDark={isDark}\n        />\n      </HeaderSection>\n\n      <HeaderSection\n        className=\"justify-end is-right flex-grow relative\"\n        activeItemPath={activeItemPath}\n        buildPath={buildPath}\n        location={location}\n        items={nav.right}\n        isDark={isDark}\n      >\n        {includeSearch && (\n          <div className=\"HubHeader-search h-24 flex items-center\">\n            <HubSearch\n              id=\"header\"\n              noResultsMessage={typeof includeSearch === 'string' ? includeSearch : undefined}\n            />\n          </div>\n        )}\n      </HeaderSection>\n    </div>\n  );\n};\n\nconst MobileHubIcon = props => {\n  const { isLarge, isDark, icon, onClick } = props;\n\n  return (\n    <div\n      className={cn(\n        'HubHeaderMobile-sidebar-toggle h-16 w-16 flex items-center justify-center',\n        isLarge ? 'text-2xl' : 'text-lg',\n        isDark ? 'is-dark text-white' : 'is-light'\n      )}\n      onClick={onClick}\n    >\n      {icon && <Icon icon={icon} />}\n    </div>\n  );\n};\n\nlet MobileHubHeader = props => {\n  const {\n    activeItemPath,\n    includeSearch,\n    hasSidebar,\n    buildPath,\n    updateUi,\n    isDark,\n    nav = {},\n    ui,\n  } = props;\n\n  const mobileDropdown = _.map(_.compact(_.concat(nav.left, nav.right)), (item, index) => {\n    return {\n      key: index,\n      value: item.path,\n      text: item.title || (item.path === '/' ? 'Home' : item.path),\n      content: <HubHeaderItem key={index} item={item} to={buildPath(item.path)} />,\n    };\n  });\n\n  return (\n    <div className=\"HubHeader-inner relative hidden sm:flex items-center h-16 p-0\">\n      <MobileHubIcon\n        onClick={() => {\n          if (!hasSidebar) return;\n\n          updateUi('unset', 'showSearch');\n          updateUi('set', 'showSidebar', !ui.showSidebar);\n        }}\n        icon={!!hasSidebar && faBars}\n        isDark={isDark}\n        isLarge\n      />\n\n      {mobileDropdown.length > 1 ? (\n        <FormDropdown\n          className={cn('HubHeaderMobile-title flex-grow text-center font-bold text-xl', {\n            'text-white': isDark,\n          })}\n          options={mobileDropdown}\n          value={activeItemPath}\n          onChange={(e, { value }) => {\n            if (value === activeItemPath) return;\n\n            let path = value;\n            if (!isExternalLink(path)) {\n              path = buildPath(value);\n            }\n\n            window.location.href = path;\n          }}\n          selectOnBlur={false}\n          floating\n        />\n      ) : (\n        _.get(mobileDropdown[0], 'content')\n      )}\n\n      <MobileHubIcon\n        onClick={() => {\n          updateUi('unset', 'showSidebar');\n          updateUi('set', 'showSearch', true);\n        }}\n        icon={includeSearch && faSearch}\n        isDark={isDark}\n      />\n\n      {includeSearch &&\n        ui.showSearch && (\n          <HubSearch\n            id=\"header\"\n            autoFocus\n            onBlur={() => {\n              setTimeout(() => updateUi('unset', 'showSearch'), 500);\n            }}\n            noResultsMessage={typeof includeSearch === 'string' ? includeSearch : undefined}\n          />\n        )}\n    </div>\n  );\n};\n\nMobileHubHeader = inject((stores, props) => {\n  const { appStore } = stores;\n\n  return {\n    ...appStore.injectUi('Hub'),\n  };\n})(observer(MobileHubHeader));\n\nconst HubHeader = props => {\n  const {\n    currentVersion,\n    activePagePath,\n    includeSearch,\n    routerStore,\n    hasSidebar,\n    className,\n    buildPath,\n    hasHeader,\n    versions,\n    theme = {},\n    nav = {},\n  } = props;\n\n  if (!hasHeader) return null;\n\n  const isDark = !checkIsWhite(theme.background);\n\n  let activeItemPath;\n  _.forEach(_.compact(_.concat(nav.left, nav.right)), (navItem, index) => {\n    if (activeItemPath) return false; // returning false exits the loop;\n\n    if (navItem.path === '/') {\n      if (!activePagePath || activePagePath === navItem.path) {\n        activeItemPath = navItem.path;\n      }\n    } else if (activePagePath === navItem.path || _.startsWith(navItem.path, activePagePath)) {\n      activeItemPath = navItem.path;\n    }\n  });\n\n  return (\n    <div\n      className={cn('HubHeader print:hidden bg-white', className, {\n        'border-b border-grey-light': !isDark,\n        'is-dark': isDark,\n      })}\n    >\n      <MobileHubHeader\n        activeItemPath={activeItemPath}\n        includeSearch={includeSearch}\n        hasSidebar={hasSidebar}\n        buildPath={buildPath}\n        isDark={isDark}\n        nav={nav}\n      />\n\n      <DesktopHubHeader\n        location={routerStore.location}\n        activeItemPath={activeItemPath}\n        currentVersion={currentVersion}\n        includeSearch={includeSearch}\n        buildPath={buildPath}\n        versions={versions}\n        isDark={isDark}\n        nav={nav}\n      />\n    </div>\n  );\n};\n\nexport default inject('routerStore')(observer(HubHeader));\n","import _ from 'lodash';\n\nimport { getConfigVar } from '../config';\nimport { parseQuery } from '../query';\nimport { safeStringify, safeParse } from '../json';\n\nconst utmKeys = ['utm_campaign', 'utm_content', 'utm_medium', 'utm_source', 'utm_term'];\n\nconst init = (_key, { hideLauncher = true } = {}) => {\n  const key = _key || getConfigVar('INTERCOM_KEY');\n  const Intercom = sdk(key);\n\n  if (Intercom) {\n    let utm = localStorage.getItem('utm');\n\n    if (!utm && window.location.search) {\n      const utmParams = _.pick(parseQuery(window.location.search), utmKeys);\n\n      if (!_.isEmpty(utmParams)) {\n        localStorage.setItem(\n          'utm',\n          safeStringify({\n            ...utmParams,\n            referrer: document.referrer,\n          })\n        );\n      }\n    }\n\n    Intercom('boot', {\n      app_id: key,\n      hide_default_launcher: hideLauncher,\n    });\n  }\n};\n\nconst update = (userInfo, key, { hideLauncher = true } = {}) => {\n  const Intercom = sdk(key);\n\n  if (Intercom) {\n    let utmParams = {};\n    const utm = localStorage.getItem('utm');\n\n    if (utm) {\n      utmParams = _.pickBy(safeParse(utm));\n      localStorage.removeItem('utm');\n    }\n\n    Intercom('update', {\n      ...utmParams,\n      ...userInfo,\n      hide_default_launcher: hideLauncher,\n    });\n  }\n};\n\nconst show = key => {\n  const Intercom = sdk(key);\n\n  if (Intercom) {\n    Intercom('show');\n  }\n};\n\nconst shutdown = key => {\n  const Intercom = sdk(key);\n\n  if (Intercom) {\n    Intercom('shutdown');\n  }\n};\n\nconst script = _key => {\n  const key = _key || getConfigVar('INTERCOM_KEY');\n\n  if (key) {\n    return `(function () { var w = window; var ic = w.Intercom; if (typeof ic === \"function\") { ic('reattach_activator'); ic('update', window.intercomSettings); } else { var d = document; var i = function () { i.c(arguments) }; i.q = []; i.c = function (args) { i.q.push(args) }; w.Intercom = i; function l() { var s = d.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = 'https://widget.intercom.io/widget/${key}'; var x = d.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); } if (w.attachEvent) { w.attachEvent('onload', l); } else { w.addEventListener('load', l, false); } } })()`;\n  }\n\n  return '';\n};\n\nconst sdk = _key => {\n  const key = _key || getConfigVar('INTERCOM_KEY');\n\n  if (key && typeof window !== 'undefined' && window.Intercom) {\n    return window.Intercom;\n  }\n};\n\nexport default {\n  init,\n  update,\n  show,\n  shutdown,\n  script,\n  sdk,\n};\n","if (typeof window !== 'undefined') {\n  require('autotrack/autotrack');\n}\n\nimport { getConfigVar } from '../config';\n\nconst track = (\n  { name = 'slTracker', eventCategory, eventAction, eventLabel, eventValue },\n  opts = {}\n) => {\n  const key = opts.key || getConfigVar('GA_KEY');\n  const GoogleAnalytics = sdk(key);\n\n  if (key && GoogleAnalytics) {\n    GoogleAnalytics(`${name}.send`, {\n      hitType: 'event',\n      eventCategory,\n      eventAction,\n      eventLabel,\n      eventValue,\n    });\n  }\n};\n\nconst init = (_key, name = 'slTracker') => {\n  const key = _key || getConfigVar('GA_KEY');\n  const GoogleAnalytics = sdk(key);\n\n  if (key && GoogleAnalytics) {\n    GoogleAnalytics('create', key, 'auto', name);\n    GoogleAnalytics(`${name}.require`, 'cleanUrlTracker');\n    GoogleAnalytics(`${name}.require`, 'eventTracker');\n    GoogleAnalytics(`${name}.require`, 'outboundLinkTracker');\n    GoogleAnalytics(`${name}.require`, 'pageVisibilityTracker');\n    GoogleAnalytics(`${name}.require`, 'urlChangeTracker');\n    GoogleAnalytics(`${name}.send`, 'pageview');\n  }\n};\n\nconst script = _key => {\n  let script = '';\n\n  const key = _key || getConfigVar('GA_KEY');\n\n  if (key) {\n    script = `\n      var script = document.createElement('script');\n      script.src = 'https://www.google-analytics.com/analytics.js';\n      document.head.appendChild(script);\n      window.ga = window.ga || function () { (ga.q = ga.q || []).push(arguments) }; ga.l = +new Date;\n    `;\n  }\n\n  return script;\n};\n\nconst sdk = _key => {\n  const key = _key || getConfigVar('GA_KEY');\n\n  if (key && typeof window !== 'undefined' && window.ga) {\n    return window.ga;\n  }\n};\n\nexport default {\n  track,\n  init,\n  script,\n  sdk,\n};\n","import { action, reaction, toJS, observable } from 'mobx';\nimport _ from 'lodash';\n\nimport shortid from '@platform/utils/shortid';\n\nlet localforage;\nif (typeof window !== 'undefined' && window.localStorage) {\n  localforage = require('localforage');\n}\n\nclass Base {\n  uid = shortid();\n  rootStore = null;\n  persist = [];\n\n  @observable\n  persistLoaded = false;\n\n  @action\n  init(opts) {\n    _.merge(this, opts || {});\n\n    if (localforage) {\n      let persistLoadCount = 0;\n      const persistCount = _.size(this.persist);\n      for (const p of this.persist) {\n        localforage.getItem(\n          p.key,\n          action((err, val) => {\n            persistLoadCount += 1;\n\n            if (err) {\n              console.error(`error getting ${p.key} from localStorage`, err);\n            } else if (val) {\n              _.set(this, p.key, p.deserialize ? p.deserialize(val) : val);\n            }\n\n            if (persistLoadCount >= persistCount) {\n              this.persistLoaded = true;\n            }\n          })\n        );\n      }\n    }\n\n    if (typeof window !== 'undefined') {\n      this.setupReactions();\n    }\n  }\n\n  setupReactions() {\n    reaction(\n      () => {\n        const vals = {};\n        for (const p of this.persist) {\n          vals[p.key] = this[p.watch || p.key];\n        }\n        return vals;\n      },\n      action(vals => {\n        for (const p of this.persist) {\n          let val = this[p.key];\n          val = p.serialize ? p.serialize(val) : val;\n\n          if (localforage) {\n            localforage.setItem(p.key, toJS(val), err => {\n              if (err) {\n                console.error(`error persisting ${p.key} to localStorage`, err);\n              }\n            });\n          }\n        }\n      }),\n      {\n        name: 'localPersist',\n        delay: 2000,\n      }\n    );\n  }\n}\n\nexport default Base;\n","import React from 'react';\nimport Routes from 'react-static-routes';\nimport { inject, observer } from 'mobx-react';\nimport { SiteData, withRouteData, Head } from '@stoplight/react-static';\n\nimport HubHeader from '@platform/format-hubs/components/HubHeader/viewer';\nimport ErrorBoundary from '@platform/components/ErrorBoundary';\nimport * as Bugsnag from '@platform/utils/bugsnag';\nimport Intercom from '@platform/utils/intercom';\nimport GoogleAnalytics from '@platform/utils/googleAnalytics';\nimport { cleanSlashes } from '@platform/utils/url';\nimport { replaceVariables } from '@platform/utils/variables';\n\nclass Hub extends React.Component {\n  componentDidMount() {\n    const { googleAnalytics, intercom } = this.props;\n\n    Bugsnag.init();\n\n    // Init Stoplight GA\n    GoogleAnalytics.init();\n\n    if (googleAnalytics) {\n      // Init Hub GA\n      GoogleAnalytics.init(googleAnalytics, 'hubTracker');\n    }\n\n    if (intercom) {\n      Intercom.init(intercom, { hideLauncher: false });\n    }\n  }\n\n  render() {\n    const {\n      id,\n      nav,\n      page = {},\n      theme,\n      version,\n      versions,\n      metaTitle,\n      sidebarTree = [],\n      includeSearch = true,\n      rootStore,\n    } = this.props;\n\n    let head = null;\n\n    // <Head> causes a memory leak when run in a node env\n    if (typeof window !== 'undefined') {\n      const meta = page.meta || {};\n\n      let titleTag = metaTitle;\n      if (meta.title) {\n        titleTag = `${meta.title} - ${metaTitle}`;\n      }\n\n      head = (\n        <Head>\n          <title>{titleTag}</title>\n        </Head>\n      );\n    }\n\n    return (\n      <div className=\"Hub flex flex-col h-full\">\n        {head}\n\n        <HubHeader\n          id={id}\n          nav={replaceVariables(nav, { env: rootStore.variables })}\n          theme={theme}\n          hasHeader={!!nav}\n          versions={versions}\n          buildPath={cleanSlashes}\n          currentVersion={version}\n          hasSidebar={sidebarTree.length}\n          activePagePath={page.rootPagePath || page.path}\n          includeSearch={includeSearch}\n        />\n\n        <ErrorBoundary\n          className=\"flex flex-1 relative\"\n          message=\"Click the reload button below to continue.\"\n        >\n          <Routes />\n        </ErrorBoundary>\n\n        <div className=\"pin absolute flex z--1\" role=\"presentation\">\n          <div className=\"h-full flex-1 bg-grey-lightest\" />\n          <div className=\"h-full flex-1 bg-white\" />\n        </div>\n      </div>\n    );\n  }\n}\n\nconst InjectedHub = inject('routerStore')(observer(Hub));\n\nexport default withRouteData(routeData => {\n  return <SiteData {...routeData} component={InjectedHub} />;\n});\n","import { observable, computed, action, toJS } from 'mobx';\nimport _ from 'lodash';\nimport { registerLogger } from '@platform/utils/logging';\n\nimport Base from './base';\n\nconst log = registerLogger('@platform/stores', 'AppStore');\n\nexport default class AppStore extends Base {\n  persist = [\n    {\n      key: 'splitPanes',\n      watch: 'splitPanesLastUpdated',\n      deserialize: val => {\n        return observable.map(val, { deep: false });\n      },\n    },\n    {\n      key: 'srnHistory',\n    },\n    {\n      key: 'desktopDownloadClosed',\n    },\n    {\n      key: 'headerHidden',\n    },\n  ];\n\n  constructor(opts) {\n    super(opts);\n\n    this.init(opts || {});\n  }\n\n  setupReactions() {\n    super.setupReactions();\n\n    if (typeof window === 'undefined') return;\n  }\n\n  /*\n  * GENERIC ERRORS\n  */\n\n  @observable\n  errors = [];\n\n  @computed\n  get hasErrors() {\n    return this.errors.length > 0;\n  }\n\n  @action\n  addError(error, { id, ...options } = {}) {\n    this.errors.push({\n      id,\n      error,\n      ...options,\n    });\n  }\n\n  @action\n  removeError(id) {\n    _.remove(this.errors, { id });\n  }\n\n  @action.bound\n  clearErrors() {\n    this.errors = [];\n  }\n\n  @action\n  updateError(index, value) {\n    this.errors[index] = value;\n  }\n\n  @action\n  clearError(index) {\n    _.pullAt(this.errors, index);\n  }\n\n  /*\n  * UI CACHE\n  */\n\n  @observable\n  ui = observable.map({}, { deep: false });\n\n  @action\n  updateUi(transformation, key, path, value, defaultValue) {\n    let current = this.ui.get(key) || defaultValue;\n\n    log.debug('cache.updateUi', { transformation, key, path, value, defaultValue });\n\n    switch (transformation) {\n      case 'set':\n        if (_.isEmpty(path)) {\n          current = value;\n        } else {\n          _.set(current, path, value);\n        }\n\n        break;\n      case 'push':\n        _.set(\n          current,\n          path,\n          _.get(current, path, []).concat(value instanceof Array ? value : [value])\n        );\n        break;\n      case 'pull':\n        _.pullAt(_.get(current, path, []), value);\n        break;\n      case 'unset':\n        _.unset(current, path);\n        break;\n      default:\n        console.warn(`AppStore updateUi ${transformation} transformation not supported`);\n        return;\n    }\n\n    // We have to complete delete/set the key to rebuild observers\n    // this leads to two observer fires (shown in dev tools) but one re-render\n    this.ui.delete(key);\n    this.ui.set(key, current);\n  }\n\n  injectUi(key, defaultValue = {}) {\n    const existing = this.ui.get(key);\n    if (!existing && defaultValue) {\n      this.ui.set(key, defaultValue);\n    }\n\n    return {\n      ui: existing || defaultValue,\n      clearUi: () => {\n        this.updateUi('set', key, '', {});\n      },\n      updateUi: (t, p, v) => {\n        this.updateUi(t, key, p, v, defaultValue);\n      },\n    };\n  }\n\n  /*\n  * SPLIT PANES\n  */\n\n  @observable\n  splitPanesLastUpdated = 0;\n\n  @observable\n  splitPanes = observable.map({}, { deep: false });\n\n  @action\n  updateSplitPane(id, data) {\n    this.splitPanes.delete(id);\n    this.splitPanes.set(id, data);\n    this.splitPanesLastUpdated = new Date().getTime();\n  }\n\n  injectSplitPane(id) {\n    return {\n      pane: this.splitPanes.get(id) || {},\n      updateSplitPane: data => {\n        this.updateSplitPane(id, data);\n      },\n    };\n  }\n\n  // srn history (DEPRECATED - replaced by upcoming \"tabs\" system)\n\n  @observable.ref\n  srnHistory = [];\n\n  @action\n  addSrn({ srn, name }) {\n    const newHistory = this.removeSrn(srn);\n    newHistory.unshift({ srn, name });\n    this.srnHistory = newHistory.slice(0, 5);\n  }\n\n  @action\n  removeSrn(srn) {\n    this.srnHistory = _.reject(this.srnHistory, { srn });\n    return this.srnHistory;\n  }\n\n  /*\n  * DESKTOP DOWNLOAD SELECTOR\n  */\n\n  @observable\n  desktopDownloadClosed = false;\n\n  @action\n  hideDesktopDownload() {\n    this.desktopDownloadClosed = true;\n  }\n\n  /*\n  * MODALS\n  */\n\n  @computed\n  get activeModal() {\n    return _.get(this.rootStore, 'stores.routerStore.location.query.modal');\n  }\n\n  openModal(modal) {\n    this.rootStore.stores.routerStore.setQueryParams({ modal });\n  }\n\n  closeModal() {\n    this.rootStore.stores.routerStore.setQueryParams({ modal: null }, { preserve: true });\n  }\n\n  /*\n  * APP HEADER\n  */\n\n  @observable\n  headerHidden = false;\n\n  @action.bound\n  toggleHeader() {\n    this.headerHidden = !this.headerHidden;\n  }\n\n  /*\n  * DISCUSSIONS\n  */\n\n  // TODO: support more status options\n  // status can be null, open\n  @action\n  toggleDiscussions(status) {\n    const params = { discussions: status };\n\n    // if toggling discussions to off, also remove any active discussion id\n    if (!params.discussions) {\n      params.discussion = null;\n    }\n\n    this.rootStore.stores.routerStore.setQueryParams(params, { replace: true, preserve: false });\n  }\n\n  @computed\n  get discussionsOpen() {\n    return _.get(this.rootStore.stores.routerStore, 'location.query.discussions') ? true : false;\n  }\n\n  @computed\n  get currentDiscussionId() {\n    return _.get(this.rootStore.stores.routerStore, 'location.query.discussion');\n  }\n\n  /*\n  * ENVIRONMENTS\n  */\n\n  @computed\n  get environmentsOpen() {\n    return _.get(this.rootStore.stores.routerStore, 'location.query.environments') ? true : false;\n  }\n\n  @computed\n  get currentEnvironmentId() {\n    return _.get(this.rootStore.stores.routerStore, 'location.query.environment');\n  }\n}\n","import { observable, reaction, action, computed } from 'mobx';\nimport _ from 'lodash';\nimport JsonSchemaGenerator from 'json-schema-generator';\nimport { safeParse, safeStringify } from '@platform/utils/json';\nimport { emptySchema, Transformer } from '@platform/utils/schemas';\nimport { buildExportUrl } from '@platform/utils/entities';\n\nimport Base from './base';\n\nexport class JsonSchemaContainer {\n  id = '';\n  transformed = {};\n  _onSchemaChange = null;\n  editorStore = null;\n  editorId = null;\n  externalUpdate = false;\n\n  @observable.ref\n  definitions = {};\n\n  @observable.ref\n  schema = '';\n\n  @observable.ref\n  error;\n\n  @observable\n  lastUpdated;\n\n  constructor(props) {\n    this.id = props.id;\n    this.editorStore = props.editorStore;\n    this.editorId = props.editorId;\n    this.updateSchema(props.schema);\n    this._onSchemaChange = props.onSchemaChange;\n\n    this.setupReactions();\n  }\n\n  onSchemaChange(schema) {\n    if (this._onSchemaChange && !this.externalUpdate) {\n      this._onSchemaChange(schema);\n    }\n  }\n\n  setupReactions() {\n    reaction(\n      () => ({\n        lastUpdated: this.lastUpdated,\n      }),\n      this.handleUpdate,\n      {\n        name: 'updated',\n        delay: 1000,\n      }\n    );\n  }\n\n  @action.bound\n  updateDefinitions(definitions) {\n    this.definitions = definitions;\n  }\n\n  @computed\n  get connectedSpecs() {\n    return [];\n  }\n\n  @computed\n  get definitionDropdownData() {\n    const data = [];\n\n    const sortedLocalDefinitions = _.flow(\n      _.toPairs,\n      _.sortBy(0),\n      _.fromPairs\n    )(this.definitions || {});\n    _.forEach(sortedLocalDefinitions, (d, k) => {\n      data.push({\n        text: `#/definitions/${k}`,\n        description: '@local',\n        value: `#/definitions/${k}`,\n      });\n    });\n\n    const specs = this.connectedSpecs;\n    _.forEach(specs, (spec, i) => {\n      const sortedDefinitions = _.flow(\n        _.toPairs,\n        _.sortBy(0),\n        _.fromPairs\n      )(_.get(spec, 'data.definitions', {}));\n      _.forEach(sortedDefinitions, (d, k) => {\n        data.push({\n          text: `#/definitions/${k}`,\n          description: spec.id,\n          value: `${buildExportUrl({\n            entityType: 'specs',\n            entity: spec,\n          })}#/definitions/${k}`,\n        });\n      });\n    });\n\n    return data;\n  }\n\n  @action.bound\n  handleUpdate() {\n    const newSchema = Transformer.toJsonSchema(this.transformed);\n    this.schema = newSchema;\n    this.onSchemaChange(this.schema);\n  }\n\n  @action\n  updateTransformed(t, p, v) {\n    this.externalUpdate = false;\n\n    switch (t) {\n      case 'set':\n        if (_.isEmpty(p)) {\n          this.transformed = v;\n        } else {\n          _.set(this.transformed, p, v);\n        }\n\n        this.lastUpdated = new Date().getTime();\n        break;\n      case 'unset':\n        _.unset(this.transformed, p);\n        this.lastUpdated = new Date().getTime();\n        break;\n      default:\n        console.warn(`'${t}' transformation not supported by jsonSchemaStore`);\n    }\n  }\n\n  @action.bound\n  updateSchema(schema, { external, immediate } = {}) {\n    try {\n      let s = schema || {};\n      if (typeof s === 'string') {\n        s = JSON.parse(s);\n      }\n\n      if (safeStringify(s) !== safeStringify(this.schema)) {\n        this.externalUpdate = external;\n        this.schema = s;\n        this.transformed = Transformer.toStoplightSchema(s || emptySchema);\n\n        if (immediate) {\n          this.onSchemaChange(this.schema);\n        } else {\n          this.lastUpdated = new Date().getTime();\n        }\n      }\n\n      if (this.error) {\n        this.invalidSchema = null;\n        this.error = null;\n      }\n    } catch (e) {\n      this.invalidSchema = schema;\n      this.error = e;\n    }\n  }\n\n  @action\n  generateFromExample(example) {\n    try {\n      const schema = JsonSchemaGenerator(safeParse(example));\n      this.updateTransformed('set', [], Transformer.toStoplightSchema(schema || emptySchema));\n    } catch (e) {\n      console.warn('Could not generate schema from example.', e);\n    }\n  }\n}\n\nexport default class JsonSchemaStore extends Base {\n  @observable\n  containers = [];\n\n  constructor() {\n    super();\n    this.init();\n  }\n\n  getContainer(id) {\n    return _.find(this.containers, { id });\n  }\n\n  @action\n  initContainer(props = {}, { force } = {}) {\n    const { id } = props;\n\n    const current = this.getContainer(id);\n    if (current) {\n      return;\n    }\n\n    this.containers.push(new JsonSchemaContainer(props));\n  }\n\n  @action\n  removeContainer({ id } = {}) {\n    const index = _.findIndex(this.containers, { id });\n    if (index < 0) {\n      return;\n    }\n\n    _.pullAt(this.containers, index);\n  }\n}\n","import _ from 'lodash';\nimport produce from 'immer';\n\nimport shortid from '@platform/utils/shortid';\nimport { registerLogger } from '@platform/utils/logging';\n\nconst log = registerLogger('@platform/stores', 'JsonPathCache');\n\nconst emptyObj = Object.freeze({});\nconst emptyCacheObj = Object.freeze({\n  id: 'new',\n  updated: 1,\n  data: {},\n});\n\nconst newCacheObj = ({ id, updated, data = {} } = {}) => {\n  return {\n    __cache: {\n      id: id || shortid(),\n      updated: updated || new Date().getTime(),\n      data,\n    },\n  };\n};\n\n// register a new cache obj on the tree if not exists already\nexport const register = ({ data = {}, id, path = [], updated }) => {\n  const exists = _.get(data, [...path, '__cache', 'id']);\n\n  if (_.isEmpty(path)) {\n    log.debug('cannot register an empty path', { data, id, path });\n    return data;\n  }\n\n  if (!exists) {\n    log.debug('register', path, data);\n    return produce(data, draft => {\n      _.set(draft, path, newCacheObj({ id, updated }));\n    });\n  }\n\n  return data;\n};\n\nexport const applyUpdate = props => {\n  const { data, transformation, path = [], value, options = {}, id, updated } = props;\n\n  const head = path[0];\n  let updatedArray = false;\n  let up = updated;\n  if (!up) {\n    up = new Date().getTime();\n  }\n\n  return produce(data, newData => {\n    // if we have no more data, we are done\n    if (data && data[head]) {\n      // if this node has been registered (has __cache), trigger an update\n      if (data[head].__cache) {\n        _.set(newData, [head, '__cache', 'updated'], up);\n      }\n\n      // if path is not empty, we are not done recuring down through the tree\n      if (!_.isEmpty(path)) {\n        // if we're unsetting and are just before leaf, we should unset it\n        if (transformation === 'unset' && _.size(path) === 1) {\n          // handle a weird case if for some reason we are trying to unset an array\n          if (_.isArray(newData)) {\n            _.pullAt(newData, path);\n            updatedArray = true;\n          } else {\n            _.unset(newData, path);\n          }\n        } else {\n          _.set(\n            newData,\n            [head],\n            applyUpdate({\n              data: data[head],\n              transformation,\n              lastHead: head,\n              path: path.slice(1),\n              value,\n              options,\n              id,\n              updated: up,\n            })\n          );\n        }\n      }\n    }\n\n    const { splice = {} } = options;\n    let newObj = {};\n    if (transformation && _.isEmpty(path)) {\n      // we're at the leaf! time to handle special transformations, if any\n      switch (transformation) {\n        case 'pull':\n          if (_.isArray(newData)) {\n            _.pullAt(newData, value);\n            updatedArray = true;\n          } else {\n            // handle a weird case where we are for some reason pull on an object\n            _.unset(newData, value);\n          }\n          break;\n        case 'push':\n          // if other elements in this array are registered, this should be registered as well\n          // otherwise we don't have to anything since push just adds to the array and does not\n          // affect position of other elements\n          if (_.get(newData, [0, '__cache'])) {\n            newData.push(newCacheObj({ id, updated }));\n          }\n\n          break;\n        case 'splice':\n          if (!_.isNumber(splice.index)) {\n            log.error(\n              'applyUpdate: the splice transformation requires a numeric splice.index option to be passed in',\n              {\n                splice,\n                newData,\n              }\n            );\n            break;\n          }\n\n          if (!newData || !_.isArray(newData)) {\n            log.error('applyUpdate: splice can only be used on arrays', {\n              splice,\n              newData,\n            });\n\n            return;\n          }\n\n          // if other elements in this array are registered, this should be registered as well\n          if (_.get(newData, [0, '__cache'])) {\n            newObj = newCacheObj({ id, updated });\n          }\n\n          newData.splice(splice.index, splice.howMany || 0, newObj);\n          updatedArray = true;\n          break;\n      }\n    }\n\n    if (updatedArray) {\n      _.forOwn(newData, (d, k) => {\n        if (d && d.__cache) {\n          _.set(newData, [k, '__cache', 'updated'], up);\n        }\n      });\n    }\n  });\n};\n\nexport const triggerUpdate = props => {\n  const { data, transformation, path = [], value, options, id, updated } = props;\n\n  let updatedData = data;\n\n  // special handling to unset the correct part of of the jsonPathCache tree\n  if (transformation === 'unset' && _.isEmpty(path)) {\n    return emptyObj;\n  }\n\n  // recurses through tree updating relevant nodes\n  return applyUpdate({ data: updatedData, transformation, path, value, options, id, updated });\n};\n\nexport default class JsonPathCache {\n  data = {};\n\n  register = (props = {}) => {\n    const { cacheKey, id, path = [] } = props;\n    this.data[cacheKey] = register({ data: this.data[cacheKey], id, path });\n  };\n\n  // pre-registers x number of children at the target basePath + path (this must resolve to an array)\n  registerChildren = (props = {}) => {\n    const { cacheKey, basePath = [], path = [], children } = props;\n\n    if (!_.isArray(children)) {\n      return;\n    }\n\n    _.times(_.size(children), x => {\n      this.register({\n        cacheKey,\n        path: [...basePath, ...path, x],\n      });\n    });\n  };\n\n  // return an array of all the cache ids for a given target path\n  getChildrenCacheIds = ({ cacheKey, basePath = [], path = [] } = {}) => {\n    const targetArr = _.get(this.data[cacheKey], basePath.concat(path), []);\n    return _.map(targetArr, item => _.get(item, '__cache.id'));\n  };\n\n  getCache = ({ cacheKey, path = [] }) => {\n    return _.get(this.data[cacheKey], path.concat(['__cache']), emptyCacheObj);\n  };\n\n  triggerUpdate = (transformation, path = [], value, { cacheKey, options = {} } = {}) => {\n    log.debug('triggerUpdate', cacheKey, transformation, path, value, options);\n\n    this.data[cacheKey] = triggerUpdate({\n      data: this.data[cacheKey],\n      transformation,\n      path,\n      value,\n      options,\n    });\n  };\n\n  updateCacheFactory = ({ cacheKey, basePath = [] }) => {\n    return (transformation, path = [], value, options = {}) => {\n      log.debug('triggerCacheUpdate', { cacheKey, basePath, transformation, path, value, options });\n\n      const { silent } = options;\n      let targetData = this.data[cacheKey];\n      targetData = produce(targetData, draft => {\n        if (!targetData) {\n          log.error('updateCache cache must already exist', {\n            basePath,\n            transformation,\n            path,\n            value,\n            cacheKey,\n            targetData,\n          });\n          return targetData;\n        }\n\n        // special case, just forcing a refresh\n        if (transformation === 'refresh') {\n          return triggerUpdate({\n            data: targetData,\n            path: basePath,\n          });\n        }\n\n        const pathArray = _.isArray(path) ? path : [path];\n\n        let newCacheData;\n        switch (transformation) {\n          case 'set':\n            _.set(draft, [...basePath, '__cache', 'data', ...pathArray], value);\n            break;\n          case 'unset':\n            newCacheData = _.get(draft, [...basePath, '__cache', 'data'], {});\n\n            // handle a weird case if for some reason we are trying to unset an array\n            if (_.isArray(newCacheData)) {\n              _.pullAt(newCacheData, pathArray);\n            } else {\n              _.unset(newCacheData, pathArray);\n            }\n\n            _.set(draft, [...basePath, '__cache', 'data'], newCacheData);\n            break;\n          default:\n            console.error(`updateCache ${transformation} transformation not implemented`);\n            return;\n        }\n      });\n\n      if (!silent) {\n        this.data[cacheKey] = triggerUpdate({\n          data: targetData,\n          path: basePath,\n        });\n      } else {\n        this.data[cacheKey] = targetData;\n      }\n    };\n  };\n}\n","import { reaction, toJS, autorun } from 'mobx';\nimport { types, flow } from 'mobx-state-tree';\nimport _ from 'lodash';\n\nimport shortid from '@platform/utils/shortid';\nimport { registerLogger } from '@platform/utils/logging';\n\nconst log = registerLogger('@platform/stores', 'BaseStore');\n\nlet localforage;\nif (typeof window !== 'undefined' && window.localStorage) {\n  localforage = require('localforage');\n}\n\n/**\n * All stores should extend this model. This model defines universal helpers like local storage persistence.\n */\nexport const BaseStore = types\n  .model({\n    uid: types.optional(types.identifier, shortid()),\n\n    persistLoaded: false,\n\n    error: types.optional(types.frozen()),\n  })\n  .views(self => {\n    return {};\n  })\n  .actions(self => {\n    self.persist = [];\n    self.persistScope = '';\n\n    return {\n      clearError() {\n        self.error = undefined;\n      },\n\n      setupPersist: flow(function*() {\n        yield self.rehydrateFromLocalStorage();\n        self.startWatchingPersist();\n      }),\n\n      computePersistKey(key) {\n        return [self.persistScope, key].join(':');\n      },\n\n      rehydrateFromLocalStorage() {\n        return new Promise((resolve, reject) => {\n          if (localforage && !_.isEmpty(self.persist)) {\n            let persistLoadCount = 0;\n            const persistCount = _.size(self.persist);\n\n            _.forOwn(self.persist, p => {\n              const computedKey = self.computePersistKey(p.key);\n              localforage.getItem(computedKey, (err, val) => {\n                persistLoadCount += 1;\n\n                if (err) {\n                  console.error(`error getting ${computedKey} from localStorage`, err);\n                  reject();\n                } else if (!_.isUndefined(val) && val !== null) {\n                  self.handleRehydrateValue({ key: p.key, options: p, val });\n                }\n\n                if (persistLoadCount >= persistCount) {\n                  self.completeRehydrate();\n                  resolve();\n                }\n              });\n            });\n          }\n        });\n      },\n\n      handleRehydrateValue({ key, options, val } = {}) {\n        try {\n          _.set(self, key, options.deserialize ? options.deserialize(val) : val);\n        } catch (e) {\n          log.warn('Could not rehydrate persisted value', { key, options, val });\n        }\n      },\n\n      completeRehydrate() {\n        self.persistLoaded = true;\n      },\n\n      startWatchingPersist() {\n        autorun(() => {\n          reaction(\n            () => {\n              const vals = {};\n              for (const options of self.persist) {\n                const key = options.watch || options.key;\n                const computedKey = self.computePersistKey(key);\n                vals[computedKey] = _.get(self, key);\n              }\n\n              return vals;\n            },\n            self.doPersist,\n            {\n              name: 'localPersist',\n              delay: 1000,\n            }\n          );\n        });\n      },\n\n      doPersist() {\n        if (localforage) {\n          const promises = _.map(self.persist, options => {\n            const key = options.key;\n            const computedKey = self.computePersistKey(key);\n\n            let val = _.get(self, key);\n            val = options.serialize ? options.serialize(val) : val;\n\n            return new Promise(resolve => {\n              localforage.setItem(computedKey, toJS(val), err => {\n                if (err) {\n                  console.error(`error persisting ${computedKey} to localStorage`, err);\n                }\n\n                resolve();\n              });\n            });\n          });\n\n          return Promise.all(promises);\n        }\n      },\n    };\n  });\n","import _ from 'lodash';\nimport { types, getEnv } from 'mobx-state-tree';\nimport { getConfigVar } from '@platform/utils/config';\nimport { alert } from '@platform/utils/alert';\n\nimport { BaseStore } from './_base';\n\nexport const create = ({ data = {}, env, options = {} }) => {\n  const Base = types\n    .model({\n      bugsnagKey: '',\n    })\n    .views(self => {\n      return {};\n    })\n    .actions(self => {\n      return {\n        afterCreate() {\n          self.bugsnagKey = getConfigVar('BUGSNAG_KEY');\n\n          const rootStore = getEnv(self).rootStore;\n\n          if (rootStore.isClient) {\n            if (rootStore.releaseStage !== 'production') {\n              window.addEventListener('unhandledrejection', event => {\n                alert.error('Yo, got some sort of unhandled rejection here! Check the console.');\n              });\n            }\n          }\n\n          if (typeof Bugsnag !== 'undefined') {\n            Bugsnag.beforeNotify = (payload, metaData) => {\n              metaData.context = rootStore.isClient ? 'client' : 'server';\n\n              // NOTE: cannot store more data than the below https://github.com/bugsnag/bugsnag-js/issues/245\n              metaData.user = _.pick(_.get(rootStore, 'stores.userService.authorizedUser'), [\n                'id',\n                'username',\n              ]);\n\n              return true;\n            };\n          }\n        },\n      };\n    });\n\n  const Service = types\n    .compose(\n      BaseStore,\n      Base\n    )\n    .named('ErrorStore');\n\n  return Service.create(Object.assign({}, data), env);\n};\n","export const openAuthPopup = url => {\n  const size = {\n    width: Math.floor(window.outerWidth * 0.8),\n    height: Math.floor(window.outerHeight * 0.5),\n  };\n\n  if (size.width < 1000) {\n    size.width = 1000;\n  }\n  if (size.height < 644) {\n    size.height = 644;\n  }\n  size.left = Math.floor(window.screenX + (window.outerWidth - size.width) / 2);\n  size.top = Math.floor(window.screenY + (window.outerHeight - size.height) / 8);\n\n  const options = `toolbar=0,scrollbars=1,status=1,resizable=1,location=1,menuBar=0,\n      width=${size.width},height=${size.height},\n      left=${size.left},top=${size.top}`;\n\n  return window.open(url, 'Authorization', options);\n};\n","import { types, getEnv } from 'mobx-state-tree';\nimport _ from 'lodash';\n\n// Instances should extend this\nexport const BaseInstance = types\n  .model({\n    id: types.union(types.number, types.string),\n  })\n  .views(self => {\n    return {};\n  })\n  .actions(self => {\n    return {};\n  });\n\n/**\n * This provides utilities to help manage stores that require multiple instances.\n */\nexport const BaseManager = types\n  .model({\n    instances: types.optional(types.array(types.frozen()), []),\n  })\n  .views(self => {\n    return {};\n  })\n  .actions(self => {\n    // Models that extend this model should set this - the one above is just a minimum template.\n    self.instanceModel = null;\n\n    return {\n      register(id, data, options) {\n        if (!self.instanceModel) {\n          console.error('Must set an instanceModel to use BaseManager.register!');\n          return;\n        }\n\n        const store = self.getInstance(id);\n        if (store) {\n          return store;\n        }\n\n        const newInstance = self.instanceModel.create(\n          Object.assign({ id }, data || {}),\n          getEnv(self)\n        );\n\n        self.instances.push(newInstance);\n\n        return newInstance;\n      },\n\n      getInstance(id) {\n        return _.find(self.instances, { id });\n      },\n    };\n  });\n","import _ from 'lodash';\nimport { isOnPrem, getExperimentalFeatures } from '../config';\n\nconst GUEST = ['view'];\nconst REPORTER = GUEST.concat(['create:project']);\nconst MEMBER = REPORTER.concat(['push:project']);\nconst ADMIN = MEMBER.concat([\n  'manage:team',\n  'manage:member',\n  'create:team',\n  'manage:collaboration',\n  'remove:project',\n  'update:project',\n  'publish:project',\n  'view:billing_usage',\n]);\nconst OWNER = ADMIN.concat(['update', 'manage:billing']);\n\nexport const matrix = {\n  GUEST,\n  REPORTER,\n  MEMBER,\n  ADMIN,\n  OWNER,\n};\n\nexport const accessLevels = Object.freeze({\n  OWNER: 50,\n  ADMIN: 40,\n  MEMBER: 30,\n  REPORTER: 20,\n  GUEST: 10,\n});\n\nexport const accessRoles = Object.freeze({\n  50: 'OWNER',\n  40: 'ADMIN',\n  30: 'MEMBER',\n  20: 'REPORTER',\n  10: 'GUEST',\n});\n\nexport const accessRolesHuman = Object.freeze({\n  50: 'OWNER',\n  40: 'ADMIN',\n  30: 'CONTRIBUTOR',\n  20: 'CONTRIBUTOR', // treating reporter as a member in some cases (like orgs)\n  10: 'READER',\n});\n\nexport const entityMemberAccessLevels = Object.freeze({\n  org: [accessLevels.OWNER, accessLevels.ADMIN, accessLevels.REPORTER, accessLevels.GUEST],\n  team: [accessLevels.OWNER, accessLevels.ADMIN, accessLevels.MEMBER],\n  project: [accessLevels.OWNER, accessLevels.ADMIN, accessLevels.MEMBER],\n});\n\nexport const checkIsPublic = (entity = {}) => {\n  return entity.visibility === 'public';\n};\n\n// find the role that is less than or equal to our access_level\nexport const getAccessRole = (level = 0, { human } = {}) => {\n  return human ? accessRolesHuman[level] : accessRoles[level];\n};\n\nexport const getHighestLevel = ({ entity, isPublic, explicit } = {}) => {\n  const publicAccess = isPublic || checkIsPublic(entity);\n  let level = 0;\n\n  if (explicit) {\n    level = Math.max(\n      _.get(\n        entity,\n        'permissions.project_access.access_level',\n        _.get(entity, 'resolved.access_level', _.get(entity, 'access_level', 0))\n      )\n    );\n  } else {\n    _.forOwn(entity, (value, key) => {\n      let val = 0;\n\n      if (key === 'access_level') {\n        val = value;\n      } else if (value && value.access_level) {\n        val = value.access_level;\n      } else if (_.isObject(value)) {\n        val = getHighestLevel({ entity: value, isPublic: publicAccess });\n      }\n\n      if (val > level) {\n        level = val;\n      }\n    });\n  }\n\n  return level;\n};\n\nexport const getHighestRole = ({ entity, explicit, human } = {}) => {\n  return getAccessRole(getHighestLevel({ entity, explicit }), { human });\n};\n\nexport const canUser = options => {\n  const { entity, action, user = {} } = options || {};\n\n  if (!entity) {\n    return false;\n  }\n\n  if (user.is_admin) {\n    return true;\n  }\n\n  const role = getHighestRole({ entity });\n\n  return _.includes(matrix[role], action);\n};\n\nexport const hasRole = ({ entity, role } = {}) => {\n  return getHighestRole({ entity }) === role;\n};\n\nexport const hasLevel = ({ entity, level } = {}) => {\n  return getHighestLevel({ entity }) === level;\n};\n\nexport const filterByRoles = ({ entities = [], roles = [] } = {}) => {\n  return _.filter(entities, entity => {\n    return _.includes(roles, accessRoles[entity.access_level]);\n  });\n};\n\nexport const checkRole = ({ entity, role, exact = true, inclusive = false }) => {\n  if (!entity) {\n    return false;\n  }\n\n  if (exact) {\n    const accessRole = _.get(accessRoles, entity.access_level);\n\n    // Check if user has required role\n    return accessRole && accessRole === role;\n  }\n\n  // Check if user has required role or above\n  const accessLevel = _.get(accessLevels, role);\n\n  if (inclusive) {\n    return accessLevel && accessLevel <= entity.access_level;\n  }\n\n  return accessLevel && accessLevel < entity.access_level;\n};\n\n// experimental features will be disabled by default, and need to be explicity defined in config var to enable them app wide\n// feature permission can be explicity overwritten at the namespace level as a custom attribute\nexport const isFeatureEnabled = ({ org = {}, user = {}, feature }) => {\n  // disable explorer functionality when running on premises\n  if (isOnPrem && feature.includes('explorer')) {\n    return false\n  }\n\n  // features are enabled for stoplight admins all the time\n  if (!_.includes(getExperimentalFeatures(), feature) || user.is_admin) {\n    return true;\n  }\n\n  const userAccess = _.get(user.feature_flags, feature);\n  const orgAccess = _.get(org.feature_flags, feature);\n\n  // check for explicit user enable/disable of feature (acts as a sudo admin for this feature)\n  if (!_.isNil(userAccess)) {\n    return userAccess;\n  }\n\n  // check for explicit org enable/disable of feature\n  if (!_.isNil(orgAccess)) {\n    return _.isFinite(orgAccess) ? org.access_level >= orgAccess : orgAccess;\n  }\n};\n","import _ from 'lodash';\nimport mingo from 'mingo';\nimport { computed } from 'mobx';\nimport { types, flow, getEnv, detach, isStateTreeNode } from 'mobx-state-tree';\n\nimport { canUser, getHighestRole } from '@platform/utils/acl';\nimport { registerLogger } from '@platform/utils/logging';\nimport { stringifyQuery } from '@platform/utils/query';\n\nconst log = registerLogger('@platform/stores', 'BaseService');\n\nexport const updateRecord = ({ records, record, getRecordId, identifier = 'id', replace }) => {\n  let updatedRecord;\n  const existingIndex = _.findIndex(records, { [identifier]: getRecordId(record) });\n  if (existingIndex >= 0) {\n    /**\n     * Note: can't use _.merge, because that will not remove nested fields.\n     * For example, original prop is tags: [1, 2], new prop is tags: [1]\n     * The 2 needs to be removed. Object.assign will do that, at the expense of not being\n     * As fine grained when merging deep properties. That is acceptable, we can blast away and replace\n     * properties deeper than level 1.\n     *\n     * Also, don't merge a property if its value is undefined.\n     */\n\n    if (replace) {\n      records[existingIndex].data = Object.assign({}, _.omitBy(record, _.isUndefined));\n    } else {\n      records[existingIndex].data = Object.assign(\n        {},\n        records[existingIndex].data,\n        _.omitBy(record, _.isUndefined)\n      );\n    }\n\n    updatedRecord = records[existingIndex];\n  } else {\n    updatedRecord = {\n      [identifier]: getRecordId(record),\n      data: record,\n    };\n\n    records.push(updatedRecord);\n  }\n\n  return updatedRecord;\n};\n\n/**\n * Note the weird detach thing below :(\n * https://github.com/mobxjs/mobx-state-tree/issues/142\n * https://github.com/mobxjs/mobx-state-tree/issues/416\n *\n * If want to test in future, just do the pullAt normally (no detach).\n * Then, open the file editor and remove a bunch of files in the sidebar. This was triggering the error.\n */\nexport const removeRecord = ({ records, identifier = 'id', id }) => {\n  const existingIndex = _.findIndex(records, { [identifier]: id });\n\n  if (existingIndex >= 0) {\n    const oldRecord = records[existingIndex];\n    if (isStateTreeNode(oldRecord)) {\n      detach(oldRecord);\n    }\n    records.remove(oldRecord);\n    return oldRecord;\n  }\n};\n\nexport const ServiceRecord = types\n  .model({\n    id: types.union(types.identifierNumber, types.identifier),\n    data: types.optional(types.frozen()),\n\n    isGetting: false,\n    isUpdating: false,\n    isRemoving: false,\n  })\n  .views(self => {\n    return {};\n  })\n  .actions(self => {\n    return {};\n  })\n  .named('ServiceRecord');\n\n/**\n * All services extend this service model. This model defines all the basic crud\n * operations, methods for manipulating domain state (records), and methods for querying that state.\n *\n * Notes\n * 1. api is an env property passed in at creation in services/index.js.\n * 2. services/user.js sets a common 'private-token' header on the api instance as the user changes their auth.\n */\nexport const BaseService = types\n  .model({\n    identifier: 'id',\n\n    basePath: '/',\n    singleBasePath: types.maybe(types.string),\n\n    records: types.optional(types.array(ServiceRecord), []),\n\n    isSaving: false,\n    isCreating: false,\n    isUpdating: false,\n\n    isLoading: false,\n    isGetting: false,\n    isFinding: false,\n    isSearching: false,\n\n    isRemoving: false,\n\n    // should records be blasted away on find?\n    replace: false,\n\n    error: types.optional(types.frozen()),\n\n    loadMore: types.maybe(types.boolean),\n    perPage: types.optional(types.number, 25),\n  })\n  .views(self => {\n    return {\n      // NOTE: getLocal and findLocal return JUST the data prop (not the root record)\n\n      /**\n       * By default, search by id, path, and username property.\n       * Can override searchProps in child to change behavior.\n       *\n       * @param {any} id\n       * @param {array[string]}\n       * @returns {record}\n       */\n      getLocal(id, searchProps = [self.identifier, 'path', 'username']) {\n        return computed(() => {\n          // make sure its not a string id\n          const cleanid = _.toNumber(id) || id;\n\n          const found = self.records.find(record => {\n            for (const p of searchProps) {\n              const t = _.get(record, ['data', p]);\n              if (t === cleanid || t === id) {\n                return true;\n              }\n            }\n          });\n\n          return found ? found.data : undefined;\n        });\n      },\n\n      findLocal({ query = {}, skip, limit, sort } = {}) {\n        // SL-385: Don't explicitly set skip or limit since we are paging with load more button and want to return all records we've loaded\n\n        return computed(() => {\n          const cursor = mingo.find(_.map(self.records, 'data'), query);\n\n          if (skip) {\n            cursor.skip(skip);\n          }\n\n          if (limit) {\n            cursor.limit(limit);\n          }\n\n          if (sort) {\n            // sort example: {student_id: 1, score: -1}\n            cursor.sort(sort);\n          }\n\n          return cursor.all();\n        });\n      },\n\n      getCurrentPage() {\n        return Math.ceil(self.records.length / self.perPage);\n      },\n    };\n  })\n  .actions(self => {\n    // children can set this to true to always not manage/add/etc self.records\n    self.skipStore = false;\n\n    return {\n      // by default, only dehydrate down to the client if records have been loaded\n      skipDehydrate() {\n        return _.isEmpty(self.records);\n      },\n\n      /**\n       * NOTE: send returns the entire axios request object (which includes the .data response property).\n       * The regular crud methods below (find, get, etc) just return the actual axios response data.\n       */\n      send: flow(function*(request = {}, options = {}) {\n        const { method, path, data = {}, headers = {}, query = {}, ...extra } = request;\n        const { params, skipError } = options;\n\n        const rootStore = getEnv(self).rootStore;\n\n        self.error = undefined;\n\n        try {\n          const api = rootStore.api;\n\n          let url = self.replacePathParams(path, params);\n\n          /**\n           * Add the query string directly to the path, instead of via axios.params,\n           * to make testing (with moxios) possible.\n           */\n          if (!_.isEmpty(query)) {\n            const queryString = stringifyQuery(query);\n            if (!_.isEmpty(queryString)) {\n              url = `${url}?${queryString}`;\n            }\n          }\n\n          /**\n           * TODO: needed until we can use global axios instance defaults:\n           * https://github.com/axios/axios/issues/385#issuecomment-339199333\n           */\n          const userToken = _.get(rootStore.stores.userService, 'token');\n          if (userToken) {\n            headers['private-token'] = userToken;\n          }\n\n          headers['App-Version'] = rootStore.version;\n          // Add the websocket connection ID to every request so we can write messages back to this client\n          headers.wsconnid = _.get(rootStore.Websocket, 'connection.id');\n\n          const res = yield api.request({\n            method,\n            url,\n            data,\n            headers,\n            proxy: false,\n            ...extra,\n            withCredentials: rootStore.isClient,\n          });\n\n          const session = _.get(res, 'headers.session-cookie');\n          if (session) {\n            rootStore.stores.userService.updateSessionCookie(session);\n          }\n\n          return res;\n        } catch (e) {\n          if (!skipError) {\n            self.error = _.get(e, 'response.data', String(e));\n            throw e;\n          }\n        }\n      }),\n\n      get: flow(function*(id, params, opts = {}) {\n        if (!id) {\n          log.error('get: id is a required property');\n          return;\n        }\n\n        const {\n          basePath,\n          query = {},\n          skipStore = self.skipStore,\n          skipError,\n          eager,\n          onlyNew,\n        } = opts;\n\n        const existing = self.getLocal(id);\n\n        // eager will return the existing record and initiate a re-fetch in the background, without blocking the caller\n        // onlyNew will only initiate a fetch if the record does not already exist locally\n        if (eager || onlyNew) {\n          if (existing && !onlyNew) {\n            self.get(id, params, { ...opts, eager: false });\n          }\n\n          return existing;\n        }\n\n        self.isLoading = true;\n        self.isGetting = true;\n\n        let err;\n        let record;\n        try {\n          const res = yield self.send(\n            {\n              method: 'get',\n              path: `${basePath || self.singleBasePath || self.basePath}/${encodeURIComponent(id)}`,\n              query,\n            },\n            { params, skipError }\n          );\n\n          if (skipStore) {\n            record = res.data;\n          } else {\n            record = _.get(\n              self.updateRecord(res.data, { id, params, opts, replace: true }),\n              'data',\n              record\n            );\n          }\n        } catch (e) {\n          if (!skipError) {\n            err = e;\n            self.error = _.get(e, 'response.data', String(e));\n          }\n        }\n\n        self.isLoading = false;\n        self.isGetting = false;\n\n        if (err) {\n          throw err;\n        }\n\n        return record;\n      }),\n\n      find: flow(function*(params, opts = {}) {\n        const {\n          basePath,\n          query = {},\n          skipStore = self.skipStore,\n          skipError,\n          skipPagination,\n        } = opts;\n\n        if (query.page > 1) {\n          self.isFinding = true;\n        } else {\n          self.isFinding = true;\n          self.isLoading = true;\n        }\n\n        if (query.query || query.search) {\n          self.isSearching = true;\n        }\n\n        // apply max 100 as a default\n        const q = query;\n\n        if (!skipPagination) {\n          q.page = query.page || 1;\n          q.per_page = query.per_page || self.perPage;\n        }\n\n        let err;\n        let records = [];\n        try {\n          const res = yield self.send(\n            { method: 'get', path: basePath || self.basePath, query: q },\n            { params }\n          );\n\n          const { data = [], next_page } = _.get(res, 'data', {});\n\n          if (skipStore) {\n            records = data;\n          } else {\n            if (self.replace) {\n              records = self.replaceRecords(data, {\n                params,\n                opts,\n              });\n            } else {\n              records = self.updateRecords(data, {\n                params,\n                opts,\n              });\n            }\n\n            records = _.map(records, 'data');\n\n            if (!skipPagination) {\n              self.loadMore = !!Number(next_page);\n            }\n          }\n        } catch (e) {\n          if (!skipError) {\n            err = e;\n            self.error = _.get(e, 'response.data', String(e));\n          }\n        }\n\n        self.isLoading = false;\n        self.isFinding = false;\n        self.isSearching = false;\n\n        if (err) {\n          throw err;\n        }\n\n        return records;\n      }),\n\n      create: flow(function*(data = {}, params, opts = {}) {\n        self.error = undefined;\n        self.isSaving = true;\n        self.isCreating = true;\n\n        const { basePath, query = {}, skipStore = self.skipStore, skipError } = opts;\n\n        let err;\n        let record;\n        try {\n          const res = yield self.send(\n            { method: 'post', path: basePath || self.basePath, data, query },\n            { params }\n          );\n\n          if (skipStore) {\n            record = res.data;\n          } else {\n            record = _.get(self.updateRecord(res.data, { data, params, opts }), 'data', record);\n          }\n        } catch (e) {\n          if (!skipError) {\n            err = _.get(e, 'response.data', String(e));\n            self.error = err;\n          }\n        }\n\n        self.isSaving = false;\n        self.isCreating = false;\n\n        if (err) {\n          throw err;\n        }\n\n        return record;\n      }),\n\n      update: flow(function*(id, data = {}, params, opts = {}) {\n        if (!id) {\n          log.error('update: id is a required property');\n          return;\n        }\n\n        self.error = undefined;\n        self.isSaving = true;\n        self.isUpdating = true;\n\n        const { basePath, query = {}, skipStore = self.skipStore, skipError } = opts;\n\n        let err;\n        let record;\n        try {\n          const res = yield self.send(\n            {\n              method: 'put',\n              path: `${basePath || self.singleBasePath || self.basePath}/${encodeURIComponent(id)}`,\n              data,\n              query,\n            },\n            { params }\n          );\n\n          if (skipStore) {\n            record = res.data;\n          } else {\n            record = _.get(self.updateRecord(res.data, { id, data, params, opts }), 'data', record);\n          }\n        } catch (e) {\n          if (!skipError) {\n            err = _.get(e, 'response.data', String(e));\n            self.error = err;\n          }\n        }\n\n        self.isSaving = false;\n        self.isUpdating = false;\n\n        if (err) {\n          throw err;\n        }\n\n        return record;\n      }),\n\n      remove: flow(function*(id, params, opts = {}) {\n        if (!id) {\n          log.error('remove: id is a required property');\n          return;\n        }\n\n        const { basePath, query = {}, skipStore = self.skipStore, skipError } = opts;\n\n        self.error = undefined;\n        self.isRemoving = true;\n\n        let err;\n        let record;\n        try {\n          const res = yield self.send(\n            {\n              method: 'delete',\n              path: `${basePath || self.singleBasePath || self.basePath}/${encodeURIComponent(id)}`,\n              query,\n            },\n            { params }\n          );\n\n          if (skipStore) {\n            record = res.data;\n          } else {\n            record = _.get(self.removeRecord(id), 'data', record);\n          }\n        } catch (e) {\n          if (!skipError) {\n            err = _.get(e, 'response.data', String(e));\n            self.error = err;\n          }\n        }\n\n        self.isRemoving = false;\n\n        if (err) {\n          throw err;\n        }\n\n        return record;\n      }),\n\n      replacePathParams(path, params) {\n        let computed = path;\n        _.forEach(params, (param, name) => {\n          computed = computed.replace(`:${name}`, encodeURIComponent(param));\n        });\n        return computed;\n      },\n\n      // services can override this to customize behavior (the identifier prop helps too)\n      getRecordId(record) {\n        return record[self.identifier];\n      },\n\n      updateRecord(record, callOpts) {\n        return updateRecord({\n          ...callOpts,\n          records: self.records,\n          record,\n          identifier: self.identifier,\n          getRecordId: self.getRecordId,\n        });\n      },\n\n      updateRecords(records, callOpts) {\n        if (!_.isEmpty(records)) {\n          return _.map(records, record => {\n            return self.updateRecord(record, callOpts);\n          });\n        }\n\n        return [];\n      },\n\n      removeRecord(id) {\n        return removeRecord({ records: self.records, identifier: self.identifier, id });\n      },\n\n      replaceRecords(records) {\n        const newRecords = _.map(records, r => ({\n          [self.identifier]: self.getRecordId(r),\n          data: r,\n        }));\n\n        self.records = newRecords;\n\n        return newRecords;\n      },\n\n      setError(err) {\n        self.error = err;\n      },\n\n      /**\n       * Shortcut helper to check if the user can perform the given action on a model in this service.\n       * Defaults to the \"current\" view property, if defined on the service.\n       */\n      canUser({ id, action } = {}) {\n        const p = self.getLocal(id || _.get(self, 'current.id'));\n        if (!p) return false;\n\n        return canUser({\n          entity: p.get(),\n          action,\n          user: _.get(getEnv(self).rootStore.stores.userService, 'authorizedUser'),\n        });\n      },\n\n      getHighestRole({ id } = {}) {\n        const p = self.getLocal(id || _.get(self, 'current.id'));\n        if (!p) return false;\n\n        return getHighestRole({ entity: p.get() });\n      },\n    };\n  });\n","import _ from 'lodash';\nimport ClientOAuth2 from 'client-oauth2';\nimport { types, flow } from 'mobx-state-tree';\n\nimport { openAuthPopup } from '@platform/utils/popups';\nimport { createURL, getAllParams, getHashParts, cleanSlashes } from '@platform/utils/url';\nimport { deepFind } from '@platform/utils/objects';\n\nimport { BaseStore } from './_base';\nimport { BaseManager, BaseInstance } from './_manager';\nimport { BaseService } from './services/_base';\n\nconst AuthorizationMethods = {\n  accessCode: 'body',\n  application: 'header',\n  implicit: 'header',\n  password: 'header',\n\n  // accessCode and password were renamed in OpenAPI 3\n  authorizationCode: 'body',\n  clientCredentials: 'header',\n};\n\nexport const create = ({ data, env, options = {} }) => {\n  // this is unique on the project level\n  const Oauth = types\n    .model({\n      id: types.string,\n      tokens: types.optional(types.frozen()),\n      credentials: types.optional(types.frozen()),\n      isCreatingToken: false,\n\n      error: types.optional(types.frozen()),\n    })\n    .views(self => {\n      return {\n        get tokenList() {\n          return _.sortBy(self.tokens, 'created_at');\n        },\n\n        get isValid() {\n          const credentials = self.credentials || {};\n          const {\n            access_token_url,\n            authorize_url,\n            client_secret,\n            client_id,\n            username,\n            password,\n            flow,\n          } = credentials;\n\n          let valid = client_id && client_secret;\n\n          switch (flow) {\n            case 'password':\n              valid = valid && username && password && access_token_url;\n              break;\n\n            case 'application':\n            case 'clientCredentials':\n              valid = valid && access_token_url;\n              break;\n\n            case 'implicit':\n              valid = valid && authorize_url;\n              break;\n\n            default:\n              valid = valid && authorize_url && access_token_url;\n              break;\n          }\n\n          return valid;\n        },\n\n        get authConfig() {\n          const credentials = self.credentials || {};\n          let basePath = '';\n\n          if (typeof window !== 'undefined') {\n            basePath = window.location.origin;\n            // Add a base path to redirectUri to be able to make a request to authorization\n            // callback URL. It works in a context of a compiled static hub\n            const customBasePath = _.get(env.rootStore.stores, 'pageStore.current.basePath');\n\n            if (_.isString(customBasePath)) {\n              basePath += customBasePath;\n            }\n          }\n\n          return {\n            scopes: _.compact(_.map(_.split(credentials.scope, ','), _.trim)),\n            clientId: credentials.client_id,\n            clientSecret: credentials.client_secret,\n            authorizationUri: credentials.authorize_url,\n            accessTokenUri: credentials.access_token_url,\n            redirectUri: cleanSlashes(`${basePath}/oauth/callback/success`),\n          };\n        },\n\n        get authorizationMethod() {\n          const { flow = 'accessCode', authorization_method } = self.credentials || {};\n\n          return authorization_method || AuthorizationMethods[flow];\n        },\n      };\n    })\n    .actions(self => {\n      self.persist = [\n        {\n          key: 'credentials',\n        },\n        {\n          key: 'tokens',\n        },\n      ];\n      self.persistScope = `oauth2TesterCredentials:${self.id}`;\n\n      return {\n        afterCreate: flow(function*() {\n          yield self.setupPersist();\n        }),\n\n        updateCredentials: (t, p, v) => {\n          let credentials;\n\n          if (_.isEmpty(p)) {\n            credentials = v || {};\n          } else {\n            credentials = _.cloneDeep(self.credentials || {});\n            _.set(credentials, p, v);\n          }\n\n          self.credentials = credentials;\n        },\n\n        getToken: flow(function*({ onSuccess, onError }) {\n          self.isCreatingToken = true;\n\n          const authConfig = self.authConfig;\n          const { flow = 'accessCode' } = self.credentials;\n\n          const authOpts = {};\n\n          if (self.authorizationMethod === 'body') {\n            authOpts.body = {\n              client_id: authConfig.clientId,\n              client_secret: authConfig.clientSecret,\n            };\n          }\n\n          const auth = new ClientOAuth2({ ...authConfig, ...authOpts });\n\n          let user;\n          let uri;\n\n          try {\n            switch (flow) {\n              case 'accessCode':\n              case 'authorizationCode':\n                uri = yield self.openOAuthPopup(auth.code.getUri());\n                if (uri) {\n                  user = yield env.rootStore.api.request({\n                    method: 'POST',\n                    url: '/oauth_token_capture',\n                    data: {\n                      client_id: authConfig.clientId,\n                      client_secret: authConfig.clientSecret,\n                      authorize_url: authConfig.authorizationUri,\n                      access_token_url: authConfig.accessTokenUri,\n                      redirect_uri: authConfig.redirectUri,\n                      scopes: authConfig.scopes,\n                      authorization_method: self.authorizationMethod,\n                      uri,\n                    },\n                  });\n                }\n                break;\n\n              case 'implicit':\n                uri = yield self.openOAuthPopup(auth.token.getUri());\n                if (uri) {\n                  user = yield auth.token.getToken(uri);\n                }\n                break;\n\n              case 'password':\n                user = yield auth.owner.getToken(\n                  self.credentials.username,\n                  self.credentials.password\n                );\n                break;\n\n              case 'application':\n              case 'clientCredentials':\n                user = yield auth.credentials.getToken();\n                break;\n\n              default:\n            }\n          } catch (err) {\n            self.error = JSON.stringify(err, null, 4);\n            self.isCreatingToken = false;\n            return;\n          }\n\n          // Client oauth2 getToken returns a ClientOauthInstance nested inside of itself repeatedly\n          // So we extract the data property to avoid infinite loop while searching for the accessToken\n          // user on success full requests will always have a data property in all four cases\n          if (user && typeof user === 'object' && user.data) {\n            user = user.data;\n          }\n\n          const accessToken = user && deepFind(user, /\\b(accessToken|access_token)\\b/);\n\n          if (accessToken) {\n            self.addToken(accessToken);\n\n            if (onSuccess) {\n              onSuccess(accessToken);\n            }\n          }\n\n          self.isCreatingToken = false;\n        }),\n\n        addToken(token) {\n          const tokens = self.tokens || [];\n          const credentials = self.credentials || {};\n          const existing = _.find(tokens, { id: token });\n\n          if (existing || !token) return;\n\n          const t = {\n            id: token,\n            access_token: token,\n            name: credentials.name,\n            type: 'access_token',\n            scope: credentials.scope,\n            created_at: new Date(),\n          };\n\n          const { projectStore } = env.rootStore.stores;\n\n          if (projectStore && projectStore.current) {\n            projectStore.current.updateActiveEnv(\n              { oauth_access_token: token },\n              { preserveShared: true }\n            );\n          } else if (env.rootStore.updateVariables) {\n            const envVars = _.get(env.rootStore, '_variables', {});\n            env.rootStore.updateVariables({ ...envVars, oauth_access_token: token });\n          }\n\n          self.tokens = tokens.concat(t);\n        },\n\n        remove(tokenId) {\n          const tokens = _.cloneDeep(self.tokens || []);\n          _.remove(tokens, { id: tokenId });\n          self.tokens = tokens;\n        },\n\n        openOAuthPopup: flow(function*(authUrl, onSuccess) {\n          const popup = openAuthPopup(authUrl);\n\n          try {\n            return yield self.setListener(popup);\n          } catch (err) {\n            //\n          }\n        }),\n\n        setListener(popup) {\n          return new Promise((resolve, reject) => {\n            window.addEventListener(\n              'message',\n              ({ orgin, data }) => {\n                let res;\n                const { flow = 'accessCode' } = self.credentials;\n\n                const location = createURL(data);\n                try {\n                  switch (flow) {\n                    case 'accessCode':\n                    case 'authorizationCode':\n                      res = getAllParams(location);\n                      break;\n\n                    case 'implicit':\n                      res = getHashParts(location);\n                      break;\n                    default:\n                  }\n                } catch (err) {\n                  // swallow err\n                }\n\n                if (!_.isEmpty(res)) {\n                  popup.close();\n\n                  if (res.access_token || res.code) {\n                    return resolve(location.href);\n                  }\n\n                  if (res.reason) {\n                    return reject(new Error(res.reason));\n                  }\n                }\n              },\n              false\n            );\n          });\n        },\n\n        updateIsCreatingToken(v) {\n          self.isCreatingToken = v;\n        },\n\n        clearError() {\n          self.error = undefined;\n        },\n      };\n    });\n\n  const OauthInstance = types\n    .compose(\n      BaseStore,\n      BaseInstance,\n      BaseService,\n      Oauth\n    )\n    .named('OauthInstance');\n\n  const Base = types\n    .model({\n      instances: types.optional(types.array(OauthInstance), []),\n    })\n    .views(self => {\n      return {};\n    })\n    .actions(self => {\n      self.instanceModel = OauthInstance;\n\n      return {\n        getOrRegisterInstance(userId, projectId) {\n          const id = `${userId}-${projectId}`;\n          const instance = self.getInstance(id);\n\n          if (instance) return instance;\n\n          return self.register(id, { userId, projectId });\n        },\n      };\n    });\n\n  const Service = types\n    .compose(\n      BaseStore,\n      BaseManager,\n      Base\n    )\n    .named('OauthTokenStore');\n\n  return Service.create(data, env);\n};\n","import _ from 'lodash';\nimport axios from 'axios';\nimport produce from 'immer';\nimport { observable, computed, action, flow } from 'mobx';\n\nimport GoogleAnalytics from '@platform/utils/googleAnalytics';\nimport { extractParams, replacePathParams, buildQueryString } from '@platform/utils/url';\nimport {\n  cleanCollection,\n  flattenRefOutput,\n  scenarioPathLocations,\n  createScenarioStepRequest,\n} from '@platform/utils/collections';\nimport { alert } from '@platform/utils/alert';\nimport { safeStringify, safeParse } from '@platform/utils/json';\nimport { extractVariables } from '@platform/utils/variables';\nimport { hashToPath } from '@platform/utils/history';\n\nclass CollectionResult {\n  id = '';\n  type = 'collection';\n  createdAt = null;\n\n  @observable.ref\n  data = {};\n}\n\nclass ScenarioResult {\n  id = '';\n  type = 'scenario';\n  createdAt = null;\n\n  @observable.ref\n  data = {};\n}\n\nclass StepResult {\n  id = '';\n  type = 'http';\n  createdAt = null;\n\n  @observable.ref\n  data = {};\n}\n\nexport class CollectionEditor {\n  rootStore;\n  currentPath;\n\n  @observable.ref\n  parsed = {};\n\n  @observable\n  spec = '';\n\n  @observable.ref\n  error;\n\n  @observable\n  collectionRunning = false;\n\n  @observable\n  scenariosRunning = observable.map({});\n\n  @observable\n  stepsRunning = observable.map({});\n\n  @observable.ref\n  collectionResult = {};\n\n  @observable\n  scenarioResults = [];\n\n  @observable\n  stepResults = [];\n\n  @observable\n  scenarioCtx = observable.map({});\n\n  @observable\n  stepPathParams = observable.map({});\n\n  @observable\n  scenarioTabs = {};\n\n  @observable.ref\n  connectedSpecs = [];\n\n  constructor({ entity, stepPathParams, rootStore, editPath }) {\n    this.id = entity.id;\n    this.entity = entity;\n    this.parsed = entity.data;\n    this.original = safeStringify(entity.data); // Used to determine if entity data has changed in HTTPBlock\n    this.stepPathParams = stepPathParams;\n    this.rootStore = rootStore;\n    this.currentPath = hashToPath({ hash: editPath });\n  }\n\n  @action\n  updateParsed = (t, p, v, options = {}) => {\n    const { immediate, splice = {} } = options;\n\n    this.updatingFrom = 'parsed';\n    this.updatingHistory = false;\n\n    // clean path\n    // make sure it's an array, and remove empty/null values\n    let path = p;\n    if (p instanceof Array) {\n      path = _.reject(p, e => e === '' || e === null);\n    } else if (!p) {\n      path = [];\n    } else {\n      // TODO: handle more complex path selectors like foo.bar[0].fee or [0] or [0].fee\n      path = path.split('.');\n    }\n\n    let transformation = t;\n\n    // don't allow setting undefined values\n    if (_.isUndefined(v)) {\n      transformation = 'unset';\n    }\n\n    // clean value\n    let value;\n    this.parsed = produce(this.parsed, newParsed => {\n      switch (transformation) {\n        case 'push':\n          value = _.get(newParsed, path, []);\n          if (value instanceof Array) {\n            value = value.concat(v instanceof Array ? v : [v]);\n          } else {\n            log.error(`updateParsed: can't push value because path is not an array:`, {\n              path,\n              value,\n            });\n            return newParsed;\n          }\n\n          break;\n        case 'pull':\n          if ((!_.isNumber(v) && !v) || v < 0) {\n            log.error(`updateParsed: can't pull out of bounds index`, { path, index: v });\n            return newParsed;\n          }\n\n          value = _.get(newParsed, path, []);\n          if (value instanceof Array) {\n            _.pullAt(value, v);\n          }\n\n          break;\n        case 'splice':\n        case 'move':\n          // we assume an array in our splice transformation\n          value = _.isArray(v) ? v : [v];\n\n          break;\n        default:\n          value = v;\n      }\n\n      // do the transformation\n      let tail = _.last(path);\n      let parentVal;\n      let targetVal;\n\n      switch (transformation) {\n        case 'unset':\n          parentVal = _.get(newParsed, _.initial(path), {});\n\n          // handle unsetting when the last element is a numeric index (ie unsetting an array value)\n          // and handle unsetting where it's a string tail, but really the target is an array\n          if (_.isArray(parentVal)) {\n            _.pullAt(parentVal, tail);\n          } else {\n            _.unset(newParsed, path);\n          }\n          break;\n        case 'set':\n        case 'push':\n        case 'pull':\n          if (_.isUndefined(value)) {\n            log.error(\n              `updateParsed: the ${transformation} transformation requires a value to be passed in`,\n              {\n                path,\n              }\n            );\n            return newParsed;\n          }\n\n          if (_.isEmpty(path)) {\n            return v;\n          } else {\n            _.set(newParsed, path, value);\n          }\n\n          break;\n        case 'splice':\n          if (_.isEmpty(value)) {\n            log.error('updateParsed: you must pass a value to splice', {\n              splice,\n              path,\n              value,\n            });\n\n            return newParsed;\n          }\n\n          if (!_.isNumber(splice.index)) {\n            log.error(\n              'updateParsed: the splice transformation requires a numeric splice.index option to be passed in',\n              {\n                splice,\n                path,\n                value,\n              }\n            );\n            return newParsed;\n          }\n\n          targetVal = _.get(newParsed, path, []);\n          if (!targetVal || !_.isArray(targetVal)) {\n            log.error('updateParsed invalid newParsed, splice can only be used on arrays', {\n              targetVal,\n              splice,\n              path,\n              value,\n            });\n\n            return newParsed;\n          }\n\n          targetVal.splice(splice.index, splice.howMany || 0, ...value);\n          _.set(newParsed, path, targetVal);\n\n          break;\n        case 'move':\n          try {\n            move({\n              data: newParsed,\n              srcPath: path,\n              dstPath: value,\n            });\n          } catch (e) {\n            // noop\n          }\n\n          break;\n        default:\n          log.error('updateParsed transformation not supported:', t);\n          return newParsed;\n      }\n    });\n\n    if (this.jsonPathCache) {\n      this.jsonPathCache.triggerUpdate(transformation, path, v, { cacheKey: this.id, options });\n    }\n\n    this.handleSpecUpdate({ spec: this.parsed }, { immediate });\n  };\n\n  @action\n  handleSpecUpdate = ({ spec }) => {\n    if (_.isUndefined(spec)) {\n      return;\n    }\n\n    const target = safeStringify(spec);\n\n    if (this.updatingParsed) {\n      this.spec = target;\n    } else {\n      try {\n        const newParsed = JSON.parse(this.spec);\n        this.parsed = newParsed;\n        if (this.onSpecChanged) {\n          this.onSpecChanged(newParsed);\n        }\n      } catch (e) {\n        // noop\n      }\n    }\n  };\n\n  @computed\n  get currentParsed() {\n    if (this._currentParsed) {\n      return this._currentParsed;\n    }\n\n    if (_.isEmpty(this.currentPath)) {\n      return this.parsed;\n    }\n\n    return _.get(this.parsed, this.currentPath);\n  }\n\n  updateCurrentParsed(t, p, v) {\n    let path = p instanceof String ? [p] : p;\n\n    if (!_.isEmpty(this.currentPath)) {\n      path = this.currentPath.concat(path);\n    }\n\n    this.updateParsed(t, path, v);\n  }\n\n  @computed\n  get allCurrentVariables() {\n    let vars = {};\n\n    _.merge(\n      vars,\n      this.currentPopulatedEnvVariables,\n      this.currentPopulatedCtxVariables,\n      this.currentStepPathParams\n    );\n\n    return vars;\n  }\n\n  get localParsed() {\n    const collection = cleanCollection({\n      collection: this.parsed,\n    });\n\n    return {\n      id: this.id,\n      name: _.get(this.entity, 'name'),\n      ...collection,\n    };\n  }\n\n  cleanLocal(data) {\n    return cleanCollection({ collection: safeParse(data) });\n  }\n\n  handleValidation({ target, env, strTarget, cb }) {\n    // return validateCollection({\n    //   collection: parsed,\n    // }).then(data => {\n    //   cb(data);\n    // });\n  }\n\n  updateVariables(variables) {\n    this.rootStore.updateVariables(variables);\n  }\n\n  @computed\n  get currentEnv() {\n    return this.rootStore.variables || {};\n  }\n\n  @computed\n  get oas2Refs() {\n    return _.uniq(_.get(this.parsed, 'settings.testing.oas2', []));\n  }\n\n  @computed\n  get endpoints() {\n    return _.sortBy(this.connectedEndpoints, 'path') || [];\n  }\n\n  @computed\n  get stepResultsMap() {\n    const results = {};\n    for (const r of this.stepResults) {\n      results[r.id] = r;\n    }\n    return results;\n  }\n\n  @computed\n  get currentScenarioPath() {\n    if (_.size(this.currentPath) < 2) {\n      return null;\n    }\n\n    return this.currentPath.slice(0, 2);\n  }\n\n  @computed\n  get currentScenarioId() {\n    // dont want a scenarioID on the coverage page\n    if (_.last(this.currentScenarioPath) === 'testing') {\n      return;\n    }\n    return _.last(this.currentScenarioPath);\n  }\n\n  @computed\n  get currentScenario() {\n    const currentScenarioPath = this.currentScenarioPath;\n    if (!currentScenarioPath) {\n      return {};\n    }\n\n    const scenario = _.get(this.parsed, currentScenarioPath, {});\n\n    return {\n      stage: currentScenarioPath[0],\n      id: currentScenarioPath[1],\n      key: currentScenarioPath[1],\n      path: currentScenarioPath,\n      data: {\n        ...scenario,\n        id: currentScenarioPath[1],\n      },\n    };\n  }\n\n  @computed\n  get currentStepPath() {\n    if (_.size(this.currentPath) < 4) {\n      return null;\n    }\n\n    return this.currentPath.slice(0, 4);\n  }\n\n  @computed\n  get currentStepId() {\n    return _.get(this.currentStep, 'id');\n  }\n\n  @computed\n  get currentStep() {\n    const currentStepPath = this.currentStepPath;\n    if (!currentStepPath) {\n      return {};\n    }\n\n    const step = _.get(this.parsed, currentStepPath, {});\n\n    return {\n      index: _.last(currentStepPath),\n      id: _.last(currentStepPath),\n      data: step,\n      path: currentStepPath,\n    };\n  }\n\n  /*\n   * ENV\n   */\n\n  @computed\n  get currentEnvVariables() {\n    const target =\n      _.get(this.currentStep, 'data') || _.get(this.currentScenario, 'data') || this.parsed || {};\n\n    // return unique $$.env values, stripped of the $$.env\n    return _.compact(\n      _.uniq(\n        _.map(extractVariables(target), v => {\n          if (!_.includes(v, '$$.env')) {\n            return null;\n          }\n\n          return v.replace(/\\$\\$\\.env[.]*|{|}/g, '');\n        })\n      )\n    );\n  }\n\n  @computed\n  get currentPopulatedEnvVariables() {\n    const variables = this.currentEnvVariables || {};\n    const populatedVariables = {};\n\n    _.forEach(variables, v => {\n      populatedVariables[v] = _.get(this.currentEnv, v);\n    });\n\n    return populatedVariables;\n  }\n\n  @computed\n  get currentResult() {\n    const currentStep = this.currentStep;\n    if (currentStep.data) {\n      return _.find(this.stepResults, {\n        id: `${this.currentScenarioId}-${this.currentStepId}`,\n      });\n    }\n\n    const currentScenario = this.currentScenario;\n    if (currentScenario.data) {\n      return _.find(this.scenarioResults, { id: currentScenario.data.id });\n    }\n\n    return this.collectionResult;\n  }\n\n  @computed\n  get flattenedStepResults() {\n    let steps = [];\n\n    const scenariosObj = _.get(this.collectionResult, 'data.output.body.scenarios', {});\n    _.forEach(scenariosObj, scenario => {\n      steps = steps.concat(flattenRefOutput(_.get(scenario, 'steps', [])));\n    });\n\n    return steps;\n  }\n\n  @computed\n  get currentRunning() {\n    if (this.collectionRunning) {\n      return {\n        type: 'collection',\n      };\n    }\n\n    if (this.currentScenarioId) {\n      const runningScenario = this.scenariosRunning.get(this.currentScenarioId);\n      if (runningScenario) {\n        return {\n          type: 'scenario',\n        };\n      }\n    }\n\n    if (this.currentStepId) {\n      const runningStep = this.stepsRunning.get(`${this.currentScenarioId}-${this.currentStepId}`);\n      if (runningStep) {\n        return {\n          type: 'step',\n        };\n      }\n    }\n\n    return null;\n  }\n\n  @action\n  addCollectionResult(collection, result) {\n    const newResult = new CollectionResult();\n    newResult.id = collection.id;\n    newResult.createdAt = new Date();\n    newResult.data = {\n      output: {\n        status: 200,\n        body: result,\n      },\n    };\n    this.collectionResult = newResult;\n\n    for (const path of scenarioPathLocations) {\n      const target = _.get(collection, path, {});\n\n      _.forEach(target, (scenario, id) => {\n        const scenarioResult = _.get(result, [...path.split('.'), id]);\n        if (scenarioResult) {\n          this.addScenarioResult(\n            {\n              stage: path,\n              id,\n              key: id,\n              path: [path, id],\n              data: {\n                id,\n                ...scenario,\n              },\n            },\n            scenarioResult\n          );\n        }\n      });\n    }\n  }\n\n  @action\n  addScenarioResult(scenario, result) {\n    const newResult = new ScenarioResult();\n    newResult.id = scenario.id;\n    newResult.createdAt = new Date();\n    newResult.path = scenario.path;\n    newResult.data = {\n      output: {\n        ..._.get(result, 'response', {}),\n        body: result,\n      },\n    };\n\n    const existingIndex = _.findIndex(this.scenarioResults, {\n      id: scenario.id,\n    });\n    if (existingIndex >= 0) {\n      this.scenarioResults[existingIndex] = newResult;\n    } else {\n      this.scenarioResults.push(newResult);\n    }\n\n    const steps = _.get(scenario, 'data.steps', []);\n    _.forEach(steps, (s, stepIndex) => {\n      const step = {\n        index: stepIndex,\n        id: stepIndex,\n        data: steps[stepIndex],\n        path: scenario.path.concat(['steps', stepIndex]),\n      };\n\n      const stepResult = _.get(result, ['steps', stepIndex]);\n      if (stepResult) {\n        this.addStepResult(scenario, step, stepResult);\n      }\n    });\n  }\n\n  @action\n  addStepResult(scenario, step, result) {\n    const resultId = `${scenario.id}-${step.id}`;\n\n    const newResult = new StepResult();\n    newResult.id = resultId;\n    newResult.createdAt = new Date();\n    newResult.type = step.data.type;\n    newResult.data = result;\n    newResult.path = step.path;\n\n    const existingIndex = _.findIndex(this.stepResults, { id: resultId });\n    if (existingIndex >= 0) {\n      this.stepResults[existingIndex] = newResult;\n    } else {\n      this.stepResults.push(newResult);\n    }\n  }\n\n  @action\n  handleRunError(err) {\n    if (axios.isCancel(err)) {\n      alert.warning(err.message);\n    } else {\n      const data = _.get(err, 'response.data');\n      if (data) {\n        const collection = this.replaceCollectionPathParams(this.parsed);\n        this.addCollectionResult(collection, {\n          ...data,\n        });\n        alert.error('An error occurred while running. Check the collection result tab.');\n      } else {\n        if (err.response) {\n          this.error = err.response;\n        } else {\n          alert.error(\n            'The API did not return a response. Is it running and accessible? If you are sending this request from a web browser, does the API support cors?'\n          );\n        }\n      }\n    }\n  }\n\n  @action\n  runStep = flow(function* runStep(index, { spec, headers } = {}) {\n    let collection = this.parsed;\n    const scenario = _.get(this.currentScenario, 'data');\n    const scenarioPath = _.get(this.currentScenario, 'path');\n    if (!scenario) {\n      return;\n    }\n\n    let step;\n    if (typeof index !== 'undefined') {\n      step = {\n        index,\n        id: index,\n        data: _.get(this.currentScenario, ['data', 'steps', index]),\n        path: [...scenarioPath, 'steps', index],\n      };\n    } else {\n      step = this.currentStep;\n    }\n\n    if (!step) {\n      return;\n    }\n\n    collection = produce(collection, draft => {\n      _.set(\n        draft,\n        step.path,\n        this.setQueryString(this.replaceStepPathParams(_.cloneDeep(step), scenario.id))\n      );\n    });\n\n    // step will always be the first in the result because we're only running one\n    let stepResultPath = scenarioPath.concat(['steps', 0]);\n\n    // allow callee to add arbitrary, hidden headers (useful for embedded try it out like on instance editor)\n    // instance editor needs to be able to add the auth'd users cookie as a step header\n    if (headers) {\n      collection = produce(collection, draft => {\n        _.set(\n          draft,\n          [...step.path, 'input', 'headers'],\n          Object.assign({}, headers, _.get(step, 'data.input.headers', {}))\n        );\n      });\n    }\n\n    const stepId = `${scenario.id}-${step.id}`;\n\n    const ctx = this.scenarioCtx.get(scenario.id) || {};\n    const env = this.currentEnv || {};\n    const skipPrism = env.skipPrism;\n\n    GoogleAnalytics.track({\n      eventCategory: 'Scenarios',\n      eventAction: 'run',\n      eventLabel: `Run Step - ${window.Electron ? 'Desktop' : 'Web'}`,\n    });\n\n    const runMap = {\n      [scenarioPath[0]]: {\n        [scenarioPath[1]]: {\n          [step.id]: true,\n        },\n      },\n    };\n\n    const stepPath = [scenarioPath[0], scenarioPath[1], 'steps', step.id];\n\n    this.clearError();\n\n    const cancelToken = axios.CancelToken;\n    const canceler = cancelToken.source();\n    const request = createScenarioStepRequest({\n      env,\n      ctx,\n      runMap,\n      stepPath,\n      skipPrism,\n      collection,\n      cancelToken: canceler.token,\n      withCredentials: this.rootStore.isClient,\n      specs: spec ? [spec] : _.map(this.connectedSpecs, 'data'),\n    });\n    this.stepsRunning.set(stepId, canceler);\n\n    let res;\n    let err;\n    try {\n      res = yield axios.request(request);\n    } catch (error) {\n      err = error;\n    }\n\n    this.stepsRunning.set(stepId, false);\n\n    if (err) {\n      if (skipPrism) {\n        if (axios.isCancel(err)) {\n          alert.warning(err.message);\n          return;\n        }\n\n        if (err.response) {\n          res = err.response;\n        } else {\n          this.handleRunError(err);\n          return;\n        }\n      } else {\n        this.handleRunError(err);\n        return;\n      }\n    }\n\n    if (!res) return;\n\n    let stepResult = _.get(res.data, stepResultPath) || {};\n\n    if (skipPrism) {\n      stepResult = {\n        ...stepResult,\n        output: {\n          ...stepResult.output,\n          status: res.status,\n          headers: res.headers,\n        },\n      };\n    }\n\n    this.addStepResult(scenario, step, stepResult);\n\n    // update env\n    this.updateVariables(_.get(res, ['data', 'env'], {}));\n\n    // update ctx\n    this.updateScenarioCtx(scenario.id, _.get(res.data, [...stepResultPath, 'ctx'], {}), {\n      overwrite: true,\n    });\n  });\n\n  @action\n  stopStep() {\n    const scenarioId = _.get(this.currentScenario, 'id');\n    if (!scenarioId) {\n      return;\n    }\n\n    const stepId = this.currentStep.id;\n    const key = `${scenarioId}-${stepId}`;\n    const req = this.stepsRunning.get(key);\n    if (!req) {\n      alert.error('Step is not currently running.');\n      return;\n    }\n\n    req.cancel('Step canceled by user.');\n  }\n\n  /*\n   * CTX\n   */\n\n  @action\n  updateScenarioCtx(scenarioId, ctx = {}, { overwrite } = {}) {\n    if (overwrite) {\n      this.scenarioCtx.set(scenarioId, ctx);\n      return;\n    }\n\n    if (_.isEmpty(ctx)) {\n      return;\n    }\n\n    let existing = this.scenarioCtx.get(scenarioId) || {};\n\n    _.merge(existing, ctx);\n\n    this.scenarioCtx.set(scenarioId, existing);\n  }\n\n  ctxVariables(step) {\n    const target = _.merge({}, _.get(step, 'input', {}), _.get(step, 'after.assertions', {}));\n\n    // return unique $.ctx values, stripped of the $.ctx\n    return _.compact(\n      _.uniq(\n        _.map(extractVariables(target), v => {\n          if (!_.includes(v, '$.ctx')) {\n            return null;\n          }\n\n          return v.replace(/\\$\\.ctx[.]*|{|}/g, '');\n        })\n      )\n    );\n  }\n\n  populatedCtxVariables(scenarioId, variables) {\n    if (!scenarioId) {\n      return {};\n    }\n\n    const currentVariables = this.scenarioCtx.get(scenarioId) || {};\n    const populatedVariables = {};\n\n    _.forEach(variables, v => {\n      _.set(populatedVariables, v, _.get(currentVariables, v));\n    });\n\n    return populatedVariables;\n  }\n\n  @computed\n  get currentCtxVariables() {\n    return this.ctxVariables(_.get(this.currentStep, 'data', {}));\n  }\n\n  @computed\n  get currentPopulatedCtxVariables() {\n    return this.populatedCtxVariables(\n      _.get(this.currentScenario, 'data.id'),\n      this.currentCtxVariables\n    );\n  }\n\n  @action\n  updateCurrentCtxVariables(newVars) {\n    const scenarioId = _.get(this.currentScenario, 'data.id');\n    if (scenarioId) {\n      this.updateScenarioCtx(scenarioId, safeParse(newVars));\n    }\n  }\n\n  // Path params\n  getStepPathParams(step, scenarioId) {\n    const key = `${scenarioId}-${step.id}`;\n    const existing = this.stepPathParams.get(key);\n\n    const currentPathParams = {};\n\n    const pathParams = extractParams(_.get(step, 'data.input.url', ''));\n    for (let param of pathParams) {\n      if (!/^\\$\\.ctx\\..*/gi.test(param) && !/^\\$\\$\\.env\\..*/gi.test(param)) {\n        currentPathParams[param] = _.get(existing, param);\n      }\n    }\n\n    return currentPathParams;\n  }\n\n  @computed\n  get currentStepPathParams() {\n    return this.getStepPathParams(this.currentStep, this.currentScenario.id);\n  }\n\n  @action\n  updateCurrentStepPathParams(newParams) {\n    const scenarioId = _.get(this.currentScenario, 'id');\n    const stepId = _.get(this.currentStep, 'id');\n    const key = `${scenarioId}-${stepId}`;\n\n    let existing = this.stepPathParams.get(key);\n\n    if (existing) {\n      this.stepPathParams.delete(key);\n    } else {\n      existing = {};\n    }\n    _.merge(existing, newParams);\n\n    this.stepPathParams.set(key, existing);\n  }\n\n  replaceCollectionPathParams(collection) {\n    return produce(collection, draft => {\n      for (let sType of ['before', 'scenarios', 'after']) {\n        _.keys(draft[sType]).forEach(scenarioKey => {\n          _.set(\n            draft,\n            [sType, scenarioKey],\n            this.replaceScenarioPathParams(draft[sType][scenarioKey], scenarioKey)\n          );\n        });\n      }\n    });\n  }\n\n  replaceScenarioPathParams(scenario, scenarioId) {\n    if (!scenario) {\n      return;\n    }\n\n    return produce(scenario, draft => {\n      _.keys(scenario.steps).forEach(stepIndex => {\n        const newStep = this.replaceStepPathParams(\n          {\n            index: stepIndex,\n            id: stepIndex,\n            data: draft.steps[stepIndex],\n          },\n          scenarioId\n        );\n\n        _.set(draft, ['steps', stepIndex], newStep);\n      });\n    });\n  }\n\n  replaceStepPathParams(step, scenarioId) {\n    const pathParams = this.getStepPathParams(step, scenarioId);\n\n    if (!_.isEmpty(pathParams)) {\n      step.data = produce(step.data, draft => {\n        _.set(\n          draft,\n          ['input', 'url'],\n          replacePathParams(_.get(step, 'data.input.url'), pathParams)\n        );\n      });\n    }\n\n    return step.data;\n  }\n\n  /*\n   * QUERY PARAMS\n   */\n\n  setQueryString(stepData) {\n    let url = _.get(stepData, 'input.url');\n    const params = _.get(stepData, 'input.query');\n\n    const v = buildQueryString({ url, params });\n    const newUrl = v.url;\n    if (newUrl) {\n      stepData = produce(stepData, draft => {\n        _.set(draft, ['input', 'url'], newUrl);\n      });\n    }\n\n    return stepData;\n  }\n\n  /*\n   * ACCORDIONS\n   */\n\n  @computed\n  get currentScenarioTab() {\n    return this.scenarioTabs[this.currentScenarioId] || 'settings';\n  }\n\n  @action\n  toggleScenarioTab(scenarioId, tab) {\n    this.scenarioTabs = {\n      ...this.scenarioTabs,\n      [scenarioId]: tab,\n    };\n  }\n\n  @action\n  toggleCurrentScenarioTab(tab) {\n    this.toggleScenarioTab(this.currentScenarioId, tab);\n  }\n\n  @action\n  clearError = () => {\n    this.error = null;\n  };\n\n  @action\n  resetStepResults() {\n    this.stepResults = [];\n  }\n}\n\nexport default class CollectionEditorStore {\n  rootStore;\n  editors = {};\n\n  constructor({ rootStore }) {\n    this.rootStore = rootStore;\n  }\n\n  initEditor = ({ entity, stepPathParams, editPath } = {}) => {\n    this.editors[entity.id] = new CollectionEditor({\n      entity,\n      stepPathParams,\n      editPath,\n      rootStore: this.rootStore,\n    });\n  };\n\n  getEditor = ({ id }) => {\n    return this.editors[id];\n  };\n}\n","import _ from 'lodash';\nimport { action, computed, observable, reaction } from 'mobx';\n\nimport { isExternalLink } from '@platform/utils/url';\nimport { buildViewPath, replaceBlockVariables } from '@platform/format-hubs/utils/viewer';\n\nclass Page {\n  page = {};\n  crumbs = [];\n  sidebarTree = [];\n  basePath = '';\n  version = '';\n  namespace = {};\n\n  @observable\n  isActive = false;\n\n  constructor(props) {\n    const {\n      id,\n      page,\n      crumbs,\n      config,\n      version,\n      versions,\n      basePath,\n      sidebarTree,\n      routerStore,\n      whitelabel = false,\n      rootStore,\n      namespace,\n    } = props;\n\n    this.id = id;\n    this.page = page;\n    this.crumbs = crumbs || [];\n    this.config = config || {};\n    this.sidebarTree = sidebarTree || [];\n    this.routerStore = routerStore;\n    this.whitelabel = whitelabel;\n    this.version = version;\n    this.versions = versions || [];\n    this.rootStore = rootStore;\n    this.namespace = namespace;\n\n    if (basePath) {\n      this.basePath = basePath;\n    }\n  }\n\n  @computed\n  get currentEnv() {\n    return this.rootStore.debouncedVariables || {};\n  }\n\n  get hasSidebar() {\n    return !!this.sidebarTree.length;\n  }\n\n  get activePage() {\n    return {\n      parsedPath: this.currentParsedPath,\n      treePath: this.currentParsedPath,\n      data: this.page,\n    };\n  }\n\n  get activeSubpage() {\n    return this.activePage;\n  }\n\n  @computed\n  get activeBlocks() {\n    const page = this.activeSubpage.data || this.activePage.data || {};\n    const { blocks } = page.data ? _.cloneDeep(page.data) : {};\n\n    return _.map(blocks, block => replaceBlockVariables({ block, env: this.currentEnv }));\n  }\n\n  get currentPath() {\n    return _.compact(_.split(this.page.path, '/'));\n  }\n\n  get currentRelativePath() {\n    return _.trimStart(this.page.path, this.page.rootPagePath);\n  }\n\n  get currentParsedPath() {\n    return this.page.parsedPath;\n  }\n\n  buildViewPath = (path = '') => {\n    if (isExternalLink(path) || _.first(path) === '#') {\n      return path;\n    }\n\n    let version = this.version;\n    const isDefaultVersion = _.find(this.versions, { name: version, isDefault: true });\n    if (!this.versions || this.versions.length < 2 || isDefaultVersion) {\n      version = '';\n    }\n\n    return buildViewPath({ path, version, basePath: this.basePath });\n  };\n\n  checkSidebarItemIsActive = item => {\n    return this.page.path === item.path;\n  };\n\n  checkSidebarChildIsActive = folder => {\n    if (!folder) return;\n\n    // Check to see if our current path starts with the folder's path\n    let reg = new RegExp(`^${folder.path}`);\n\n    return reg.test(this.page.path);\n  };\n\n  goToNestedPath(path) {\n    const location = _.get(this.routerStore, 'location') || {};\n\n    if (path !== location.pathname) {\n      this.routerStore.replace(path);\n    }\n  }\n\n  @action\n  activate = () => {\n    this.isActive = true;\n  };\n\n  @action\n  deactivate = () => {\n    this.isActive = false;\n  };\n}\n\nexport default class PageStore {\n  rootStore = {};\n\n  @observable.ref\n  _instances = {};\n\n  constructor({ rootStore }) {\n    this.rootStore = rootStore;\n  }\n\n  @computed\n  get instances() {\n    return _.values(this._instances);\n  }\n\n  @computed\n  get current() {\n    return _.find(this.instances, { isActive: true });\n  }\n\n  @action\n  add = opts => {\n    const page = new Page(opts);\n    return (this._instances[page.id] = page);\n  };\n\n  deactivateAll = () => {\n    for (const path in this._instances) {\n      if (this._instances[path].isActive) {\n        this._instances[path].deactivate();\n      }\n    }\n  };\n\n  lookup = (id, opts) => {\n    const page = this._instances[id];\n    return page || !opts ? page : this.add({ ...opts, id, rootStore: this.rootStore });\n  };\n}\n","import _ from 'lodash';\nimport { observable, action } from 'mobx';\n\nimport { URI } from '@core/uri';\n\nimport { buildParams } from '@platform/utils/history';\nimport { stringifyQuery, parseQuery } from '@platform/utils/query';\n\nexport default class RouterStore {\n  history = null;\n  rootStore = null;\n  routes = [];\n  globalQueryParams = {};\n  redirects = [];\n\n  @observable\n  location = null;\n\n  constructor({ rootStore, routes, location, redirects, ...extraProps }) {\n    this.rootStore = rootStore;\n    this.routes = routes;\n    this.redirects = redirects || [];\n\n    Object.assign(this, extraProps);\n\n    // Setup the initial location. Useful when rendered on the server.\n    if (!_.isEmpty(location)) {\n      this.handleLocationChange(location);\n    }\n  }\n\n  /**\n   * When the location changes, we need to calculate the current route data, params, and query.\n   * Then, we merge that into the normal browser location object that is passed in.\n   */\n\n  @action\n  handleLocationChange = location => {\n    this.location = {\n      host: this.rootStore.isClient ? _.get(window, 'location.host', '') : location.host,\n      ...this.parseLocation(location),\n    };\n  };\n\n  _triggerRouteInterceptors = ({ location }) => {\n    const parsedLocation = this.parseLocation(location);\n\n    const redirect = _.find(this.redirects, redirect => {\n      if (!redirect.from || !redirect.to) return;\n\n      return redirect.from.replace(/^\\//, '') === parsedLocation.pathname.replace(/^\\//, '');\n    });\n\n    if (redirect && redirect.to) {\n      if (/^http/.test(redirect.to)) {\n        window.location.href = redirect.to;\n      } else {\n        window.location.pathname = redirect.to;\n      }\n\n      return;\n    }\n\n    return location;\n  };\n\n  /*\n   * History methods\n   */\n\n  parseLocation = location => {\n    if (typeof location === 'string') {\n      location = URI.parse(location).location;\n    }\n\n    if (location.search && !location.query) {\n      location.query = parseQuery(location.search);\n    }\n\n    return location;\n  };\n\n  /*\n  History allows passing strings or objects to its respective functions,\n  interceptors requires location to be an object so check for string and parse\n  */\n  push = location => {\n    if (!this.history) return;\n\n    location = this._triggerRouteInterceptors({ type: 'push', location });\n    if (!location) return;\n\n    return this.history.push(location);\n  };\n\n  replace = location => {\n    if (!this.history) return;\n\n    location = this._triggerRouteInterceptors({ type: 'replace', location });\n    if (!location) return;\n\n    return this.history.replace(location);\n  };\n\n  go = location => {\n    if (!this.history) return;\n\n    location = this._triggerRouteInterceptors({ type: 'go', location });\n    if (!location) return;\n\n    return this.history.go(location);\n  };\n\n  goBack = () => {\n    if (!this.history) return;\n\n    return this.history.goBack();\n  };\n\n  goForward = () => {\n    if (!this.history) return;\n\n    return this.history.goForward();\n  };\n\n  shouldPreventRedirect = () => {\n    return false;\n  };\n\n  buildQueryParams = (params, options = {}) => {\n    if (!this.rootStore.isClient) return;\n\n    const location = this.location;\n    const query = buildParams(location, params, {\n      preserve: true,\n      ...options,\n    });\n\n    return {\n      ...location,\n      query,\n      search: _.isEmpty(query) ? '' : `?${stringifyQuery(query, { encode: false })}`,\n    };\n  };\n\n  setQueryParams = (params, options = {}) => {\n    const location = this.buildQueryParams(params, options) || {};\n\n    if (_.get(this.location, 'search') === location.search) return;\n\n    if (options.replace) {\n      return this.replace(location);\n    }\n\n    return this.push(location);\n  };\n\n  buildHash = (hash, options = {}) => {\n    const location = {\n      ...this.location,\n      hash,\n    };\n\n    return location;\n  };\n\n  setHash = (hash, options = {}) => {\n    if (!this.rootStore.isClient) {\n      return;\n    }\n\n    const location = this.buildHash(hash, options);\n\n    if (options.replace) {\n      return this.replace(location);\n    }\n\n    return this.push(location);\n  };\n\n  scrollToHash = hash => {\n    setTimeout(() => {\n      const elementId = (hash || this.location.hash).replace('#', '');\n      const element = document.getElementById(elementId);\n\n      if (element) {\n        element.scrollIntoView({ behavior: 'smooth', block: 'start', inline: 'nearest' });\n      }\n    }, 200);\n  };\n}\n","import _ from 'lodash';\nimport defaultAxios from 'axios';\nimport { action, computed, observable, reaction } from 'mobx';\n\nimport AppStore from '@platform/stores/appStore';\nimport JsonSchemaStore from '@platform/stores/jsonSchemaStore';\nimport JsonPathCache from '@platform/stores/jsonPathCache';\n\nimport { create as createErrorStore } from '@platform/stores/error';\nimport { create as createOauthTokenStore } from '@platform/stores/oauth';\n\nimport { getConfigVar } from '@platform/utils/config';\nimport { stringifyQuery } from '@platform/utils/query';\nimport { safeParse, safeStringify } from '@platform/utils/json';\n\nimport CollectionEditorStore from './collectionEditorStore';\nimport PageStore from './pageStore';\nimport RouterStore from './routerStore';\n\nclass RootStore {\n  @observable\n  _variables = {};\n\n  @observable\n  debouncedVariables = {};\n\n  version = getConfigVar('APP_VERSION') || '0.0.0';\n  releaseStage = getConfigVar('RELEASE_STAGE') || 'development';\n\n  constructor(opts = {}) {\n    const {\n      axios,\n      api,\n      location = {}, // initialize with a specific http location\n      redirects,\n      defaultVariables,\n      globalQueryParams,\n    } = opts;\n\n    // so we don't have to do this check everywhere, can just check isClient :)\n    this.isClient = typeof window !== 'undefined' && window.localStorage;\n\n    // setup the global api requester\n    // allow overriding defaults, useful for testing\n    this.axios = axios || defaultAxios;\n    this.api =\n      api ||\n      axios ||\n      defaultAxios.create({\n        baseURL: getConfigVar('SL_API_HOST'),\n        paramsSerializer(params) {\n          return stringifyQuery(params);\n        },\n      });\n\n    let localVariables = {};\n    if (this.isClient) {\n      localVariables = safeParse(localStorage.getItem('__SL.variables'));\n    }\n\n    // create the state models\n    this._stores = {\n      routerStore: new RouterStore({ rootStore: this, location, globalQueryParams, redirects }),\n    };\n\n    this._variables = Object.assign(\n      {},\n      defaultVariables,\n      localVariables,\n      _.get(this._stores.routerStore, 'location.query')\n    );\n\n    /**\n     * Create the custom stores second, so that they can use the services if necessary.\n     */\n    Object.assign(this._stores, {\n      appStore: new AppStore({ rootStore: this }),\n\n      collectionEditorStore: new CollectionEditorStore({ rootStore: this }),\n      pageStore: new PageStore({ rootStore: this }),\n      jsonSchemaStore: new JsonSchemaStore({ rootStore: this }),\n\n      jsonPathCache: new JsonPathCache({ rootStore: this }),\n\n      errorStore: createErrorStore({ env: { rootStore: this } }),\n      oauthTokenStore: createOauthTokenStore({ env: { rootStore: this } }),\n    });\n\n    this.setupReactions();\n  }\n\n  setupReactions() {\n    reaction(\n      () => this._variables,\n      action(variables => {\n        this.debouncedVariables = variables;\n\n        if (this.isClient) {\n          localStorage.setItem(\n            '__SL.variables',\n            safeStringify(_.pickBy(variables, v => !_.isNil(v)))\n          );\n        }\n      }),\n      {\n        name: 'updateVariables',\n        delay: 1000,\n        fireImmediately: true,\n      }\n    );\n  }\n\n  get stores() {\n    return this._stores;\n  }\n\n  @computed\n  get variables() {\n    return this._variables;\n  }\n\n  @action\n  updateVariables = (variables = {}) => {\n    this._variables = { ...this._variables, ...variables };\n  };\n}\n\nexport const createRootStore = opts => {\n  return new RootStore(opts);\n};\n","import React from 'react';\nimport _ from 'lodash';\nimport { Router } from '@stoplight/react-static';\nimport { Provider as MobxProvider, useStaticRendering } from 'mobx-react';\n\nimport createBrowserHistory from 'history/createBrowserHistory';\nimport createMemoryHistory from 'history/createMemoryHistory';\n\nimport Alert from '@platform/components/Alert';\nimport ErrorBoundary from '@platform/components/ErrorBoundary';\nimport { safeParse } from '@platform/utils/json';\nimport { parseQuery } from '@platform/utils/query';\nimport { syncHistoryWithStore } from '@platform/utils/router';\nimport { getConfigVar } from '@platform/utils/config';\n\nimport Hub from './containers/Hub';\nimport { createRootStore } from './stores';\n\nif (process.env.NODE_ENV !== 'test') {\n  require('@core/ui/styles/main.css');\n  require('@platform/styles/index.styl');\n}\n\nconst canUseDOM = !!(\n  typeof window !== 'undefined' &&\n  window.document &&\n  window.document.createElement\n);\n\nif (!canUseDOM) {\n  useStaticRendering(true);\n}\n\nconst App = () => {\n  const variables = getConfigVar('variables');\n  const redirects = getConfigVar('redirects');\n\n  let rootStoreOptions = {\n    defaultVariables: variables ? safeParse(variables) : {},\n    redirects: redirects,\n  };\n\n  let targetHistory;\n  if (canUseDOM) {\n    rootStoreOptions.location = window.location;\n    rootStoreOptions.globalQueryParams = _.pick(parseQuery(window.location.search), ['__build_id']);\n\n    targetHistory = createBrowserHistory();\n  } else {\n    targetHistory = createMemoryHistory();\n  }\n\n  const rootStore = createRootStore(rootStoreOptions);\n  const history = syncHistoryWithStore(targetHistory, rootStore.stores.routerStore);\n\n  if (canUseDOM) {\n    _.set(window, '__SL.rootStore', rootStore);\n    _.set(window, '__SL.history', targetHistory);\n  }\n\n  // Cannot use autoScrollToTop/autoScrollToHash since our scroll target is an inner element instead of the body\n  return (\n    <MobxProvider {...rootStore.stores}>\n      <Router history={history} autoScrollToTop={false} autoScrollToHash={false}>\n        <ErrorBoundary message=\"Click the reload button below to continue.\">\n          <Hub rootStore={rootStore} />\n          <Alert />\n        </ErrorBoundary>\n      </Router>\n    </MobxProvider>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { initLogging } from '@platform/utils/logging';\n\ninitLogging();\n\n// Your top level component\nimport App from './App';\n\n// Export your top level component as JSX (for static rendering)\nexport default App;\n\n// Render your app\nif (typeof document !== 'undefined') {\n  const renderMethod = ReactDOM.hydrate || ReactDOM.render;\n  const render = Comp => {\n    renderMethod(<Comp />, document.getElementById('root'));\n  };\n\n  // Render!\n  render(App);\n}\n"],"sourceRoot":""}